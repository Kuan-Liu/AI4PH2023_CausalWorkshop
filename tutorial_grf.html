<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="author" content="Madina Kurmangaliyeva" />


<meta name="progressive" content="true" />
<meta name="allow-skip" content="true" />
<meta name="learnr-version-prerender" content="0.11.5" />

<title>Tutorial Generalized Random Forest DSE 2020 Tilburg</title>

<!-- header-includes START -->
<!-- HEAD_CONTENT -->
<!-- header-includes END -->
<!-- HEAD_CONTENT -->

<!-- highlightjs -->
<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>


<!-- taken from https://github.com/rstudio/rmarkdown/blob/de8a9c38618903627ca509f5401d50a0876079f7/inst/rmd/h/default.html#L293-L343 -->
<!-- tabsets -->
<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>
<!-- end tabsets -->


</head>

<body>
<a class='sr-only sr-only-focusable visually-hidden-focusable' href='#learnr-tutorial-content'>Skip to Tutorial Content</a>



<div class="pageContent band">
<main class="bandContent page">

<article class="topics" id="learnr-tutorial-content">

<div id="section-intro-hypothetical-rct" class="section level2">
<h2>Intro: Hypothetical RCT</h2>
<p>In this tutorial, we imagine a following situation.</p>
<p>Assuming that the most important predictor of criminal behavior is
poverty and lack of employment opportunities, the U.S. government
mandated a new job counselling and job placement program for
ex-offenders. Since the program was costly, the government decided to
test its effectiveness by first running an RCT.</p>
<p>Imagine that half of the offenders on the COMPAS list were mandated
to go through comprehensive job counselling and help with job placement,
while the other half did not have any access to this program. At this
moment we are abstracting from the recidivism rates.</p>
<p>I modified the COMPAS data you used in the previous tutorials in the
following manner:</p>
<ul>
<li>Dropped <code>Two_yr_Recidivism</code> variable</li>
<li>Added <code>jobhelp</code> dummy variable that indicates whether the
individual was assigned to treatment or not</li>
<li>Added <code>wage</code> variable which records the average of the
monthly income (in thousand USD) during the three years after the end of
the job placement program for both treated and non-treated
individuals.</li>
<li>Shifted <code>Number_of_Priors</code> so that it starts with
zero.</li>
</ul>
<p>Both <code>jobhelp</code> and <code>wage</code> variables are
simulated.</p>
<p>You are part of the program assessment team and your task is to find
the following information about the treatment effect of
<code>jobhelp</code> on <code>wage</code>:</p>
<ul>
<li>Average Treatment Effect (ATE)</li>
<li>Average Treatment Effect on the Treated</li>
<li>Conditional ATE for white offenders</li>
<li>Conditional ATE for black offenders</li>
<li>Check whether there is indeed heterogeneity in treatment
effects</li>
<li>Find which group of offenders will benefit the most from the
program</li>
<li>Find which group of offenders does not benefit and do not need the
program</li>
<li>Which characteristics of the offenders define the most the
heterogeneity of treatment effects</li>
<li>Predict treatment effects for any new offender</li>
</ul>
<p>In this tutorial we will learn how to answer these questions using
the <a href="https://grf-labs.github.io/grf/REFERENCE.html">Generalized
Random Forest</a> algorithm developed by Susan Athey, Stefan Wager and
Julie Tibshirani.</p>
<div id="section-exercise-get-acquainted-with-the-dataset."
class="section level3">
<h3>Exercise – Get acquainted with the dataset.</h3>
<p><em>Complete the code below by filling in the blanks</em></p>
<div class="tutorial-exercise" data-label="dataintro"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0" data-pipe="|&gt;">
<pre class="text"><code># See the head of the data
____(dataset)

# Get the density plot of the variable &#39;wage&#39;
dataset %&gt;% ggplot(...) + 
  
# Get the number of people who were treated
dataset %&gt;% </code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<div class="tutorial-exercise-support" data-label="dataintro-hint"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0" data-pipe="|&gt;">
<pre class="text"><code># See the head of the data
head(dataset)

# Get the density plot of wages
dataset %&gt;% ggplot(aes(x = wage)) + geom_density() + xlab(&quot;Wage (th USD)&quot;)
  
# Get the number of people who were treated
dataset %&gt;% count(jobhelp)</code></pre>
</div>
<div class="panel-heading tutorial-quiz-title"><span data-i18n="text.quiz">Quiz</span></div>
<div class="panel panel-default tutorial-question-container">
<div data-label="quiz_howmany-1" class="tutorial-question panel-body">
<div id="quiz_howmany-1-answer_container" class="shiny-html-output"></div>
<div id="quiz_howmany-1-message_container" class="shiny-html-output"></div>
<div id="quiz_howmany-1-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
</div>
</div>
<div id="section-growing-a-causal-forest" class="section level2">
<h2>1. Growing a Causal Forest</h2>
<div class="panel-heading tutorial-quiz-title"><span data-i18n="text.quiz">Quiz</span></div>
<div class="panel panel-default tutorial-question-container">
<div data-label="quiz_ct-1" class="tutorial-question panel-body">
<div id="quiz_ct-1-answer_container" class="shiny-html-output"></div>
<div id="quiz_ct-1-message_container" class="shiny-html-output"></div>
<div id="quiz_ct-1-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
<div class="panel-heading tutorial-quiz-title"><span data-i18n="text.quiz">Quiz</span></div>
<div class="panel panel-default tutorial-question-container">
<div data-label="quiz_ct2-1" class="tutorial-question panel-body">
<div id="quiz_ct2-1-answer_container" class="shiny-html-output"></div>
<div id="quiz_ct2-1-message_container" class="shiny-html-output"></div>
<div id="quiz_ct2-1-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
<p>Since the assignment to the job placement program was completely
random, and there was full compliance (mandatory program for
ex-offenders), we can grow a Causal Forest to estimate the treatment
effects.</p>
<p>To grow a Causal Forest we will use the <code>causal_forest()</code>
function from <code>grf</code> package.</p>
<div id="section-exercise-convert-the-dataset-to-a-matrix"
class="section level3">
<h3>Exercise – Convert the dataset to a matrix</h3>
<p>Unfortunately, <code>causal_forest()</code> accepts data only in
matrix or vector form, not a data.frame object. Hence, the first step is
to create the following objects:</p>
<ul>
<li>matrix <code>X</code> of predictors</li>
<li>vector <code>Y</code> which contains wage information</li>
<li>vector <code>W</code> which contains treatment status.</li>
</ul>
<p><strong>Fill in the blanks below, put the correct formula instead of
the question mark. Hint: use <code>model.matrix()</code> function
automatically convert a dataset into a numeric matrix</strong></p>
<div class="tutorial-exercise" data-label="createvars"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0" data-pipe="|&gt;">
<pre class="text"><code>Y &lt;- dataset$____
W &lt;- dataset$____

X &lt;- dataset %&gt;%  select(-____, -____) %&gt;%  
  _____.______( ~ ?, data = .)

# Drop the intercept (No need to change anything here)
X &lt;- X[ , -1]</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<div class="tutorial-exercise-support" data-label="createvars-hint"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0" data-pipe="|&gt;">
<pre class="text"><code>Y &lt;- dataset$wage
W &lt;- dataset$jobhelp

X &lt;- dataset %&gt;%  select(-wage, -jobhelp) %&gt;%  
  model.matrix(~., .) 
X &lt;- X[ , -1]</code></pre>
</div>
</div>
<div id="section-exercise-grow-a-causal-forest" class="section level3">
<h3>Exercise – Grow a Causal Forest</h3>
<p>Now we are ready to grow our first Causal Forest.</p>
<p>Please, grow a causal forest with the following parameters:</p>
<ul>
<li>4000 causal trees.</li>
<li>We set <code>clusters = NULL</code> since our treatment was fully
randomized, and not randomized within clusters</li>
<li>For each individual causal tree use only a random 50% of
observations (i.e., specify so for <code>sample.fraction</code>).</li>
<li>Use all of the variables as potential split candidates by putting
the correct <code>mtry</code> (you can always try with fewer variables
later).</li>
<li>Require the node size to be ten or more observations using
<code>min.node.size</code>.</li>
<li>Keep 50% of the sampled data as estimation sample, and 50% as
training sample using <code>honesty.fraction</code>. (Notice that it
means that for any given tree we use 25% of initial data either to train
or to estimate since we sample only half of data to begin with)</li>
<li>We set <code>honesty.prune.leaves = TRUE</code> in order to trim
leaves that end up empty in the estimation sample</li>
<li>We set <code>tune.parameters = "none"</code>, since we are skipping
cross-validation part for the sake of time. Otherwise, “the following
parameters are tunable: (”sample.fraction”, “mtry”, “min.node.size”,
“honesty.fraction”, “honesty.prune.leaves”, “alpha”,
“imbalance.penalty”)“.</li>
<li>Set <code>compute.oob.predictions=TRUE</code> to save the out-of-bag
predictions that can be useful later.</li>
</ul>
<p>Save the resulting forest as <code>cforest</code>.</p>
<p><strong>Fill in the gaps in the formula below</strong></p>
<div class="tutorial-exercise" data-label="cf" data-completion="1"
data-diagnostics="1" data-startover="1" data-lines="0"
data-pipe="|&gt;">
<pre class="text"><code>set.seed(234)
cforest &lt;- causal_forest(
  X = _,
  Y = _,
  W = _,
  num.trees = ____,
  clusters = NULL,
  sample.fraction = __,
  mtry = ____,
  min.node.size = __,
  honesty = TRUE,
  honesty.fraction = __,
  honesty.prune.leaves = TRUE,
  tune.parameters = &quot;none&quot;
)
cforest</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<div class="tutorial-exercise-support" data-label="cf-hint"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0" data-pipe="|&gt;">
<pre class="text"><code>set.seed(234)
cforest &lt;- causal_forest(
  X,
  Y,
  W,
  num.trees = 4000,
  clusters = NULL,
  sample.fraction = 0.5,
  mtry =  ncol(X),
  min.node.size = 10,
  honesty = TRUE,
  honesty.fraction = 0.5,
  honesty.prune.leaves = TRUE,
  tune.parameters = &quot;none&quot;,
  compute.oob.predictions = TRUE
)
cforest</code></pre>
</div>
</div>
</div>
<div id="section-variable-importance" class="section level2">
<h2>2. Variable importance</h2>
<div id="section-exercise-get-a-plot-of-a-single-tree"
class="section level3">
<h3>Exercise – Get a plot of a single tree</h3>
<p>We have successfully trained a Causal Forest and saved it as
<code>cforest</code>.</p>
<p>We know that one of the downsides of forests is that we can no longer
represent the segmentation graphically as a tree, because a forest
combines information from many trees.</p>
<p>Nevertheless, we can still access one of the 4000 causal trees we
grew as part of the forest and visualize it.</p>
<p>For example, the code below uses <code>get_tree()</code> function to
access the very first causal tree (out of 4000) and plots it. The
resulting plot tells you about the splitting rules, the number of
observations in each resulting leaf using estimation sample, and the
mean outcome “avg_Y” (unfortunately, not the mean treatment effect) and
the share of treated “avg_W”.</p>
<p><em>Change the code below to access the 42nd causal tree</em></p>
<div class="tutorial-exercise" data-label="plotonetree"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0" data-pipe="|&gt;">
<pre class="text"><code>plot(get_tree(cforest, index=1))</code></pre>
<div class="grViz html-widget html-fill-item" id="htmlwidget-8c1219b27049942d93ec" style="width:624px;height:384px;"></div>
<script type="application/json" data-for="htmlwidget-8c1219b27049942d93ec">{"x":{"diagram":"digraph nodes { \n node [shape=box] ;\n0 [label=\" Age_Below_TwentyFiveyes <= 0 \"] ;\n0 -> 1 [labeldistance=2.5, labelangle=45, headlabel=\"True\", arrowhead=normal];\n0 -> 2 [labeldistance=2.5, labelangle=-45, headlabel=\"False\", arrowhead=normal];\n1 [label=\" Number_of_Priors <= 0.84 \"] ;\n1 -> 3 [ arrowhead=normal];\n1 -> 4 [ arrowhead=normal];\n3 [label=\" Number_of_Priors <= 0.21 \"] ;\n3 -> 5 [ arrowhead=normal];\n3 -> 6 [ arrowhead=normal];\n5 [label=\" ethnicityCaucasian <= 0 \"] ;\n5 -> 7 [ arrowhead=normal];\n5 -> 8 [ arrowhead=normal];\n7  [shape=box,style=filled,color=\".7 .3 1.0\" , label=\"size =  50 \n avg_Y = 0.95\navg_W = 0.48 \"];\n8 [label=\" Misdemeanoryes <= 0 \"] ;\n8 -> 11 [ arrowhead=normal];\n8 -> 12 [ arrowhead=normal];\n11  [shape=box,style=filled,color=\".7 .3 1.0\" , label=\"size =  20 \n avg_Y = 1.02\navg_W = 0.35 \"];\n12  [shape=box,style=filled,color=\".7 .3 1.0\" , label=\"size =  17 \n avg_Y = 1\navg_W = 0.35 \"];\n6 [label=\" ethnicityCaucasian <= 0 \"] ;\n6 -> 9 [ arrowhead=normal];\n6 -> 10 [ arrowhead=normal];\n9  [shape=box,style=filled,color=\".7 .3 1.0\" , label=\"size =  28 \n avg_Y = 0.87\navg_W = 0.46 \"];\n10  [shape=box,style=filled,color=\".7 .3 1.0\" , label=\"size =  20 \n avg_Y = 0.91\navg_W = 0.55 \"];\n4  [shape=box,style=filled,color=\".7 .3 1.0\" , label=\"size =  62 \n avg_Y = 0.99\navg_W = 0.58 \"];\n2  [shape=box,style=filled,color=\".7 .3 1.0\" , label=\"size =  53 \n avg_Y = 0.84\navg_W = 0.55 \"];\n}","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<div class="tutorial-exercise-support" data-label="plotonetree-hint"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0" data-pipe="|&gt;">
<pre class="text"><code>plot(get_tree(cforest, index=42))</code></pre>
</div>
<p>Remember that the very first split of a decision tree usually
indicates the most important predictor for Y. In the end, the very first
split finds the variable that helps the most in minimizing RSS.
Similarly, a causal tree first splits at a variable that helps the most
to capture differences in treatment effects.</p>
<div class="panel-heading tutorial-quiz-title"><span data-i18n="text.quiz">Quiz</span></div>
<div class="panel panel-default tutorial-question-container">
<div data-label="quiz_t1-1" class="tutorial-question panel-body">
<div id="quiz_t1-1-answer_container" class="shiny-html-output"></div>
<div id="quiz_t1-1-message_container" class="shiny-html-output"></div>
<div id="quiz_t1-1-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
<div class="panel-heading tutorial-quiz-title"><span data-i18n="text.quiz">Quiz</span></div>
<div class="panel panel-default tutorial-question-container">
<div data-label="quiz_t1234-1" class="tutorial-question panel-body">
<div id="quiz_t1234-1-answer_container" class="shiny-html-output"></div>
<div id="quiz_t1234-1-message_container" class="shiny-html-output"></div>
<div id="quiz_t1234-1-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
<p>As you can see the split rules changed quite a lot if we compare the
very first tree to the 42ns tree. This instability is remedied exactly
by bootstrapping our sample 4000 times.</p>
<p>A better way to see the importance of the variable is by checking how
often any given variable was used for splitting overall across all 4000
trees.</p>
</div>
<div
id="section-exercise-find-which-variables-are-the-most-important-ones-for-predicting-heterogeneity-of-treatment-effects"
class="section level3">
<h3>Exercise – Find which variables are the most important ones for
predicting heterogeneity of treatment effects</h3>
<p>We can use function <code>variable_importance()</code> to get a
simple weighted sum of how many times variable <span
class="math inline">\(i\)</span> was split on at each depth in the
forest. Hence, the most important variable for the heterogeneity in
treatment effects will have the highest share of splits.</p>
<div class="tutorial-exercise" data-label="importance"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0" data-pipe="|&gt;">
<pre class="text"><code>variable_importance(_____)</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<div class="tutorial-exercise-support" data-label="importance-hint"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0" data-pipe="|&gt;">
<pre class="text"><code>variable_importance(cforest)</code></pre>
</div>
<div class="panel-heading tutorial-quiz-title"><span data-i18n="text.quiz">Quiz</span></div>
<div class="panel panel-default tutorial-question-container">
<div data-label="quiz_imp-1" class="tutorial-question panel-body">
<div id="quiz_imp-1-answer_container" class="shiny-html-output"></div>
<div id="quiz_imp-1-message_container" class="shiny-html-output"></div>
<div id="quiz_imp-1-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
</div>
</div>
<div id="section-estimating-treatment-effects" class="section level2">
<h2>3. Estimating Treatment Effects</h2>
<p>Finally, let’s calculate some treatment effects.</p>
<p>Function <code>average_treatment_effect()</code> does exactly what we
want.</p>
<div id="section-exercise-calculate-ate-and-att" class="section level3">
<h3>Exercise – Calculate ATE and ATT</h3>
<p>For example, in the exercise code below you can already see the
example of how to calculate ATE. Since we are interested in ATE, we
indicate that the target sample is “all”.</p>
<p><em>Change the target sample to “treated” to get the ATT</em></p>
<div class="tutorial-exercise" data-label="ate" data-completion="1"
data-diagnostics="1" data-startover="1" data-lines="0"
data-pipe="|&gt;">
<pre class="text"><code>set.seed(456)
average_treatment_effect(cforest, target.sample = &quot;all&quot;)</code></pre>
<pre><code>   estimate     std.err 
0.070418823 0.007675722 </code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<div class="tutorial-exercise-support" data-label="ate-hint"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0" data-pipe="|&gt;">
<pre class="text"><code>set.seed(456)
average_treatment_effect(cforest, target.sample = &quot;treated&quot;)</code></pre>
</div>
<div class="panel-heading tutorial-quiz-title"><span data-i18n="text.quiz">Quiz</span></div>
<div class="panel panel-default tutorial-question-container">
<div data-label="quiz_ate-1" class="tutorial-question panel-body">
<div id="quiz_ate-1-answer_container" class="shiny-html-output"></div>
<div id="quiz_ate-1-message_container" class="shiny-html-output"></div>
<div id="quiz_ate-1-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
<div class="panel-heading tutorial-quiz-title"><span data-i18n="text.quiz">Quiz</span></div>
<div class="panel panel-default tutorial-question-container">
<div data-label="quiz_ateatt-1" class="tutorial-question panel-body">
<div id="quiz_ateatt-1-answer_container" class="shiny-html-output"></div>
<div id="quiz_ateatt-1-message_container" class="shiny-html-output"></div>
<div id="quiz_ateatt-1-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
</div>
<div id="section-run-an-ols-instead" class="section level3">
<h3>Run an OLS instead</h3>
<p>Well, this is all fancy to calculate the ATE using causal forest. But
we also know that the OLS should do a good job, especially since there
are no confounders because the assignment to treatment was administered
completely at random.</p>
<strong>Run an OLS in the code chunk below</strong>. Does the estimate
of the ATE using OLS coincide with the earlier estimate by the causal
forest?
<div class="tutorial-exercise" data-label="ols" data-completion="1"
data-diagnostics="1" data-startover="1" data-lines="0"
data-pipe="|&gt;">
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<div class="tutorial-exercise-support" data-label="ols-hint"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0" data-pipe="|&gt;">
<pre class="text"><code>lm(wage ~ ., data= dataset)</code></pre>
</div>
<div class="panel-heading tutorial-quiz-title"><span data-i18n="text.quiz">Quiz</span></div>
<div class="panel panel-default tutorial-question-container">
<div data-label="quiz_ols-1" class="tutorial-question panel-body">
<div id="quiz_ols-1-answer_container" class="shiny-html-output"></div>
<div id="quiz_ols-1-message_container" class="shiny-html-output"></div>
<div id="quiz_ols-1-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
</div>
<div
id="section-exercise-test-whether-there-is-heterogeneity-of-treatment-effects"
class="section level3">
<h3>Exercise – Test whether there is heterogeneity of treatment
effects</h3>
<p>To test how well the causal forest we trained performs relative to a
model with no splits (just a constant treatment effect model), we will
use <code>test_calibration()</code> function, which runs for us the
test, developed by <a
href="https://www.nber.org/papers/w24678">Chernozhukov, Demirer, Duflo,
and Fernandez-Val (2017)</a>. The test fits a linear model of the target
estimand as a function of average treatment effect of the program on
wages – the mean GRF prediction – and the differential treatment effect
of the program on wages as predicted by the GRF out-of-sample. If the
GRF captures no additional variation in treatment effects, then the
coefficient in front of the differential prediction will be zero.</p>
<strong>Finish the code below to run the calibration test</strong>
<div class="tutorial-exercise" data-label="calibration"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0" data-pipe="|&gt;">
<pre class="text"><code>test_calibration(_______)</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<div class="tutorial-exercise-support" data-label="calibration-hint"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0" data-pipe="|&gt;">
<pre class="text"><code>test_calibration(cforest)</code></pre>
</div>
<div class="panel-heading tutorial-quiz-title"><span data-i18n="text.quiz">Quiz</span></div>
<div class="panel panel-default tutorial-question-container">
<div data-label="quiz_calibration1-1" class="tutorial-question panel-body">
<div id="quiz_calibration1-1-answer_container" class="shiny-html-output"></div>
<div id="quiz_calibration1-1-message_container" class="shiny-html-output"></div>
<div id="quiz_calibration1-1-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
</div>
<div id="section-quiz-results-explanation" class="section level3">
<h3>Quiz results: Explanation</h3>
<p>Since the estimated coefficient in front of the
<code>differential.forest.prediction</code> term is significantly
greater than zero (p-value is much lower than 5%), we can reject the
null hypothesis of no heterogeneity in treatment effects. In other
words, the causal forest splits the covariate space in such a way that
the treatment effect in one group is indeed different from the treatment
effect in another group. From the description of the test, <em>“A
coefficient of 1 for ‘mean.forest.prediction’ suggests that the mean
forest prediction is correct, whereas a coefficient of 1 for
‘differential.forest.prediction’ additionally suggests that the forest
has captured heterogeneity in the underlying signal.”</em></p>
<p>We have both, a coefficient of 1 for the
<code>mean.forest.prediction</code> and a coefficient of 1 for the
<code>differential.forest.prediction</code>. Hence, not only our causal
forest captures heterogeneity in TE, but it also has the mean prediction
that is correct. Good sign!</p>
</div>
<div
id="section-exercise-calculate-ate-for-black-and-white-ex-offenders-separately"
class="section level3">
<h3>Exercise – Calculate ATE for black and white ex-offenders
separately</h3>
<p>We can also investigate how the ATE changes within different
subgroups of ex-offenders.</p>
<p>For example, the code below calculate the Conditional ATE for
Caucasian ex-offenders.</p>
<p><em>Change the code below to calculate ATE for black ex-offenders.
Hint: you just need to change one character; remember that we have just
two ethnicity groups in the sample: Caucasians and
African-Americans</em></p>
<div class="tutorial-exercise" data-label="cate_ethnicity"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0" data-pipe="|&gt;">
<pre class="text"><code>average_treatment_effect(cforest, target.sample = &quot;all&quot;, subset = X[ , &quot;ethnicityCaucasian&quot;] == 1)</code></pre>
<pre><code>  estimate    std.err 
0.05586624 0.01097069 </code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<div class="tutorial-exercise-support" data-label="cate_ethnicity-hint"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0" data-pipe="|&gt;">
<pre class="text"><code>average_treatment_effect(cforest, target.sample = &quot;all&quot;, subset = X[ , &quot;ethnicityCaucasian&quot;] == 0)</code></pre>
</div>
<div class="panel-heading tutorial-quiz-title"><span data-i18n="text.quiz">Quiz</span></div>
<div class="panel panel-default tutorial-question-container">
<div data-label="quiz_ethnate-1" class="tutorial-question panel-body">
<div id="quiz_ethnate-1-answer_container" class="shiny-html-output"></div>
<div id="quiz_ethnate-1-message_container" class="shiny-html-output"></div>
<div id="quiz_ethnate-1-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
</div>
<div id="section-exploring-heterogeneity-in-treatment-effects"
class="section level3">
<h3>Exploring heterogeneity in treatment effects</h3>
<p>Remember that the <code>variable_importance()</code> function in the
previous section indicated that by far <code>Number_of_Priors</code> was
the most important factor explaining the heterogeneity in treatment
effects.</p>
<p>Hence, now we want to explore how treatment effects differ at
different values of <code>Number_of_Priors</code>. How can we do
that?</p>
<p>We can create a new matrix X, where we fix all other variables but we
vary only the values of <code>Number_of_Priors</code>.</p>
<p>For example, we can create a matrix, <code>X_test</code>, with all
variables set to zero. First, recognize that
<code>Number_of_Priors</code> is in fact a discrete variable. In the
code below we first capture all the unique values
<code>Number_of_Priors</code> has in our dataset and save it as
<code>npriors_val</code>. Then we create the matrix with all variables
set to zero, except the first variable which corresponds to
<code>Number_of_Priors</code>. Here, we substitute it with the grid of
values saved in <code>npriors_val</code>. Finally, the code shows you
the head of the matrix.</p>
<div class="tutorial-exercise" data-label="createXtest"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0" data-pipe="|&gt;">
<pre class="text"><code>npriors_val &lt;- unique(dataset$Number_of_Priors) %&gt;% sort()
Xtest &lt;- matrix(0, length(npriors_val), ncol(X))
Xtest[,1] &lt;- npriors_val
head(Xtest)</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
</div>
<div
id="section-exercise-predict-treatment-effects-for-the-artificial-test-data"
class="section level3">
<h3>Exercise – Predict treatment effects for the artificial test
data</h3>
<p>Now, since we have constructed our <code>Xtest</code> data where we
control for all other predictors but vary the number of priors, we can
create personalized estimates of the treatment effects. We use function
<code>predict()</code> to get the TE predictions for the hypothetical
new observations – each row of the <code>Xtest</code> – using the model
saved as <code>cforest</code>. Notice that we also ask to estimate the
variance of the TE estimator. Save the prediction as
<code>cf_predict</code> dataset.</p>
<p><em>Finish the code below, substitute blanks</em></p>
<div class="tutorial-exercise" data-label="predict" data-completion="1"
data-diagnostics="1" data-startover="1" data-lines="0"
data-pipe="|&gt;">
<pre class="text"><code>set.seed(3456)
cf_predict &lt;- predict(object = _______, 
                      newdata = ____, 
                      estimate.variance = TRUE) %&gt;%
  mutate(Number_of_Priors = Xtest[ ,1])

head(cf_predict)</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<div class="tutorial-exercise-support" data-label="predict-hint"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0" data-pipe="|&gt;">
<pre class="text"><code>set.seed(3456)
cf_predict &lt;- predict(object = cforest, 
                      newdata = Xtest, 
                      estimate.variance = TRUE) %&gt;%
  mutate(Number_of_Priors = Xtest[ ,1])

head(cf_predict)</code></pre>
</div>
<p>As you can see it creates a dataframe with two variables:</p>
<ol style="list-style-type: decimal">
<li>predictions – stores the estimated Treatment Effect at given values
of X</li>
<li>variance.estimates – stores the variance of the TE estimator at
given values of X</li>
</ol>
</div>
<div id="section-exercise-visualize-the-heterogeneity"
class="section level3">
<h3>Exercise – Visualize the heterogeneity</h3>
<p>Finally, visualize the estimated heterogeneity in treatment effects
due to <code>Number_of_priors</code>. You want a graph which shows how
the estimated Treatment Effects (y-axis) vary depending on the number of
priors (x-axis). We also want 95% confidence interval. Remember, that we
can get the 95% confidence interval by adding or subtracting 1.96*SE of
the estimator.</p>
<p><em>Fill in the blanks in the code below</em></p>
<div class="tutorial-exercise" data-label="predictgraph"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0" data-pipe="|&gt;">
<pre class="text"><code>ggplot(aes(x = ________, y = ______), data = ______) +
  geom_errorbar(aes(ymin=predictions - 1.96*sqrt(________),
                    ymax=predictions + 1.96*sqrt(________)), colour = &quot;black&quot;, width=.1) +
    geom_line() +
    geom_point(size=3)</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<div class="tutorial-exercise-support" data-label="predictgraph-hint"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0" data-pipe="|&gt;">
<pre class="text"><code>ggplot(aes(x = Number_of_Priors, y = predictions), data = cf_predict) +
  geom_errorbar(aes(ymin=predictions - 1.96*sqrt(variance.estimates),
                    ymax=predictions + 1.96*sqrt(variance.estimates)), colour = &quot;black&quot;, width=.1) +
    geom_line() +
    geom_point(size=3)</code></pre>
</div>
<div class="panel-heading tutorial-quiz-title"><span data-i18n="text.quiz">Quiz</span></div>
<div class="panel panel-default tutorial-question-container">
<div data-label="quiz_graph-1" class="tutorial-question panel-body">
<div id="quiz_graph-1-answer_container" class="shiny-html-output"></div>
<div id="quiz_graph-1-message_container" class="shiny-html-output"></div>
<div id="quiz_graph-1-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
<div class="panel-heading tutorial-quiz-title"><span data-i18n="text.quiz">Quiz</span></div>
<div class="panel panel-default tutorial-question-container">
<div data-label="quiz_graph2-1" class="tutorial-question panel-body">
<div id="quiz_graph2-1-answer_container" class="shiny-html-output"></div>
<div id="quiz_graph2-1-message_container" class="shiny-html-output"></div>
<div id="quiz_graph2-1-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
<p>To see whether indeed we have too few observations in the right tail
of the distribution of <code>Number_of_Priors</code>, we can plot the
distribution:</p>
<div class="tutorial-exercise" data-label="distr_priors"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0" data-pipe="|&gt;">
<pre class="text"><code>dataset %&gt;% ggplot(aes(x = Number_of_Priors)) + geom_density()</code></pre>
<img src="tutorial_grf_files/figure-html/distr_priors-1.png" width="624" />
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<p>Indeed, the graph shows that we have too few observations for the
values greater than 1.5. So we actually cannot know for sure whether the
flattening is caused by true change in the relationship between
treatment effects and the number of priors, or due to insufficient data
in that region.</p>
</div>
<div id="section-little-secret" class="section level3">
<h3>Little secret</h3>
<p>Wait, actually we can. Well, not in reality, not when you work with
real data. But this time, I simulated the data, I know the true
treatment effects.</p>
<p>The true formula for treatment effects was
<code>te = 0.1*Number_of_Priors</code>. Hence, let’s plot everything
again with the true values.</p>
<pre class="r"><code>cf_predict_withtruth &lt;- cf_predict %&gt;%  
  mutate(true_effect = 0.1*Xtest[ ,1])

ggplot(aes(x = Number_of_Priors, y = predictions), data = cf_predict) +
  geom_errorbar(aes(ymin=predictions - 1.96*sqrt(variance.estimates),
                    ymax=predictions + 1.96*sqrt(variance.estimates)), colour = &quot;black&quot;, width=.1) +
    geom_line() +
    geom_point(size = 3) +
    geom_line(aes(x = Number_of_Priors, y = true_effect ), data = cf_predict_withtruth, color = &quot;red&quot;)</code></pre>
<p><img src="tutorial_grf_files/figure-html/plotagain-1.png" width="624" /></p>
</div>
<div id="section-so-what-happened" class="section level3">
<h3>So what happened?</h3>
<p>Now you can clearly see that the Causal Forest did not have enough
data to split on <code>Number_of_Priors</code> for values beyond 1.5. So
it lumped together those values and estimated the average treatment
effect for a group of offenders with number of priors greater than
1.5-2.0.</p>
<p>However, this is how Causal Forest works for extreme values. In fact,
it did a pretty good job for more frequent groups of offenders with the
number of priors in the range of 0 to 1.5.</p>
<p>Now, since you know that I created the heterogeneous treatment
effects using only <code>Number_of_Priors</code> as a mediator, take a
second to appreciate that the Causal Forest indeed did find that
<code>Number_of_Priors</code> is the most (and by far only) important
factor capturing the heterogeneity in treatment effects.</p>
<p>You did not have to write a single line of sophisticated formula in a
regression to uncover. All you had to do is to pass X, Y, and W objects
to <code>causal_forest()</code> function. That’s what makes this tool
amazing. Now the search for heterogeneity in treatment effects is truly
data-driven.</p>
</div>
</div>
<div id="section-afterword" class="section level2">
<h2>Afterword</h2>
<p>Now, creating an artificial Xtest matrix and varying only one
variable at a time may help you uncover the extent of heterogeneity
across different dimensions at an analytical level.</p>
<p>However, you still need to deliver guidance to the government,
right?</p>
<p>You can use the results of the causal forest that creates prediction
of the TE for every new ex-offender, compares the expected TE to the
marginal cost of the job assistance program, and then it delivers
personalized recommendations of treatment eligibility (yes/no) for that
particular ex-offender.</p>
<p>Alternatively, you can try to grow just one causal tree and use the
segmentation delivered by that tree to tell policymakers which groups
are eligible and which are not. However, as we saw that using just one
tree might be a bad idea since individual trees might be unstable
(non-robust). In this case, you need to use cross-validation for every
single free parameter in order to prune the tree in a correct manner. In
general, you can then see how worse your single Causal Tree performs
with respect to the Causal Forest. If the performance is comparable,
then you may use a single Causal Tree to inform policymakers, as this
approach is much more transparent.</p>
<p>In either case, be prepared to be attacked on the fairness grounds.
You would need to check in advance that your policy prescriptions would
be seen as fair. Also, you need to defend:</p>
<ul>
<li>why do you use wage as the only outcome to judge the effect of the
program? Are there other important outcomes that we need to capture the
welfare effect of the program?</li>
<li>Have you used enough observations?</li>
<li>etc.</li>
</ul>
</div>
<div id="section-what-if-treatment-is-not-random"
class="section level2">
<h2>What if treatment is not random?</h2>
<p>What if the uptake of the job training program was not so random?
What if there were non-compliers: some ex-offenders decided to be in the
program even if they were not initially assigned to the treatment group,
while some of the ex-offenders opted out of the program even if they
were assigned to the treatment group.</p>
<p>We know that this may complicate our estimation problem. However, you
strongly believe that the reasons for non-compliance are mostly
explained by the characteristics you have in the data, in particular, by
the ethnicity of the ex-offenders.</p>
<p>I created a separate dataset called <code>dataset2</code> which
contains the same kind of data as in <code>dataset</code>, but where
<code>jobhelp</code> variable is no longer assigned at random.</p>
<p>To check whether treatment <code>jobhelp</code> correlates with any
of the other variables in the dataset, we can simply run a linear model
regressing <code>jobhelp</code> on other variables (except wage) and
looking at the F-statistics for joint significance of all
regressors.</p>
<div class="tutorial-exercise" data-label="correlates"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0" data-pipe="|&gt;">
<pre class="text"><code>lm(jobhelp ~ .-wage, data =dataset2) %&gt;%  summary()</code></pre>
<pre><code>
Call:
lm(formula = jobhelp ~ . - wage, data = dataset2)

Residuals:
    Min      1Q  Median      3Q     Max 
-0.7933 -0.5113  0.2876  0.4320  0.6466 

Coefficients:
                        Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)              0.53099    0.03262  16.276  &lt; 2e-16 ***
Number_of_Priors        -0.03116    0.01663  -1.874   0.0612 .  
Age_Above_FourtyFiveyes -0.03312    0.03886  -0.852   0.3943    
Age_Below_TwentyFiveyes  0.01599    0.04101   0.390   0.6966    
FemaleFemale             0.08235    0.03872   2.127   0.0337 *  
Misdemeanoryes          -0.02566    0.03289  -0.780   0.4355    
ethnicityCaucasian       0.17999    0.03269   5.507 4.66e-08 ***
---
Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1

Residual standard error: 0.482 on 993 degrees of freedom
Multiple R-squared:  0.04778,   Adjusted R-squared:  0.04203 
F-statistic: 8.304 on 6 and 993 DF,  p-value: 8.505e-09</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<p>Indeed, these six regressors are jointly significant in explaining
assignment to treatment <code>jobhelp</code>, since p-value of the
F-test is much below the 5% threshold.</p>
<p>Remember that we have already established that the true average
treatment effect of the program is 71 USD (<span
class="math inline">\(\pm\)</span> 7 USD standard error). This remains
the true average treatment effect even if we there is a change in the
assignment to treatment. However, would we be able to get the correct
estimate of the ATE by using a simple OLS?</p>
<pre class="r"><code>lm(wage ~ jobhelp + ., data = dataset2) %&gt;%  tidy()</code></pre>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["term"],"name":[1],"type":["chr"],"align":["left"]},{"label":["estimate"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["std.error"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["statistic"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["p.value"],"name":[5],"type":["dbl"],"align":["right"]}],"data":[{"1":"(Intercept)","2":"0.8651767157","3":"0.009898951","4":"87.40085072","5":"0.000000e+00"},{"1":"jobhelp","2":"0.0932313989","3":"0.008554974","4":"10.89791754","5":"3.363004e-26"},{"1":"Number_of_Priors","2":"0.0152010961","3":"0.004489994","4":"3.38554936","5":"7.382085e-04"},{"1":"Age_Above_FourtyFiveyes","2":"-0.0823450960","3":"0.010479506","4":"-7.85772700","5":"1.014114e-14"},{"1":"Age_Below_TwentyFiveyes","2":"-0.0804287887","3":"0.011055157","4":"-7.27522789","5":"7.017685e-13"},{"1":"FemaleFemale","2":"-0.0006738295","3":"0.010462058","4":"-0.06440697","5":"9.486592e-01"},{"1":"Misdemeanoryes","2":"0.0167236102","3":"0.008869436","4":"1.88553248","5":"5.965000e-02"},{"1":"ethnicityCaucasian","2":"0.0660159640","3":"0.008945014","4":"7.38019671","5":"3.338928e-13"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Apparently, no. The estimate of the ATE using the OLS regression is
at 93 USD (<span class="math inline">\(\pm\)</span> 9 USD standard
error).</p>
<p>Now what happens if we run a causal forest?</p>
<p><strong>Fill in blanks below.</strong> Run a causal forest but now
tune all tunable parameters (i.e., <code>tune="all"</code>).</p>
<div class="tutorial-exercise" data-label="notrandom-grf"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0" data-pipe="|&gt;">
<pre class="text"><code>X2 &lt;- dataset2 %&gt;% 

X2 &lt;- X2[ , -1] # remove the intercept

set.seed(234)
cforest2 &lt;- causal_forest(
  X = X2,
  Y = ____________,
  W = ____________,
  num.trees = ____,
  clusters = ____,
  sample.fraction = __,
  honesty = _____,
  tune.parameters = 
)
cforest2

average_treatment_effect(cforest2, target.sample = &quot;all&quot;)</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<div class="tutorial-exercise-support" data-label="notrandom-grf-hint"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0" data-pipe="|&gt;">
<pre class="text"><code>X2 &lt;- dataset2 %&gt;%  select(-wage, -jobhelp) %&gt;%  model.matrix( ~., data =.)

X2 &lt;- X2[ , -1]

set.seed(234)
cforest2 &lt;- causal_forest(
  X = X2,
  Y = dataset2$wage,
  W = dataset2$jobhelp,
  num.trees = 4000,
  clusters = NULL,
  sample.fraction = 0.5,
  honesty = TRUE,
  tune.parameters = &quot;all&quot;
)
cforest2

average_treatment_effect(cforest2, target.sample = &quot;all&quot;)</code></pre>
</div>
<div class="panel-heading tutorial-quiz-title"><span data-i18n="text.quiz">Quiz</span></div>
<div class="panel panel-default tutorial-question-container">
<div data-label="quiz_grf_vs_ols-1" class="tutorial-question panel-body">
<div id="quiz_grf_vs_ols-1-answer_container" class="shiny-html-output"></div>
<div id="quiz_grf_vs_ols-1-message_container" class="shiny-html-output"></div>
<div id="quiz_grf_vs_ols-1-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div>
<div id="section-why-is-grf-performing-better-than-the-ols"
class="section level3">
<h3>Why is GRF performing better than the OLS?</h3>
<p>We learned last week how Double Machine Learning can help us with
partialling out the effects of confounders. In fact,
<code>causal_forest()</code> implements DML under the hood: it always
fits two regression forests, for <code>Y</code> and <code>W</code>, and
uses the out-of-bag prediction errors to fit the causal forest.</p>
<p>Let’s do these prediction steps by hand to see how you can actually
supply the predictions in the <code>causal_forest()</code> formula.
Knowing this allows you to use other prediction models (e.g., lasso), if
you want, instead of the regression trees.</p>
<p><strong>Fill in the blanks in the code below.</strong> We will use a
<code>regression_forest()</code> function that comes from the
<code>grf</code> package. Please, tune all tunable parameters.</p>
<div class="tutorial-exercise" data-label="grf-manual-prediction"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0" data-pipe="|&gt;">
<pre class="text"><code>set.seed(456)
# Fit a regression model to predict treatment variable &#39;jobhelp&#39;
forest.W &lt;- regression_forest(X = __, Y = _____________, tune.parameters = &quot;___&quot;)
# Get out-of-bag predictions for &#39;jobhelp&#39;
W_hat &lt;- predict(_________)$predictions

# Fit a regression model to predict outcome variable &#39;wage&#39;
forest.Y &lt;- regression_forest(X = __, Y = _____________, tune.parameters = &quot;___&quot;)
# Get out-of-bag predictions for &#39;wage&#39;
Y_hat &lt;- 

# Fit a causal forest, but supply the predictions for Y and W which you have found earlier: Y.hat and W.hat
cforest3 &lt;- causal_forest(
  X = __,
  Y = _______________,
  W = _______________,
  Y.hat = ___,
  W.hat = ___,
  num.trees = 4000,
  clusters = NULL,
  sample.fraction = 0.5,
  honesty = TRUE,
  tune.parameters = &quot;___&quot;
)

# Estimate the average treatment effect
average_treatment_effect(___________, target.sample = &quot;___&quot;)</code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<div class="tutorial-exercise-support"
data-label="grf-manual-prediction-hint" data-completion="1"
data-diagnostics="1" data-startover="1" data-lines="0"
data-pipe="|&gt;">
<pre class="text"><code>set.seed(456)
# Fit a regression model to predict treatment variable &#39;jobhelp&#39;
forest.W &lt;- regression_forest(X = X2, Y = dataset2$jobhelp, tune.parameters = &quot;all&quot;)
# Get out-of-bag predictions for &#39;jobhelp&#39;
W_hat &lt;- predict(forest.W)$predictions

# Fit a regression model to predict outcome variable &#39;wage&#39;
forest.Y &lt;- regression_forest(X = X2, Y = dataset2$wage, tune.parameters = &quot;all&quot;)
# Get out-of-bag predictions for &#39;wage&#39;
Y_hat &lt;- predict(forest.Y)$predictions

# Fit a causal forest, but supply the predictions for Y and W which you have found earlier: Y.hat and W.hat
cforest3 &lt;- causal_forest(
  X = X2,
  Y = dataset2$wage,
  W = dataset2$jobhelp,
  Y.hat = Y_hat,
  W.hat = W_hat,
  num.trees = 4000,
  clusters = NULL,
  sample.fraction = 0.5,
  honesty = TRUE,
  tune.parameters = &quot;all&quot;
)

# Estimate the average treatment effect
average_treatment_effect(cforest3, target.sample = &quot;all&quot;)</code></pre>
</div>
<p>If you have time, try to use Lasso as a prediction model for Y or W
or both. Do not forget to include interaction terms.</p>
</div>
<div id="section-self-selection-based-on-unobservables"
class="section level3">
<h3>Self-selection based on unobservables</h3>
<p>Now suppose that the participation in the program was actually driven
a lot by the employment status of the participants which they had before
committing the offense. For example, those who had a stable job before
the arrest were more likely to participate in the program. But these
people were also more likely to earn higher salaries anyways.
Unfortunately, the dataset does not record the pre-arrest employment
status. In this case, you are facing positive selection based on
unobservable characteristics.</p>
<p>Do you think the GRF procedure would perform well in this
circumstance?</p>
<p>Let’s again simulate a new assignment to treatment but this time it
also should depend on unobservable characteristics.</p>
<p>The code below shows the GRF’s estimate of the ATE in such
situation.</p>
<div class="tutorial-exercise" data-label="grf-unobservable"
data-completion="1" data-diagnostics="1" data-startover="1"
data-lines="0" data-pipe="|&gt;">
<pre class="text"><code>set.seed(456)
X3 &lt;- dataset3 %&gt;%  select(-wage, -jobhelp) %&gt;%  model.matrix( ~., data =.)
X3 &lt;- X3[ , -1]


# Fit a causal forest, but supply the predictions for Y and W which you have found earlier: Y.hat and W.hat
cforest_nonobservable &lt;- causal_forest(
  X = X3,
  Y = dataset3$wage,
  W = dataset3$jobhelp,
  num.trees = 4000,
  tune.parameters = &quot;all&quot;
)

# Estimate the average treatment effect
average_treatment_effect(cforest_nonobservable, target.sample = &quot;all&quot;)</code></pre>
<pre><code>   estimate     std.err 
0.114697771 0.008650737 </code></pre>
<script type="application/json" data-ui-opts="1">{"engine":"r","has_checker":false,"caption":"<span data-i18n=\"text.enginecap\" data-i18n-opts=\"{&quot;engine&quot;:&quot;R&quot;}\">R Code<\/span>"}</script>
</div>
<p>As you can see, the estimate of the ATE in this case significantly
overestimates the true ATE of the program.</p>
<p>
<script type="application/shiny-prerendered" data-context="server-start">
library(learnr)
library(DiagrammeR)
library(grf)
library(tidyverse)
library(broom)



# getting COMPAS data

set.seed(111)
dataset <- fairness::compas %>% 
  filter(ethnicity == c("Caucasian", "African_American")) %>%
  mutate(ethnicity = as.factor(as.character(ethnicity))) %>%
  mutate(Number_of_Priors = Number_of_Priors - min(Number_of_Priors)) %>% 
  select(-probability,-predicted, -Two_yr_Recidivism) %>%
  sample_n(1000)

# Simulating data
set.seed(112)
dataset <- dataset %>% mutate(
  jobhelp = sample(c(0,1), 1000, replace = TRUE, prob = c(0.5, 0.5)),
  )

 

datamat <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% 
  select(-`(Intercept)`) %>% 
  mutate(
    has_priors = if_else(Number_of_Priors > 0, 1, 0),
    wage_nohelp = (-0.15)*has_priors + 
            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +
            0.1*ethnicityCaucasian + 
            (-0.05)*has_priors*ethnicityCaucasian +
            rlnorm(1000, meanlog = 0, sdlog = 0.1),
    help_effect = 0.1*Number_of_Priors,
    wage = wage_nohelp + help_effect*jobhelp
    )

# ggplot(aes(x = wage, color = as.factor(jobhelp)), data = datamat) + geom_density()
# ggplot(aes(x = Number_of_Priors, y = help_effect), data = datamat) + geom_point()

dataset <- dataset %>% 
  mutate(wage = datamat$wage)

# Simulating non-ranodm assignment of treatment
set.seed(123)

datamat2 <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% 
  select(-`(Intercept)`) %>% 
  mutate(
    has_priors = if_else(Number_of_Priors > 0, 1, 0),
    prob_treatment =  0.5 + 0.3*ethnicityCaucasian + (-0.05)*has_priors*ethnicityCaucasian + (-0.1)*Age_Above_FourtyFiveyes - 0.05*Number_of_Priors -  0.05*Number_of_Priors*ethnicityCaucasian + 0.1*Age_Above_FourtyFiveyes*Number_of_Priors,
    wage_nohelp = (-0.15)*has_priors + 
            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +
            0.1*ethnicityCaucasian + 
            (-0.05)*has_priors*ethnicityCaucasian +
            rlnorm(1000, meanlog = 0, sdlog = 0.1),
    help_effect = 0.1*Number_of_Priors
    )

jobhelp_new <- map_dbl(datamat2$prob_treatment, ~sample(c(0,1), 1, replace = TRUE, prob = c(1-.x, .x)))

dataset2 <- dataset %>% mutate(
  jobhelp = jobhelp_new,
  wage = datamat2$wage_nohelp + jobhelp_new*datamat2$help_effect
  )

# Simulating non-ranodm assignment of treatment without CIA
set.seed(456)

datamat3 <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% 
  select(-`(Intercept)`) %>% 
  mutate(
    has_priors = if_else(Number_of_Priors > 0, 1, 0),
    wage_nohelp = (-0.15)*has_priors + 
            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +
            0.1*ethnicityCaucasian + 
            (-0.05)*has_priors*ethnicityCaucasian +
            rlnorm(1000, meanlog = 0, sdlog = 0.1),
    help_effect = 0.1*Number_of_Priors
    )
prob_treatment3 <- (datamat3$wage_nohelp-min(datamat3$wage_nohelp))/max(datamat3$wage_nohelp)

jobhelp_new3 <- map_dbl(prob_treatment3, ~sample(c(0,1), 1, replace = TRUE, prob = c(1-.x, .x)))

dataset3 <- dataset %>% mutate(
  jobhelp = jobhelp_new3,
  wage = datamat3$wage_nohelp + jobhelp_new3*datamat3$help_effect
  )


X <- dataset %>%  select(-wage, -jobhelp) %>%  
  model.matrix(~., .) 
X2 <- dataset2 %>%  select(-wage, -jobhelp) %>%  
  model.matrix(~., .) 
X <- X[ , -1]
X2 <- X2[ , -1]
Y <- dataset$wage
W <- dataset$jobhelp

set.seed(234)
cforest <- causal_forest(
  X,
  Y,
  W,
  num.trees = 4000,
  sample.weights = NULL,
  clusters = NULL,
  equalize.cluster.weights = FALSE,
  sample.fraction = 0.5,
  mtry = min(ceiling(sqrt(ncol(X)) + 20), ncol(X)),
  min.node.size = 10,
  honesty = TRUE,
  honesty.fraction = 0.5,
  honesty.prune.leaves = TRUE,
  alpha = 0.05,
  imbalance.penalty = 0,
  stabilize.splits = TRUE,
  ci.group.size = 2,
  tune.parameters = "none",
  compute.oob.predictions = TRUE
)


npriors_val <- unique(dataset$Number_of_Priors) %>% sort()
Xtest <- matrix(0, length(npriors_val), ncol(X))
Xtest[,1] <- npriors_val

set.seed(3456)
cf_predict <- predict(object = cforest, 
                      newdata = Xtest, 
                      estimate.variance = TRUE) %>%
  mutate(Number_of_Priors = Xtest[ ,1])


</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::register_http_handlers(session, metadata = list(id = "dse_mk.causal_trees", version = 1L))
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::prepare_tutorial_state(session)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::i18n_observe_tutorial_language(input, session)
</script>


<script type="application/shiny-prerendered" data-context="server">
session$onSessionEnded(function() {
        learnr:::event_trigger(session, "session_stop")
      })
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-dataintro-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-dataintro-code-editor`)), session)
output$`tutorial-exercise-dataintro-output` <- renderUI({
  `tutorial-exercise-dataintro-result`()
})
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(label = "dataintro", global_setup = structure(c("library(learnr)", 
"library(DiagrammeR)", "library(grf)", "library(tidyverse)", 
"library(broom)", "", "", "", "# getting COMPAS data", "", "set.seed(111)", 
"dataset <- fairness::compas %>% ", "  filter(ethnicity == c(\"Caucasian\", \"African_American\")) %>%", 
"  mutate(ethnicity = as.factor(as.character(ethnicity))) %>%", 
"  mutate(Number_of_Priors = Number_of_Priors - min(Number_of_Priors)) %>% ", 
"  select(-probability,-predicted, -Two_yr_Recidivism) %>%", 
"  sample_n(1000)", "", "# Simulating data", "set.seed(112)", 
"dataset <- dataset %>% mutate(", "  jobhelp = sample(c(0,1), 1000, replace = TRUE, prob = c(0.5, 0.5)),", 
"  )", "", " ", "", "datamat <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% ", 
"  select(-`(Intercept)`) %>% ", "  mutate(", "    has_priors = if_else(Number_of_Priors > 0, 1, 0),", 
"    wage_nohelp = (-0.15)*has_priors + ", "            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +", 
"            0.1*ethnicityCaucasian + ", "            (-0.05)*has_priors*ethnicityCaucasian +", 
"            rlnorm(1000, meanlog = 0, sdlog = 0.1),", "    help_effect = 0.1*Number_of_Priors,", 
"    wage = wage_nohelp + help_effect*jobhelp", "    )", "", 
"# ggplot(aes(x = wage, color = as.factor(jobhelp)), data = datamat) + geom_density()", 
"# ggplot(aes(x = Number_of_Priors, y = help_effect), data = datamat) + geom_point()", 
"", "dataset <- dataset %>% ", "  mutate(wage = datamat$wage)", 
"", "# Simulating non-ranodm assignment of treatment", "set.seed(123)", 
"", "datamat2 <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% ", 
"  select(-`(Intercept)`) %>% ", "  mutate(", "    has_priors = if_else(Number_of_Priors > 0, 1, 0),", 
"    prob_treatment =  0.5 + 0.3*ethnicityCaucasian + (-0.05)*has_priors*ethnicityCaucasian + (-0.1)*Age_Above_FourtyFiveyes - 0.05*Number_of_Priors -  0.05*Number_of_Priors*ethnicityCaucasian + 0.1*Age_Above_FourtyFiveyes*Number_of_Priors,", 
"    wage_nohelp = (-0.15)*has_priors + ", "            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +", 
"            0.1*ethnicityCaucasian + ", "            (-0.05)*has_priors*ethnicityCaucasian +", 
"            rlnorm(1000, meanlog = 0, sdlog = 0.1),", "    help_effect = 0.1*Number_of_Priors", 
"    )", "", "jobhelp_new <- map_dbl(datamat2$prob_treatment, ~sample(c(0,1), 1, replace = TRUE, prob = c(1-.x, .x)))", 
"", "dataset2 <- dataset %>% mutate(", "  jobhelp = jobhelp_new,", 
"  wage = datamat2$wage_nohelp + jobhelp_new*datamat2$help_effect", 
"  )", "", "# Simulating non-ranodm assignment of treatment without CIA", 
"set.seed(456)", "", "datamat3 <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% ", 
"  select(-`(Intercept)`) %>% ", "  mutate(", "    has_priors = if_else(Number_of_Priors > 0, 1, 0),", 
"    wage_nohelp = (-0.15)*has_priors + ", "            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +", 
"            0.1*ethnicityCaucasian + ", "            (-0.05)*has_priors*ethnicityCaucasian +", 
"            rlnorm(1000, meanlog = 0, sdlog = 0.1),", "    help_effect = 0.1*Number_of_Priors", 
"    )", "prob_treatment3 <- (datamat3$wage_nohelp-min(datamat3$wage_nohelp))/max(datamat3$wage_nohelp)", 
"", "jobhelp_new3 <- map_dbl(prob_treatment3, ~sample(c(0,1), 1, replace = TRUE, prob = c(1-.x, .x)))", 
"", "dataset3 <- dataset %>% mutate(", "  jobhelp = jobhelp_new3,", 
"  wage = datamat3$wage_nohelp + jobhelp_new3*datamat3$help_effect", 
"  )", "", "", "X <- dataset %>%  select(-wage, -jobhelp) %>%  ", 
"  model.matrix(~., .) ", "X2 <- dataset2 %>%  select(-wage, -jobhelp) %>%  ", 
"  model.matrix(~., .) ", "X <- X[ , -1]", "X2 <- X2[ , -1]", 
"Y <- dataset$wage", "W <- dataset$jobhelp", "", "set.seed(234)", 
"cforest <- causal_forest(", "  X,", "  Y,", "  W,", "  num.trees = 4000,", 
"  sample.weights = NULL,", "  clusters = NULL,", "  equalize.cluster.weights = FALSE,", 
"  sample.fraction = 0.5,", "  mtry = min(ceiling(sqrt(ncol(X)) + 20), ncol(X)),", 
"  min.node.size = 10,", "  honesty = TRUE,", "  honesty.fraction = 0.5,", 
"  honesty.prune.leaves = TRUE,", "  alpha = 0.05,", "  imbalance.penalty = 0,", 
"  stabilize.splits = TRUE,", "  ci.group.size = 2,", "  tune.parameters = \"none\",", 
"  compute.oob.predictions = TRUE", ")", "", "", "npriors_val <- unique(dataset$Number_of_Priors) %>% sort()", 
"Xtest <- matrix(0, length(npriors_val), ncol(X))", "Xtest[,1] <- npriors_val", 
"", "set.seed(3456)", "cf_predict <- predict(object = cforest, ", 
"                      newdata = Xtest, ", "                      estimate.variance = TRUE) %>%", 
"  mutate(Number_of_Priors = Xtest[ ,1])", "", ""), chunk_opts = list(
    label = "setup", include = FALSE)), setup = NULL, chunks = list(
    list(label = "dataintro", code = "# See the head of the data\n____(dataset)\n\n# Get the density plot of the variable 'wage'\ndataset %>% ggplot(...) + \n  \n# Get the number of people who were treated\ndataset %>% \n  \n", 
        opts = list(label = "\"dataintro\"", exercise = "TRUE", 
            exercise.eval = "FALSE"), engine = "r")), code_check = NULL, 
    error_check = NULL, check = NULL, solution = NULL, tests = NULL, 
    options = list(eval = FALSE, echo = TRUE, results = "markup", 
        tidy = FALSE, tidy.opts = NULL, collapse = FALSE, prompt = FALSE, 
        comment = NA, highlight = FALSE, size = "normalsize", 
        background = "#F7F7F7", strip.white = TRUE, cache = 0, 
        cache.path = "tutorial_grf_cache/html/", cache.vars = NULL, 
        cache.lazy = TRUE, dependson = NULL, autodep = FALSE, 
        cache.rebuild = FALSE, fig.keep = "high", fig.show = "asis", 
        fig.align = "default", fig.path = "tutorial_grf_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, label = "dataintro", exercise = TRUE, 
        exercise.eval = FALSE, code = c("# See the head of the data", 
        "____(dataset)", "", "# Get the density plot of the variable 'wage'", 
        "dataset %>% ggplot(...) + ", "  ", "# Get the number of people who were treated", 
        "dataset %>% ", "  ", ""), out.width.px = 624, out.height.px = 384, 
        params.src = "dataintro, exercise=TRUE, exercise.eval=FALSE", 
        fig.num = 0, exercise.df_print = "paged", exercise.checker = "NULL"), 
    engine = "r", version = "4"), class = c("r", "tutorial_exercise"
)))
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_radio", label = "quiz_howmany-1", 
    question = structure("How many people were treated with the mandatory job placement help?", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_c751100", 
        option = "1000", value = "1000", label = structure("1000", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_5d847e4", 
        option = "499", value = "499", label = structure("499", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_1a225af", 
        option = "501", value = "501", label = structure("501", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
    "character")), try_again = structure("Incorrect", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Incorrect", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "quiz_howmany-1-answer", question = "quiz_howmany-1"), 
    loading = NULL, random_answer_order = FALSE, allow_retry = FALSE, 
    seed = 1157318635.46108, options = list()), class = c("learnr_radio", 
"tutorial_question")), session = session)
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_checkbox", label = "quiz_ct-1", 
    question = structure("Causal Forest (CF) is different from Random Forest because", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_12e6a1d", 
        option = "CF does not randomly sample observations when growing trees", 
        value = "CF does not randomly sample observations when growing trees", 
        label = structure("CF does not randomly sample observations when growing trees", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_f89eec8", 
        option = "CF does not randomly sample variables when considering how to split data", 
        value = "CF does not randomly sample variables when considering how to split data", 
        label = structure("CF does not randomly sample variables when considering how to split data", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_a3dba63", 
        option = "CF grows causal trees instead of decision trees ", 
        value = "CF grows causal trees instead of decision trees ", 
        label = structure("CF grows causal trees instead of decision trees", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_32813ae", 
        option = "CF's objective is to capture differences in treatment effects rather than in the outcome", 
        value = "CF's objective is to capture differences in treatment effects rather than in the outcome", 
        label = structure("CF’s objective is to capture differences in treatment effects rather than in the outcome", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
    "character")), try_again = structure("Incorrect. Be sure to select every correct answer.", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Incorrect", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "quiz_ct-1-answer", question = "quiz_ct-1"), 
    loading = NULL, random_answer_order = FALSE, allow_retry = FALSE, 
    seed = 1616079430.24745, options = list()), class = c("learnr_checkbox", 
"tutorial_question")), session = session)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_checkbox", label = "quiz_ct2-1", 
    question = structure("In comparison to a Decision Tree, growing a Causal Tree:", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_f533590", 
        option = "requires more observations because CT uses just half of the data due to Honest Target", 
        value = "requires more observations because CT uses just half of the data due to Honest Target", 
        label = structure("requires more observations because CT uses just half of the data due to Honest Target", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_22a092", 
        option = "allows to get most accurate prediction of the outcome", 
        value = "allows to get most accurate prediction of the outcome", 
        label = structure("allows to get most accurate prediction of the outcome", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_11a72bc", 
        option = "allows to get a consistent estimate of treatment effects", 
        value = "allows to get a consistent estimate of treatment effects", 
        label = structure("allows to get a consistent estimate of treatment effects", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_a5e5871", 
        option = "requires a random assignment of treatment or CIA (conditional independence assumption)", 
        value = "requires a random assignment of treatment or CIA (conditional independence assumption)", 
        label = structure("requires a random assignment of treatment or CIA (conditional independence assumption)", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
    "character")), try_again = structure("Incorrect. Be sure to select every correct answer.", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Incorrect", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "quiz_ct2-1-answer", question = "quiz_ct2-1"), 
    loading = NULL, random_answer_order = FALSE, allow_retry = FALSE, 
    seed = 1554220134.77626, options = list()), class = c("learnr_checkbox", 
"tutorial_question")), session = session)
</script>


<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-createvars-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-createvars-code-editor`)), session)
output$`tutorial-exercise-createvars-output` <- renderUI({
  `tutorial-exercise-createvars-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(label = "createvars", global_setup = structure(c("library(learnr)", 
"library(DiagrammeR)", "library(grf)", "library(tidyverse)", 
"library(broom)", "", "", "", "# getting COMPAS data", "", "set.seed(111)", 
"dataset <- fairness::compas %>% ", "  filter(ethnicity == c(\"Caucasian\", \"African_American\")) %>%", 
"  mutate(ethnicity = as.factor(as.character(ethnicity))) %>%", 
"  mutate(Number_of_Priors = Number_of_Priors - min(Number_of_Priors)) %>% ", 
"  select(-probability,-predicted, -Two_yr_Recidivism) %>%", 
"  sample_n(1000)", "", "# Simulating data", "set.seed(112)", 
"dataset <- dataset %>% mutate(", "  jobhelp = sample(c(0,1), 1000, replace = TRUE, prob = c(0.5, 0.5)),", 
"  )", "", " ", "", "datamat <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% ", 
"  select(-`(Intercept)`) %>% ", "  mutate(", "    has_priors = if_else(Number_of_Priors > 0, 1, 0),", 
"    wage_nohelp = (-0.15)*has_priors + ", "            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +", 
"            0.1*ethnicityCaucasian + ", "            (-0.05)*has_priors*ethnicityCaucasian +", 
"            rlnorm(1000, meanlog = 0, sdlog = 0.1),", "    help_effect = 0.1*Number_of_Priors,", 
"    wage = wage_nohelp + help_effect*jobhelp", "    )", "", 
"# ggplot(aes(x = wage, color = as.factor(jobhelp)), data = datamat) + geom_density()", 
"# ggplot(aes(x = Number_of_Priors, y = help_effect), data = datamat) + geom_point()", 
"", "dataset <- dataset %>% ", "  mutate(wage = datamat$wage)", 
"", "# Simulating non-ranodm assignment of treatment", "set.seed(123)", 
"", "datamat2 <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% ", 
"  select(-`(Intercept)`) %>% ", "  mutate(", "    has_priors = if_else(Number_of_Priors > 0, 1, 0),", 
"    prob_treatment =  0.5 + 0.3*ethnicityCaucasian + (-0.05)*has_priors*ethnicityCaucasian + (-0.1)*Age_Above_FourtyFiveyes - 0.05*Number_of_Priors -  0.05*Number_of_Priors*ethnicityCaucasian + 0.1*Age_Above_FourtyFiveyes*Number_of_Priors,", 
"    wage_nohelp = (-0.15)*has_priors + ", "            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +", 
"            0.1*ethnicityCaucasian + ", "            (-0.05)*has_priors*ethnicityCaucasian +", 
"            rlnorm(1000, meanlog = 0, sdlog = 0.1),", "    help_effect = 0.1*Number_of_Priors", 
"    )", "", "jobhelp_new <- map_dbl(datamat2$prob_treatment, ~sample(c(0,1), 1, replace = TRUE, prob = c(1-.x, .x)))", 
"", "dataset2 <- dataset %>% mutate(", "  jobhelp = jobhelp_new,", 
"  wage = datamat2$wage_nohelp + jobhelp_new*datamat2$help_effect", 
"  )", "", "# Simulating non-ranodm assignment of treatment without CIA", 
"set.seed(456)", "", "datamat3 <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% ", 
"  select(-`(Intercept)`) %>% ", "  mutate(", "    has_priors = if_else(Number_of_Priors > 0, 1, 0),", 
"    wage_nohelp = (-0.15)*has_priors + ", "            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +", 
"            0.1*ethnicityCaucasian + ", "            (-0.05)*has_priors*ethnicityCaucasian +", 
"            rlnorm(1000, meanlog = 0, sdlog = 0.1),", "    help_effect = 0.1*Number_of_Priors", 
"    )", "prob_treatment3 <- (datamat3$wage_nohelp-min(datamat3$wage_nohelp))/max(datamat3$wage_nohelp)", 
"", "jobhelp_new3 <- map_dbl(prob_treatment3, ~sample(c(0,1), 1, replace = TRUE, prob = c(1-.x, .x)))", 
"", "dataset3 <- dataset %>% mutate(", "  jobhelp = jobhelp_new3,", 
"  wage = datamat3$wage_nohelp + jobhelp_new3*datamat3$help_effect", 
"  )", "", "", "X <- dataset %>%  select(-wage, -jobhelp) %>%  ", 
"  model.matrix(~., .) ", "X2 <- dataset2 %>%  select(-wage, -jobhelp) %>%  ", 
"  model.matrix(~., .) ", "X <- X[ , -1]", "X2 <- X2[ , -1]", 
"Y <- dataset$wage", "W <- dataset$jobhelp", "", "set.seed(234)", 
"cforest <- causal_forest(", "  X,", "  Y,", "  W,", "  num.trees = 4000,", 
"  sample.weights = NULL,", "  clusters = NULL,", "  equalize.cluster.weights = FALSE,", 
"  sample.fraction = 0.5,", "  mtry = min(ceiling(sqrt(ncol(X)) + 20), ncol(X)),", 
"  min.node.size = 10,", "  honesty = TRUE,", "  honesty.fraction = 0.5,", 
"  honesty.prune.leaves = TRUE,", "  alpha = 0.05,", "  imbalance.penalty = 0,", 
"  stabilize.splits = TRUE,", "  ci.group.size = 2,", "  tune.parameters = \"none\",", 
"  compute.oob.predictions = TRUE", ")", "", "", "npriors_val <- unique(dataset$Number_of_Priors) %>% sort()", 
"Xtest <- matrix(0, length(npriors_val), ncol(X))", "Xtest[,1] <- npriors_val", 
"", "set.seed(3456)", "cf_predict <- predict(object = cforest, ", 
"                      newdata = Xtest, ", "                      estimate.variance = TRUE) %>%", 
"  mutate(Number_of_Priors = Xtest[ ,1])", "", ""), chunk_opts = list(
    label = "setup", include = FALSE)), setup = NULL, chunks = list(
    list(label = "createvars", code = "Y <- dataset$____\nW <- dataset$____\n\nX <- dataset %>%  select(-____, -____) %>%  \n  _____.______( ~ ?, data = .)\n\n# Drop the intercept (No need to change anything here)\nX <- X[ , -1]\n\n", 
        opts = list(label = "\"createvars\"", exercise = "TRUE", 
            exercise.eval = "FALSE"), engine = "r")), code_check = NULL, 
    error_check = NULL, check = NULL, solution = NULL, tests = NULL, 
    options = list(eval = FALSE, echo = TRUE, results = "markup", 
        tidy = FALSE, tidy.opts = NULL, collapse = FALSE, prompt = FALSE, 
        comment = NA, highlight = FALSE, size = "normalsize", 
        background = "#F7F7F7", strip.white = TRUE, cache = 0, 
        cache.path = "tutorial_grf_cache/html/", cache.vars = NULL, 
        cache.lazy = TRUE, dependson = NULL, autodep = FALSE, 
        cache.rebuild = FALSE, fig.keep = "high", fig.show = "asis", 
        fig.align = "default", fig.path = "tutorial_grf_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, label = "createvars", exercise = TRUE, 
        exercise.eval = FALSE, code = c("Y <- dataset$____", 
        "W <- dataset$____", "", "X <- dataset %>%  select(-____, -____) %>%  ", 
        "  _____.______( ~ ?, data = .)", "", "# Drop the intercept (No need to change anything here)", 
        "X <- X[ , -1]", "", ""), out.width.px = 624, out.height.px = 384, 
        params.src = "createvars, exercise=TRUE, exercise.eval=FALSE", 
        fig.num = 0, exercise.df_print = "paged", exercise.checker = "NULL"), 
    engine = "r", version = "4"), class = c("r", "tutorial_exercise"
)))
</script>


<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-cf-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-cf-code-editor`)), session)
output$`tutorial-exercise-cf-output` <- renderUI({
  `tutorial-exercise-cf-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(label = "cf", global_setup = structure(c("library(learnr)", 
"library(DiagrammeR)", "library(grf)", "library(tidyverse)", 
"library(broom)", "", "", "", "# getting COMPAS data", "", "set.seed(111)", 
"dataset <- fairness::compas %>% ", "  filter(ethnicity == c(\"Caucasian\", \"African_American\")) %>%", 
"  mutate(ethnicity = as.factor(as.character(ethnicity))) %>%", 
"  mutate(Number_of_Priors = Number_of_Priors - min(Number_of_Priors)) %>% ", 
"  select(-probability,-predicted, -Two_yr_Recidivism) %>%", 
"  sample_n(1000)", "", "# Simulating data", "set.seed(112)", 
"dataset <- dataset %>% mutate(", "  jobhelp = sample(c(0,1), 1000, replace = TRUE, prob = c(0.5, 0.5)),", 
"  )", "", " ", "", "datamat <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% ", 
"  select(-`(Intercept)`) %>% ", "  mutate(", "    has_priors = if_else(Number_of_Priors > 0, 1, 0),", 
"    wage_nohelp = (-0.15)*has_priors + ", "            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +", 
"            0.1*ethnicityCaucasian + ", "            (-0.05)*has_priors*ethnicityCaucasian +", 
"            rlnorm(1000, meanlog = 0, sdlog = 0.1),", "    help_effect = 0.1*Number_of_Priors,", 
"    wage = wage_nohelp + help_effect*jobhelp", "    )", "", 
"# ggplot(aes(x = wage, color = as.factor(jobhelp)), data = datamat) + geom_density()", 
"# ggplot(aes(x = Number_of_Priors, y = help_effect), data = datamat) + geom_point()", 
"", "dataset <- dataset %>% ", "  mutate(wage = datamat$wage)", 
"", "# Simulating non-ranodm assignment of treatment", "set.seed(123)", 
"", "datamat2 <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% ", 
"  select(-`(Intercept)`) %>% ", "  mutate(", "    has_priors = if_else(Number_of_Priors > 0, 1, 0),", 
"    prob_treatment =  0.5 + 0.3*ethnicityCaucasian + (-0.05)*has_priors*ethnicityCaucasian + (-0.1)*Age_Above_FourtyFiveyes - 0.05*Number_of_Priors -  0.05*Number_of_Priors*ethnicityCaucasian + 0.1*Age_Above_FourtyFiveyes*Number_of_Priors,", 
"    wage_nohelp = (-0.15)*has_priors + ", "            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +", 
"            0.1*ethnicityCaucasian + ", "            (-0.05)*has_priors*ethnicityCaucasian +", 
"            rlnorm(1000, meanlog = 0, sdlog = 0.1),", "    help_effect = 0.1*Number_of_Priors", 
"    )", "", "jobhelp_new <- map_dbl(datamat2$prob_treatment, ~sample(c(0,1), 1, replace = TRUE, prob = c(1-.x, .x)))", 
"", "dataset2 <- dataset %>% mutate(", "  jobhelp = jobhelp_new,", 
"  wage = datamat2$wage_nohelp + jobhelp_new*datamat2$help_effect", 
"  )", "", "# Simulating non-ranodm assignment of treatment without CIA", 
"set.seed(456)", "", "datamat3 <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% ", 
"  select(-`(Intercept)`) %>% ", "  mutate(", "    has_priors = if_else(Number_of_Priors > 0, 1, 0),", 
"    wage_nohelp = (-0.15)*has_priors + ", "            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +", 
"            0.1*ethnicityCaucasian + ", "            (-0.05)*has_priors*ethnicityCaucasian +", 
"            rlnorm(1000, meanlog = 0, sdlog = 0.1),", "    help_effect = 0.1*Number_of_Priors", 
"    )", "prob_treatment3 <- (datamat3$wage_nohelp-min(datamat3$wage_nohelp))/max(datamat3$wage_nohelp)", 
"", "jobhelp_new3 <- map_dbl(prob_treatment3, ~sample(c(0,1), 1, replace = TRUE, prob = c(1-.x, .x)))", 
"", "dataset3 <- dataset %>% mutate(", "  jobhelp = jobhelp_new3,", 
"  wage = datamat3$wage_nohelp + jobhelp_new3*datamat3$help_effect", 
"  )", "", "", "X <- dataset %>%  select(-wage, -jobhelp) %>%  ", 
"  model.matrix(~., .) ", "X2 <- dataset2 %>%  select(-wage, -jobhelp) %>%  ", 
"  model.matrix(~., .) ", "X <- X[ , -1]", "X2 <- X2[ , -1]", 
"Y <- dataset$wage", "W <- dataset$jobhelp", "", "set.seed(234)", 
"cforest <- causal_forest(", "  X,", "  Y,", "  W,", "  num.trees = 4000,", 
"  sample.weights = NULL,", "  clusters = NULL,", "  equalize.cluster.weights = FALSE,", 
"  sample.fraction = 0.5,", "  mtry = min(ceiling(sqrt(ncol(X)) + 20), ncol(X)),", 
"  min.node.size = 10,", "  honesty = TRUE,", "  honesty.fraction = 0.5,", 
"  honesty.prune.leaves = TRUE,", "  alpha = 0.05,", "  imbalance.penalty = 0,", 
"  stabilize.splits = TRUE,", "  ci.group.size = 2,", "  tune.parameters = \"none\",", 
"  compute.oob.predictions = TRUE", ")", "", "", "npriors_val <- unique(dataset$Number_of_Priors) %>% sort()", 
"Xtest <- matrix(0, length(npriors_val), ncol(X))", "Xtest[,1] <- npriors_val", 
"", "set.seed(3456)", "cf_predict <- predict(object = cforest, ", 
"                      newdata = Xtest, ", "                      estimate.variance = TRUE) %>%", 
"  mutate(Number_of_Priors = Xtest[ ,1])", "", ""), chunk_opts = list(
    label = "setup", include = FALSE)), setup = NULL, chunks = list(
    list(label = "cf", code = "set.seed(234)\ncforest <- causal_forest(\n  X = _,\n  Y = _,\n  W = _,\n  num.trees = ____,\n  clusters = NULL,\n  sample.fraction = __,\n  mtry = ____,\n  min.node.size = __,\n  honesty = TRUE,\n  honesty.fraction = __,\n  honesty.prune.leaves = TRUE,\n  tune.parameters = \"none\"\n)\ncforest", 
        opts = list(label = "\"cf\"", exercise = "TRUE", exercise.eval = "FALSE"), 
        engine = "r")), code_check = NULL, error_check = NULL, 
    check = NULL, solution = NULL, tests = NULL, options = list(
        eval = FALSE, echo = TRUE, results = "markup", tidy = FALSE, 
        tidy.opts = NULL, collapse = FALSE, prompt = FALSE, comment = NA, 
        highlight = FALSE, size = "normalsize", background = "#F7F7F7", 
        strip.white = TRUE, cache = 0, cache.path = "tutorial_grf_cache/html/", 
        cache.vars = NULL, cache.lazy = TRUE, dependson = NULL, 
        autodep = FALSE, cache.rebuild = FALSE, fig.keep = "high", 
        fig.show = "asis", fig.align = "default", fig.path = "tutorial_grf_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, label = "cf", exercise = TRUE, exercise.eval = FALSE, 
        code = c("set.seed(234)", "cforest <- causal_forest(", 
        "  X = _,", "  Y = _,", "  W = _,", "  num.trees = ____,", 
        "  clusters = NULL,", "  sample.fraction = __,", "  mtry = ____,", 
        "  min.node.size = __,", "  honesty = TRUE,", "  honesty.fraction = __,", 
        "  honesty.prune.leaves = TRUE,", "  tune.parameters = \"none\"", 
        ")", "cforest"), out.width.px = 624, out.height.px = 384, 
        params.src = "cf, exercise=TRUE, exercise.eval=FALSE", 
        fig.num = 0, exercise.df_print = "paged", exercise.checker = "NULL"), 
    engine = "r", version = "4"), class = c("r", "tutorial_exercise"
)))
</script>


<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-plotonetree-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-plotonetree-code-editor`)), session)
output$`tutorial-exercise-plotonetree-output` <- renderUI({
  `tutorial-exercise-plotonetree-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(label = "plotonetree", global_setup = structure(c("library(learnr)", 
"library(DiagrammeR)", "library(grf)", "library(tidyverse)", 
"library(broom)", "", "", "", "# getting COMPAS data", "", "set.seed(111)", 
"dataset <- fairness::compas %>% ", "  filter(ethnicity == c(\"Caucasian\", \"African_American\")) %>%", 
"  mutate(ethnicity = as.factor(as.character(ethnicity))) %>%", 
"  mutate(Number_of_Priors = Number_of_Priors - min(Number_of_Priors)) %>% ", 
"  select(-probability,-predicted, -Two_yr_Recidivism) %>%", 
"  sample_n(1000)", "", "# Simulating data", "set.seed(112)", 
"dataset <- dataset %>% mutate(", "  jobhelp = sample(c(0,1), 1000, replace = TRUE, prob = c(0.5, 0.5)),", 
"  )", "", " ", "", "datamat <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% ", 
"  select(-`(Intercept)`) %>% ", "  mutate(", "    has_priors = if_else(Number_of_Priors > 0, 1, 0),", 
"    wage_nohelp = (-0.15)*has_priors + ", "            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +", 
"            0.1*ethnicityCaucasian + ", "            (-0.05)*has_priors*ethnicityCaucasian +", 
"            rlnorm(1000, meanlog = 0, sdlog = 0.1),", "    help_effect = 0.1*Number_of_Priors,", 
"    wage = wage_nohelp + help_effect*jobhelp", "    )", "", 
"# ggplot(aes(x = wage, color = as.factor(jobhelp)), data = datamat) + geom_density()", 
"# ggplot(aes(x = Number_of_Priors, y = help_effect), data = datamat) + geom_point()", 
"", "dataset <- dataset %>% ", "  mutate(wage = datamat$wage)", 
"", "# Simulating non-ranodm assignment of treatment", "set.seed(123)", 
"", "datamat2 <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% ", 
"  select(-`(Intercept)`) %>% ", "  mutate(", "    has_priors = if_else(Number_of_Priors > 0, 1, 0),", 
"    prob_treatment =  0.5 + 0.3*ethnicityCaucasian + (-0.05)*has_priors*ethnicityCaucasian + (-0.1)*Age_Above_FourtyFiveyes - 0.05*Number_of_Priors -  0.05*Number_of_Priors*ethnicityCaucasian + 0.1*Age_Above_FourtyFiveyes*Number_of_Priors,", 
"    wage_nohelp = (-0.15)*has_priors + ", "            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +", 
"            0.1*ethnicityCaucasian + ", "            (-0.05)*has_priors*ethnicityCaucasian +", 
"            rlnorm(1000, meanlog = 0, sdlog = 0.1),", "    help_effect = 0.1*Number_of_Priors", 
"    )", "", "jobhelp_new <- map_dbl(datamat2$prob_treatment, ~sample(c(0,1), 1, replace = TRUE, prob = c(1-.x, .x)))", 
"", "dataset2 <- dataset %>% mutate(", "  jobhelp = jobhelp_new,", 
"  wage = datamat2$wage_nohelp + jobhelp_new*datamat2$help_effect", 
"  )", "", "# Simulating non-ranodm assignment of treatment without CIA", 
"set.seed(456)", "", "datamat3 <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% ", 
"  select(-`(Intercept)`) %>% ", "  mutate(", "    has_priors = if_else(Number_of_Priors > 0, 1, 0),", 
"    wage_nohelp = (-0.15)*has_priors + ", "            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +", 
"            0.1*ethnicityCaucasian + ", "            (-0.05)*has_priors*ethnicityCaucasian +", 
"            rlnorm(1000, meanlog = 0, sdlog = 0.1),", "    help_effect = 0.1*Number_of_Priors", 
"    )", "prob_treatment3 <- (datamat3$wage_nohelp-min(datamat3$wage_nohelp))/max(datamat3$wage_nohelp)", 
"", "jobhelp_new3 <- map_dbl(prob_treatment3, ~sample(c(0,1), 1, replace = TRUE, prob = c(1-.x, .x)))", 
"", "dataset3 <- dataset %>% mutate(", "  jobhelp = jobhelp_new3,", 
"  wage = datamat3$wage_nohelp + jobhelp_new3*datamat3$help_effect", 
"  )", "", "", "X <- dataset %>%  select(-wage, -jobhelp) %>%  ", 
"  model.matrix(~., .) ", "X2 <- dataset2 %>%  select(-wage, -jobhelp) %>%  ", 
"  model.matrix(~., .) ", "X <- X[ , -1]", "X2 <- X2[ , -1]", 
"Y <- dataset$wage", "W <- dataset$jobhelp", "", "set.seed(234)", 
"cforest <- causal_forest(", "  X,", "  Y,", "  W,", "  num.trees = 4000,", 
"  sample.weights = NULL,", "  clusters = NULL,", "  equalize.cluster.weights = FALSE,", 
"  sample.fraction = 0.5,", "  mtry = min(ceiling(sqrt(ncol(X)) + 20), ncol(X)),", 
"  min.node.size = 10,", "  honesty = TRUE,", "  honesty.fraction = 0.5,", 
"  honesty.prune.leaves = TRUE,", "  alpha = 0.05,", "  imbalance.penalty = 0,", 
"  stabilize.splits = TRUE,", "  ci.group.size = 2,", "  tune.parameters = \"none\",", 
"  compute.oob.predictions = TRUE", ")", "", "", "npriors_val <- unique(dataset$Number_of_Priors) %>% sort()", 
"Xtest <- matrix(0, length(npriors_val), ncol(X))", "Xtest[,1] <- npriors_val", 
"", "set.seed(3456)", "cf_predict <- predict(object = cforest, ", 
"                      newdata = Xtest, ", "                      estimate.variance = TRUE) %>%", 
"  mutate(Number_of_Priors = Xtest[ ,1])", "", ""), chunk_opts = list(
    label = "setup", include = FALSE)), setup = NULL, chunks = list(
    list(label = "plotonetree", code = "plot(get_tree(cforest, index=1))", 
        opts = list(label = "\"plotonetree\"", exercise = "TRUE", 
            exercise.eval = "TRUE"), engine = "r")), code_check = NULL, 
    error_check = NULL, check = NULL, solution = NULL, tests = NULL, 
    options = list(eval = TRUE, echo = TRUE, results = "markup", 
        tidy = FALSE, tidy.opts = NULL, collapse = FALSE, prompt = FALSE, 
        comment = NA, highlight = FALSE, size = "normalsize", 
        background = "#F7F7F7", strip.white = TRUE, cache = 0, 
        cache.path = "tutorial_grf_cache/html/", cache.vars = NULL, 
        cache.lazy = TRUE, dependson = NULL, autodep = FALSE, 
        cache.rebuild = FALSE, fig.keep = "high", fig.show = "asis", 
        fig.align = "default", fig.path = "tutorial_grf_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, label = "plotonetree", exercise = TRUE, 
        exercise.eval = TRUE, code = "plot(get_tree(cforest, index=1))", 
        out.width.px = 624, out.height.px = 384, params.src = "plotonetree, exercise=TRUE, exercise.eval=TRUE", 
        fig.alt = NULL, fig.num = 0, exercise.df_print = "paged", 
        exercise.checker = "NULL"), engine = "r", version = "4"), class = c("r", 
"tutorial_exercise")))
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_radio", label = "quiz_t1-1", question = structure("The most important variable that affects heterogeneity in treatment effects in causal tree number 1 is:", html = TRUE, class = c("html", 
"character")), answers = list(structure(list(id = "lnr_ans_3f8c579", 
    option = "Number_of_Priors", value = "Number_of_Priors", 
    label = structure("Number_of_Priors", html = TRUE, class = c("html", 
    "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
"tutorial_quiz_answer")), structure(list(id = "lnr_ans_46b2f48", 
    option = "Ethnicity", value = "Ethnicity", label = structure("Ethnicity", html = TRUE, class = c("html", 
    "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
"tutorial_quiz_answer")), structure(list(id = "lnr_ans_7f93166", 
    option = "Female", value = "Female", label = structure("Female", html = TRUE, class = c("html", 
    "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
"tutorial_quiz_answer")), structure(list(id = "lnr_ans_54b8b0f", 
    option = "AgeAbove45", value = "AgeAbove45", label = structure("AgeAbove45", html = TRUE, class = c("html", 
    "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
"tutorial_quiz_answer")), structure(list(id = "lnr_ans_867b8f6", 
    option = "AgeBelow25", value = "AgeBelow25", label = structure("AgeBelow25", html = TRUE, class = c("html", 
    "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
"tutorial_quiz_answer")), structure(list(id = "lnr_ans_5714f65", 
    option = "Misdemeanor", value = "Misdemeanor", label = structure("Misdemeanor", html = TRUE, class = c("html", 
    "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
"tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
"character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
"character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
"character")), try_again = structure("Incorrect", html = TRUE, class = c("html", 
"character")), incorrect = structure("Incorrect", html = TRUE, class = c("html", 
"character")), message = NULL, post_message = NULL), ids = list(
    answer = "quiz_t1-1-answer", question = "quiz_t1-1"), loading = NULL, 
    random_answer_order = FALSE, allow_retry = FALSE, seed = 97340911.4546721, 
    options = list()), class = c("learnr_radio", "tutorial_question"
)), session = session)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_radio", label = "quiz_t1234-1", 
    question = structure("The most important variable that affects heterogeneity in treatment effects in causal tree number 42 is:", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_4ef0484", 
        option = "Number_of_Priors", value = "Number_of_Priors", 
        label = structure("Number_of_Priors", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_2e92db1", 
        option = "Ethnicity", value = "Ethnicity", label = structure("Ethnicity", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_7e272bd", 
        option = "Female", value = "Female", label = structure("Female", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_adf8a58", 
        option = "AgeAbove45", value = "AgeAbove45", label = structure("AgeAbove45", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_a42b1da", 
        option = "AgeBelow25", value = "AgeBelow25", label = structure("AgeBelow25", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_ff9a748", 
        option = "Misdemeanor", value = "Misdemeanor", label = structure("Misdemeanor", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
    "character")), try_again = structure("Incorrect", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Incorrect", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "quiz_t1234-1-answer", question = "quiz_t1234-1"), 
    loading = NULL, random_answer_order = FALSE, allow_retry = FALSE, 
    seed = 1393209869.85124, options = list()), class = c("learnr_radio", 
"tutorial_question")), session = session)
</script>


<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-importance-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-importance-code-editor`)), session)
output$`tutorial-exercise-importance-output` <- renderUI({
  `tutorial-exercise-importance-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(label = "importance", global_setup = structure(c("library(learnr)", 
"library(DiagrammeR)", "library(grf)", "library(tidyverse)", 
"library(broom)", "", "", "", "# getting COMPAS data", "", "set.seed(111)", 
"dataset <- fairness::compas %>% ", "  filter(ethnicity == c(\"Caucasian\", \"African_American\")) %>%", 
"  mutate(ethnicity = as.factor(as.character(ethnicity))) %>%", 
"  mutate(Number_of_Priors = Number_of_Priors - min(Number_of_Priors)) %>% ", 
"  select(-probability,-predicted, -Two_yr_Recidivism) %>%", 
"  sample_n(1000)", "", "# Simulating data", "set.seed(112)", 
"dataset <- dataset %>% mutate(", "  jobhelp = sample(c(0,1), 1000, replace = TRUE, prob = c(0.5, 0.5)),", 
"  )", "", " ", "", "datamat <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% ", 
"  select(-`(Intercept)`) %>% ", "  mutate(", "    has_priors = if_else(Number_of_Priors > 0, 1, 0),", 
"    wage_nohelp = (-0.15)*has_priors + ", "            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +", 
"            0.1*ethnicityCaucasian + ", "            (-0.05)*has_priors*ethnicityCaucasian +", 
"            rlnorm(1000, meanlog = 0, sdlog = 0.1),", "    help_effect = 0.1*Number_of_Priors,", 
"    wage = wage_nohelp + help_effect*jobhelp", "    )", "", 
"# ggplot(aes(x = wage, color = as.factor(jobhelp)), data = datamat) + geom_density()", 
"# ggplot(aes(x = Number_of_Priors, y = help_effect), data = datamat) + geom_point()", 
"", "dataset <- dataset %>% ", "  mutate(wage = datamat$wage)", 
"", "# Simulating non-ranodm assignment of treatment", "set.seed(123)", 
"", "datamat2 <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% ", 
"  select(-`(Intercept)`) %>% ", "  mutate(", "    has_priors = if_else(Number_of_Priors > 0, 1, 0),", 
"    prob_treatment =  0.5 + 0.3*ethnicityCaucasian + (-0.05)*has_priors*ethnicityCaucasian + (-0.1)*Age_Above_FourtyFiveyes - 0.05*Number_of_Priors -  0.05*Number_of_Priors*ethnicityCaucasian + 0.1*Age_Above_FourtyFiveyes*Number_of_Priors,", 
"    wage_nohelp = (-0.15)*has_priors + ", "            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +", 
"            0.1*ethnicityCaucasian + ", "            (-0.05)*has_priors*ethnicityCaucasian +", 
"            rlnorm(1000, meanlog = 0, sdlog = 0.1),", "    help_effect = 0.1*Number_of_Priors", 
"    )", "", "jobhelp_new <- map_dbl(datamat2$prob_treatment, ~sample(c(0,1), 1, replace = TRUE, prob = c(1-.x, .x)))", 
"", "dataset2 <- dataset %>% mutate(", "  jobhelp = jobhelp_new,", 
"  wage = datamat2$wage_nohelp + jobhelp_new*datamat2$help_effect", 
"  )", "", "# Simulating non-ranodm assignment of treatment without CIA", 
"set.seed(456)", "", "datamat3 <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% ", 
"  select(-`(Intercept)`) %>% ", "  mutate(", "    has_priors = if_else(Number_of_Priors > 0, 1, 0),", 
"    wage_nohelp = (-0.15)*has_priors + ", "            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +", 
"            0.1*ethnicityCaucasian + ", "            (-0.05)*has_priors*ethnicityCaucasian +", 
"            rlnorm(1000, meanlog = 0, sdlog = 0.1),", "    help_effect = 0.1*Number_of_Priors", 
"    )", "prob_treatment3 <- (datamat3$wage_nohelp-min(datamat3$wage_nohelp))/max(datamat3$wage_nohelp)", 
"", "jobhelp_new3 <- map_dbl(prob_treatment3, ~sample(c(0,1), 1, replace = TRUE, prob = c(1-.x, .x)))", 
"", "dataset3 <- dataset %>% mutate(", "  jobhelp = jobhelp_new3,", 
"  wage = datamat3$wage_nohelp + jobhelp_new3*datamat3$help_effect", 
"  )", "", "", "X <- dataset %>%  select(-wage, -jobhelp) %>%  ", 
"  model.matrix(~., .) ", "X2 <- dataset2 %>%  select(-wage, -jobhelp) %>%  ", 
"  model.matrix(~., .) ", "X <- X[ , -1]", "X2 <- X2[ , -1]", 
"Y <- dataset$wage", "W <- dataset$jobhelp", "", "set.seed(234)", 
"cforest <- causal_forest(", "  X,", "  Y,", "  W,", "  num.trees = 4000,", 
"  sample.weights = NULL,", "  clusters = NULL,", "  equalize.cluster.weights = FALSE,", 
"  sample.fraction = 0.5,", "  mtry = min(ceiling(sqrt(ncol(X)) + 20), ncol(X)),", 
"  min.node.size = 10,", "  honesty = TRUE,", "  honesty.fraction = 0.5,", 
"  honesty.prune.leaves = TRUE,", "  alpha = 0.05,", "  imbalance.penalty = 0,", 
"  stabilize.splits = TRUE,", "  ci.group.size = 2,", "  tune.parameters = \"none\",", 
"  compute.oob.predictions = TRUE", ")", "", "", "npriors_val <- unique(dataset$Number_of_Priors) %>% sort()", 
"Xtest <- matrix(0, length(npriors_val), ncol(X))", "Xtest[,1] <- npriors_val", 
"", "set.seed(3456)", "cf_predict <- predict(object = cforest, ", 
"                      newdata = Xtest, ", "                      estimate.variance = TRUE) %>%", 
"  mutate(Number_of_Priors = Xtest[ ,1])", "", ""), chunk_opts = list(
    label = "setup", include = FALSE)), setup = NULL, chunks = list(
    list(label = "importance", code = "\nvariable_importance(_____)\n", 
        opts = list(label = "\"importance\"", exercise = "TRUE", 
            exercise.eval = "FALSE"), engine = "r")), code_check = NULL, 
    error_check = NULL, check = NULL, solution = NULL, tests = NULL, 
    options = list(eval = FALSE, echo = TRUE, results = "markup", 
        tidy = FALSE, tidy.opts = NULL, collapse = FALSE, prompt = FALSE, 
        comment = NA, highlight = FALSE, size = "normalsize", 
        background = "#F7F7F7", strip.white = TRUE, cache = 0, 
        cache.path = "tutorial_grf_cache/html/", cache.vars = NULL, 
        cache.lazy = TRUE, dependson = NULL, autodep = FALSE, 
        cache.rebuild = FALSE, fig.keep = "high", fig.show = "asis", 
        fig.align = "default", fig.path = "tutorial_grf_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, label = "importance", exercise = TRUE, 
        exercise.eval = FALSE, code = c("", "variable_importance(_____)", 
        ""), out.width.px = 624, out.height.px = 384, params.src = "importance, exercise=TRUE, exercise.eval=FALSE", 
        fig.num = 0, exercise.df_print = "paged", exercise.checker = "NULL"), 
    engine = "r", version = "4"), class = c("r", "tutorial_exercise"
)))
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_radio", label = "quiz_imp-1", question = structure("The most important variable that affects heterogeneity in treatment effects is:", html = TRUE, class = c("html", 
"character")), answers = list(structure(list(id = "lnr_ans_f1a4edc", 
    option = "The first predictor -- `Number_of_Priors` -- with around 76% of weighted splits attributable to this variable", 
    value = "The first predictor -- `Number_of_Priors` -- with around 76% of weighted splits attributable to this variable", 
    label = structure("The first predictor – <code>Number_of_Priors<\u002fcode> – with around 76% of weighted splits attributable to this variable", html = TRUE, class = c("html", 
    "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
"tutorial_quiz_answer")), structure(list(id = "lnr_ans_32ccdf6", 
    option = "The second predictor -- `Age_BAbove_FortyFive`  -- with (100 - 3.1)% of weighted splits  attributable to this variable", 
    value = "The second predictor -- `Age_BAbove_FortyFive`  -- with (100 - 3.1)% of weighted splits  attributable to this variable", 
    label = structure("The second predictor – <code>Age_BAbove_FortyFive<\u002fcode>  – with (100 - 3.1)% of weighted splits  attributable to this variable", html = TRUE, class = c("html", 
    "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
"tutorial_quiz_answer")), structure(list(id = "lnr_ans_56514b6", 
    option = "There is no clear most important predictor of the heterogeneity in treatment effects", 
    value = "There is no clear most important predictor of the heterogeneity in treatment effects", 
    label = structure("There is no clear most important predictor of the heterogeneity in treatment effects", html = TRUE, class = c("html", 
    "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
"tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
"character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
"character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
"character")), try_again = structure("Incorrect", html = TRUE, class = c("html", 
"character")), incorrect = structure("Incorrect", html = TRUE, class = c("html", 
"character")), message = NULL, post_message = NULL), ids = list(
    answer = "quiz_imp-1-answer", question = "quiz_imp-1"), loading = NULL, 
    random_answer_order = FALSE, allow_retry = FALSE, seed = 1373828093.86026, 
    options = list()), class = c("learnr_radio", "tutorial_question"
)), session = session)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-ate-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-ate-code-editor`)), session)
output$`tutorial-exercise-ate-output` <- renderUI({
  `tutorial-exercise-ate-result`()
})
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(label = "ate", global_setup = structure(c("library(learnr)", 
"library(DiagrammeR)", "library(grf)", "library(tidyverse)", 
"library(broom)", "", "", "", "# getting COMPAS data", "", "set.seed(111)", 
"dataset <- fairness::compas %>% ", "  filter(ethnicity == c(\"Caucasian\", \"African_American\")) %>%", 
"  mutate(ethnicity = as.factor(as.character(ethnicity))) %>%", 
"  mutate(Number_of_Priors = Number_of_Priors - min(Number_of_Priors)) %>% ", 
"  select(-probability,-predicted, -Two_yr_Recidivism) %>%", 
"  sample_n(1000)", "", "# Simulating data", "set.seed(112)", 
"dataset <- dataset %>% mutate(", "  jobhelp = sample(c(0,1), 1000, replace = TRUE, prob = c(0.5, 0.5)),", 
"  )", "", " ", "", "datamat <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% ", 
"  select(-`(Intercept)`) %>% ", "  mutate(", "    has_priors = if_else(Number_of_Priors > 0, 1, 0),", 
"    wage_nohelp = (-0.15)*has_priors + ", "            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +", 
"            0.1*ethnicityCaucasian + ", "            (-0.05)*has_priors*ethnicityCaucasian +", 
"            rlnorm(1000, meanlog = 0, sdlog = 0.1),", "    help_effect = 0.1*Number_of_Priors,", 
"    wage = wage_nohelp + help_effect*jobhelp", "    )", "", 
"# ggplot(aes(x = wage, color = as.factor(jobhelp)), data = datamat) + geom_density()", 
"# ggplot(aes(x = Number_of_Priors, y = help_effect), data = datamat) + geom_point()", 
"", "dataset <- dataset %>% ", "  mutate(wage = datamat$wage)", 
"", "# Simulating non-ranodm assignment of treatment", "set.seed(123)", 
"", "datamat2 <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% ", 
"  select(-`(Intercept)`) %>% ", "  mutate(", "    has_priors = if_else(Number_of_Priors > 0, 1, 0),", 
"    prob_treatment =  0.5 + 0.3*ethnicityCaucasian + (-0.05)*has_priors*ethnicityCaucasian + (-0.1)*Age_Above_FourtyFiveyes - 0.05*Number_of_Priors -  0.05*Number_of_Priors*ethnicityCaucasian + 0.1*Age_Above_FourtyFiveyes*Number_of_Priors,", 
"    wage_nohelp = (-0.15)*has_priors + ", "            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +", 
"            0.1*ethnicityCaucasian + ", "            (-0.05)*has_priors*ethnicityCaucasian +", 
"            rlnorm(1000, meanlog = 0, sdlog = 0.1),", "    help_effect = 0.1*Number_of_Priors", 
"    )", "", "jobhelp_new <- map_dbl(datamat2$prob_treatment, ~sample(c(0,1), 1, replace = TRUE, prob = c(1-.x, .x)))", 
"", "dataset2 <- dataset %>% mutate(", "  jobhelp = jobhelp_new,", 
"  wage = datamat2$wage_nohelp + jobhelp_new*datamat2$help_effect", 
"  )", "", "# Simulating non-ranodm assignment of treatment without CIA", 
"set.seed(456)", "", "datamat3 <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% ", 
"  select(-`(Intercept)`) %>% ", "  mutate(", "    has_priors = if_else(Number_of_Priors > 0, 1, 0),", 
"    wage_nohelp = (-0.15)*has_priors + ", "            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +", 
"            0.1*ethnicityCaucasian + ", "            (-0.05)*has_priors*ethnicityCaucasian +", 
"            rlnorm(1000, meanlog = 0, sdlog = 0.1),", "    help_effect = 0.1*Number_of_Priors", 
"    )", "prob_treatment3 <- (datamat3$wage_nohelp-min(datamat3$wage_nohelp))/max(datamat3$wage_nohelp)", 
"", "jobhelp_new3 <- map_dbl(prob_treatment3, ~sample(c(0,1), 1, replace = TRUE, prob = c(1-.x, .x)))", 
"", "dataset3 <- dataset %>% mutate(", "  jobhelp = jobhelp_new3,", 
"  wage = datamat3$wage_nohelp + jobhelp_new3*datamat3$help_effect", 
"  )", "", "", "X <- dataset %>%  select(-wage, -jobhelp) %>%  ", 
"  model.matrix(~., .) ", "X2 <- dataset2 %>%  select(-wage, -jobhelp) %>%  ", 
"  model.matrix(~., .) ", "X <- X[ , -1]", "X2 <- X2[ , -1]", 
"Y <- dataset$wage", "W <- dataset$jobhelp", "", "set.seed(234)", 
"cforest <- causal_forest(", "  X,", "  Y,", "  W,", "  num.trees = 4000,", 
"  sample.weights = NULL,", "  clusters = NULL,", "  equalize.cluster.weights = FALSE,", 
"  sample.fraction = 0.5,", "  mtry = min(ceiling(sqrt(ncol(X)) + 20), ncol(X)),", 
"  min.node.size = 10,", "  honesty = TRUE,", "  honesty.fraction = 0.5,", 
"  honesty.prune.leaves = TRUE,", "  alpha = 0.05,", "  imbalance.penalty = 0,", 
"  stabilize.splits = TRUE,", "  ci.group.size = 2,", "  tune.parameters = \"none\",", 
"  compute.oob.predictions = TRUE", ")", "", "", "npriors_val <- unique(dataset$Number_of_Priors) %>% sort()", 
"Xtest <- matrix(0, length(npriors_val), ncol(X))", "Xtest[,1] <- npriors_val", 
"", "set.seed(3456)", "cf_predict <- predict(object = cforest, ", 
"                      newdata = Xtest, ", "                      estimate.variance = TRUE) %>%", 
"  mutate(Number_of_Priors = Xtest[ ,1])", "", ""), chunk_opts = list(
    label = "setup", include = FALSE)), setup = NULL, chunks = list(
    list(label = "ate", code = "set.seed(456)\naverage_treatment_effect(cforest, target.sample = \"all\")", 
        opts = list(label = "\"ate\"", exercise = "TRUE", exercise.eval = "TRUE"), 
        engine = "r")), code_check = NULL, error_check = NULL, 
    check = NULL, solution = NULL, tests = NULL, options = list(
        eval = TRUE, echo = TRUE, results = "markup", tidy = FALSE, 
        tidy.opts = NULL, collapse = FALSE, prompt = FALSE, comment = NA, 
        highlight = FALSE, size = "normalsize", background = "#F7F7F7", 
        strip.white = TRUE, cache = 0, cache.path = "tutorial_grf_cache/html/", 
        cache.vars = NULL, cache.lazy = TRUE, dependson = NULL, 
        autodep = FALSE, cache.rebuild = FALSE, fig.keep = "high", 
        fig.show = "asis", fig.align = "default", fig.path = "tutorial_grf_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, label = "ate", exercise = TRUE, exercise.eval = TRUE, 
        code = c("set.seed(456)", "average_treatment_effect(cforest, target.sample = \"all\")"
        ), out.width.px = 624, out.height.px = 384, params.src = "ate, exercise = TRUE, exercise.eval = TRUE", 
        fig.alt = NULL, fig.num = 0, exercise.df_print = "paged", 
        exercise.checker = "NULL"), engine = "r", version = "4"), class = c("r", 
"tutorial_exercise")))
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_radio", label = "quiz_ate-1", question = structure("What does an ATE of 0.071 mean for the average monthly income of ex-offenders in the next three years?", html = TRUE, class = c("html", 
"character")), answers = list(structure(list(id = "lnr_ans_16ecda9", 
    option = "The mandatory job assistance program increases on average the monthly income of the treated by 7.1%.", 
    value = "The mandatory job assistance program increases on average the monthly income of the treated by 7.1%.", 
    label = structure("The mandatory job assistance program increases on average the monthly income of the treated by 7.1%.", html = TRUE, class = c("html", 
    "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
"tutorial_quiz_answer")), structure(list(id = "lnr_ans_c9d471c", 
    option = "The mandatory job assistance program increases on average the monthly income  of the treated by 71 USD", 
    value = "The mandatory job assistance program increases on average the monthly income  of the treated by 71 USD", 
    label = structure("The mandatory job assistance program increases on average the monthly income  of the treated by 71 USD", html = TRUE, class = c("html", 
    "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
"tutorial_quiz_answer")), structure(list(id = "lnr_ans_3ccd03b", 
    option = "The mandatory job assistance program increases the average monthly income growth rate  of the treated by 7.1 percentage points", 
    value = "The mandatory job assistance program increases the average monthly income growth rate  of the treated by 7.1 percentage points", 
    label = structure("The mandatory job assistance program increases the average monthly income growth rate  of the treated by 7.1 percentage points", html = TRUE, class = c("html", 
    "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
"tutorial_quiz_answer")), structure(list(id = "lnr_ans_d7d6880", 
    option = "The mandatory job assistance program explains 7.1% of the average monthly income gap between the treated and the control group", 
    value = "The mandatory job assistance program explains 7.1% of the average monthly income gap between the treated and the control group", 
    label = structure("The mandatory job assistance program explains 7.1% of the average monthly income gap between the treated and the control group", html = TRUE, class = c("html", 
    "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
"tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
"character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
"character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
"character")), try_again = structure("Incorrect", html = TRUE, class = c("html", 
"character")), incorrect = structure("Incorrect", html = TRUE, class = c("html", 
"character")), message = NULL, post_message = NULL), ids = list(
    answer = "quiz_ate-1-answer", question = "quiz_ate-1"), loading = NULL, 
    random_answer_order = FALSE, allow_retry = FALSE, seed = 544366432.24651, 
    options = list()), class = c("learnr_radio", "tutorial_question"
)), session = session)
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_checkbox", label = "quiz_ateatt-1", 
    question = structure("The ATE is very close to ATT. Why is it so?", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_f968b5a", 
        option = "It is just a coincidence", value = "It is just a coincidence", 
        label = structure("It is just a coincidence", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_f2c3dbf", 
        option = "We expected it to be so", value = "We expected it to be so", 
        label = structure("We expected it to be so", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_f01e3d6", 
        option = "Thanks to the randomized treatment, treated and controls have on average the same treatment effects, i.e., the groups are truly balanced", 
        value = "Thanks to the randomized treatment, treated and controls have on average the same treatment effects, i.e., the groups are truly balanced", 
        label = structure("Thanks to the randomized treatment, treated and controls have on average the same treatment effects, i.e., the groups are truly balanced", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
    "character")), try_again = structure("Incorrect. Be sure to select every correct answer.", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Incorrect", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "quiz_ateatt-1-answer", question = "quiz_ateatt-1"), 
    loading = NULL, random_answer_order = FALSE, allow_retry = FALSE, 
    seed = 640968256.201526, options = list()), class = c("learnr_checkbox", 
"tutorial_question")), session = session)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-ols-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-ols-code-editor`)), session)
output$`tutorial-exercise-ols-output` <- renderUI({
  `tutorial-exercise-ols-result`()
})
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(label = "ols", global_setup = structure(c("library(learnr)", 
"library(DiagrammeR)", "library(grf)", "library(tidyverse)", 
"library(broom)", "", "", "", "# getting COMPAS data", "", "set.seed(111)", 
"dataset <- fairness::compas %>% ", "  filter(ethnicity == c(\"Caucasian\", \"African_American\")) %>%", 
"  mutate(ethnicity = as.factor(as.character(ethnicity))) %>%", 
"  mutate(Number_of_Priors = Number_of_Priors - min(Number_of_Priors)) %>% ", 
"  select(-probability,-predicted, -Two_yr_Recidivism) %>%", 
"  sample_n(1000)", "", "# Simulating data", "set.seed(112)", 
"dataset <- dataset %>% mutate(", "  jobhelp = sample(c(0,1), 1000, replace = TRUE, prob = c(0.5, 0.5)),", 
"  )", "", " ", "", "datamat <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% ", 
"  select(-`(Intercept)`) %>% ", "  mutate(", "    has_priors = if_else(Number_of_Priors > 0, 1, 0),", 
"    wage_nohelp = (-0.15)*has_priors + ", "            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +", 
"            0.1*ethnicityCaucasian + ", "            (-0.05)*has_priors*ethnicityCaucasian +", 
"            rlnorm(1000, meanlog = 0, sdlog = 0.1),", "    help_effect = 0.1*Number_of_Priors,", 
"    wage = wage_nohelp + help_effect*jobhelp", "    )", "", 
"# ggplot(aes(x = wage, color = as.factor(jobhelp)), data = datamat) + geom_density()", 
"# ggplot(aes(x = Number_of_Priors, y = help_effect), data = datamat) + geom_point()", 
"", "dataset <- dataset %>% ", "  mutate(wage = datamat$wage)", 
"", "# Simulating non-ranodm assignment of treatment", "set.seed(123)", 
"", "datamat2 <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% ", 
"  select(-`(Intercept)`) %>% ", "  mutate(", "    has_priors = if_else(Number_of_Priors > 0, 1, 0),", 
"    prob_treatment =  0.5 + 0.3*ethnicityCaucasian + (-0.05)*has_priors*ethnicityCaucasian + (-0.1)*Age_Above_FourtyFiveyes - 0.05*Number_of_Priors -  0.05*Number_of_Priors*ethnicityCaucasian + 0.1*Age_Above_FourtyFiveyes*Number_of_Priors,", 
"    wage_nohelp = (-0.15)*has_priors + ", "            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +", 
"            0.1*ethnicityCaucasian + ", "            (-0.05)*has_priors*ethnicityCaucasian +", 
"            rlnorm(1000, meanlog = 0, sdlog = 0.1),", "    help_effect = 0.1*Number_of_Priors", 
"    )", "", "jobhelp_new <- map_dbl(datamat2$prob_treatment, ~sample(c(0,1), 1, replace = TRUE, prob = c(1-.x, .x)))", 
"", "dataset2 <- dataset %>% mutate(", "  jobhelp = jobhelp_new,", 
"  wage = datamat2$wage_nohelp + jobhelp_new*datamat2$help_effect", 
"  )", "", "# Simulating non-ranodm assignment of treatment without CIA", 
"set.seed(456)", "", "datamat3 <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% ", 
"  select(-`(Intercept)`) %>% ", "  mutate(", "    has_priors = if_else(Number_of_Priors > 0, 1, 0),", 
"    wage_nohelp = (-0.15)*has_priors + ", "            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +", 
"            0.1*ethnicityCaucasian + ", "            (-0.05)*has_priors*ethnicityCaucasian +", 
"            rlnorm(1000, meanlog = 0, sdlog = 0.1),", "    help_effect = 0.1*Number_of_Priors", 
"    )", "prob_treatment3 <- (datamat3$wage_nohelp-min(datamat3$wage_nohelp))/max(datamat3$wage_nohelp)", 
"", "jobhelp_new3 <- map_dbl(prob_treatment3, ~sample(c(0,1), 1, replace = TRUE, prob = c(1-.x, .x)))", 
"", "dataset3 <- dataset %>% mutate(", "  jobhelp = jobhelp_new3,", 
"  wage = datamat3$wage_nohelp + jobhelp_new3*datamat3$help_effect", 
"  )", "", "", "X <- dataset %>%  select(-wage, -jobhelp) %>%  ", 
"  model.matrix(~., .) ", "X2 <- dataset2 %>%  select(-wage, -jobhelp) %>%  ", 
"  model.matrix(~., .) ", "X <- X[ , -1]", "X2 <- X2[ , -1]", 
"Y <- dataset$wage", "W <- dataset$jobhelp", "", "set.seed(234)", 
"cforest <- causal_forest(", "  X,", "  Y,", "  W,", "  num.trees = 4000,", 
"  sample.weights = NULL,", "  clusters = NULL,", "  equalize.cluster.weights = FALSE,", 
"  sample.fraction = 0.5,", "  mtry = min(ceiling(sqrt(ncol(X)) + 20), ncol(X)),", 
"  min.node.size = 10,", "  honesty = TRUE,", "  honesty.fraction = 0.5,", 
"  honesty.prune.leaves = TRUE,", "  alpha = 0.05,", "  imbalance.penalty = 0,", 
"  stabilize.splits = TRUE,", "  ci.group.size = 2,", "  tune.parameters = \"none\",", 
"  compute.oob.predictions = TRUE", ")", "", "", "npriors_val <- unique(dataset$Number_of_Priors) %>% sort()", 
"Xtest <- matrix(0, length(npriors_val), ncol(X))", "Xtest[,1] <- npriors_val", 
"", "set.seed(3456)", "cf_predict <- predict(object = cforest, ", 
"                      newdata = Xtest, ", "                      estimate.variance = TRUE) %>%", 
"  mutate(Number_of_Priors = Xtest[ ,1])", "", ""), chunk_opts = list(
    label = "setup", include = FALSE)), setup = NULL, chunks = list(
    list(label = "ols", code = "", opts = list(label = "\"ols\"", 
        exercise = "TRUE", exercise.eval = "FALSE"), engine = "r")), 
    code_check = NULL, error_check = NULL, check = NULL, solution = NULL, 
    tests = NULL, options = list(eval = FALSE, echo = TRUE, results = "markup", 
        tidy = FALSE, tidy.opts = NULL, collapse = FALSE, prompt = FALSE, 
        comment = NA, highlight = FALSE, size = "normalsize", 
        background = "#F7F7F7", strip.white = TRUE, cache = 0, 
        cache.path = "tutorial_grf_cache/html/", cache.vars = NULL, 
        cache.lazy = TRUE, dependson = NULL, autodep = FALSE, 
        cache.rebuild = FALSE, fig.keep = "high", fig.show = "asis", 
        fig.align = "default", fig.path = "tutorial_grf_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, label = "ols", exercise = TRUE, exercise.eval = FALSE, 
        code = "", out.width.px = 624, out.height.px = 384, params.src = "ols, exercise = TRUE, exercise.eval=FALSE", 
        fig.num = 0L, exercise.df_print = "paged", exercise.checker = "NULL"), 
    engine = "r", version = "4"), class = c("r", "tutorial_exercise"
)))
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_radio", label = "quiz_ols-1", question = structure("The ATE estimated by OLS", html = TRUE, class = c("html", 
"character")), answers = list(structure(list(id = "lnr_ans_6898b0e", 
    option = "is much higher than the ATE estimate by the forest", 
    value = "is much higher than the ATE estimate by the forest", 
    label = structure("is much higher than the ATE estimate by the forest", html = TRUE, class = c("html", 
    "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
"tutorial_quiz_answer")), structure(list(id = "lnr_ans_5d6cb4", 
    option = "is broadly in line with the ATE estimate by the forest", 
    value = "is broadly in line with the ATE estimate by the forest", 
    label = structure("is broadly in line with the ATE estimate by the forest", html = TRUE, class = c("html", 
    "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
"tutorial_quiz_answer")), structure(list(id = "lnr_ans_d8f8a92", 
    option = "is much lower than the ATE estimate by the forest", 
    value = "is much lower than the ATE estimate by the forest", 
    label = structure("is much lower than the ATE estimate by the forest", html = TRUE, class = c("html", 
    "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
"tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
"character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
"character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
"character")), try_again = structure("Incorrect", html = TRUE, class = c("html", 
"character")), incorrect = structure("Incorrect", html = TRUE, class = c("html", 
"character")), message = NULL, post_message = NULL), ids = list(
    answer = "quiz_ols-1-answer", question = "quiz_ols-1"), loading = NULL, 
    random_answer_order = FALSE, allow_retry = FALSE, seed = 946407085.059295, 
    options = list()), class = c("learnr_radio", "tutorial_question"
)), session = session)
</script>


<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-calibration-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-calibration-code-editor`)), session)
output$`tutorial-exercise-calibration-output` <- renderUI({
  `tutorial-exercise-calibration-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(label = "calibration", global_setup = structure(c("library(learnr)", 
"library(DiagrammeR)", "library(grf)", "library(tidyverse)", 
"library(broom)", "", "", "", "# getting COMPAS data", "", "set.seed(111)", 
"dataset <- fairness::compas %>% ", "  filter(ethnicity == c(\"Caucasian\", \"African_American\")) %>%", 
"  mutate(ethnicity = as.factor(as.character(ethnicity))) %>%", 
"  mutate(Number_of_Priors = Number_of_Priors - min(Number_of_Priors)) %>% ", 
"  select(-probability,-predicted, -Two_yr_Recidivism) %>%", 
"  sample_n(1000)", "", "# Simulating data", "set.seed(112)", 
"dataset <- dataset %>% mutate(", "  jobhelp = sample(c(0,1), 1000, replace = TRUE, prob = c(0.5, 0.5)),", 
"  )", "", " ", "", "datamat <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% ", 
"  select(-`(Intercept)`) %>% ", "  mutate(", "    has_priors = if_else(Number_of_Priors > 0, 1, 0),", 
"    wage_nohelp = (-0.15)*has_priors + ", "            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +", 
"            0.1*ethnicityCaucasian + ", "            (-0.05)*has_priors*ethnicityCaucasian +", 
"            rlnorm(1000, meanlog = 0, sdlog = 0.1),", "    help_effect = 0.1*Number_of_Priors,", 
"    wage = wage_nohelp + help_effect*jobhelp", "    )", "", 
"# ggplot(aes(x = wage, color = as.factor(jobhelp)), data = datamat) + geom_density()", 
"# ggplot(aes(x = Number_of_Priors, y = help_effect), data = datamat) + geom_point()", 
"", "dataset <- dataset %>% ", "  mutate(wage = datamat$wage)", 
"", "# Simulating non-ranodm assignment of treatment", "set.seed(123)", 
"", "datamat2 <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% ", 
"  select(-`(Intercept)`) %>% ", "  mutate(", "    has_priors = if_else(Number_of_Priors > 0, 1, 0),", 
"    prob_treatment =  0.5 + 0.3*ethnicityCaucasian + (-0.05)*has_priors*ethnicityCaucasian + (-0.1)*Age_Above_FourtyFiveyes - 0.05*Number_of_Priors -  0.05*Number_of_Priors*ethnicityCaucasian + 0.1*Age_Above_FourtyFiveyes*Number_of_Priors,", 
"    wage_nohelp = (-0.15)*has_priors + ", "            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +", 
"            0.1*ethnicityCaucasian + ", "            (-0.05)*has_priors*ethnicityCaucasian +", 
"            rlnorm(1000, meanlog = 0, sdlog = 0.1),", "    help_effect = 0.1*Number_of_Priors", 
"    )", "", "jobhelp_new <- map_dbl(datamat2$prob_treatment, ~sample(c(0,1), 1, replace = TRUE, prob = c(1-.x, .x)))", 
"", "dataset2 <- dataset %>% mutate(", "  jobhelp = jobhelp_new,", 
"  wage = datamat2$wage_nohelp + jobhelp_new*datamat2$help_effect", 
"  )", "", "# Simulating non-ranodm assignment of treatment without CIA", 
"set.seed(456)", "", "datamat3 <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% ", 
"  select(-`(Intercept)`) %>% ", "  mutate(", "    has_priors = if_else(Number_of_Priors > 0, 1, 0),", 
"    wage_nohelp = (-0.15)*has_priors + ", "            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +", 
"            0.1*ethnicityCaucasian + ", "            (-0.05)*has_priors*ethnicityCaucasian +", 
"            rlnorm(1000, meanlog = 0, sdlog = 0.1),", "    help_effect = 0.1*Number_of_Priors", 
"    )", "prob_treatment3 <- (datamat3$wage_nohelp-min(datamat3$wage_nohelp))/max(datamat3$wage_nohelp)", 
"", "jobhelp_new3 <- map_dbl(prob_treatment3, ~sample(c(0,1), 1, replace = TRUE, prob = c(1-.x, .x)))", 
"", "dataset3 <- dataset %>% mutate(", "  jobhelp = jobhelp_new3,", 
"  wage = datamat3$wage_nohelp + jobhelp_new3*datamat3$help_effect", 
"  )", "", "", "X <- dataset %>%  select(-wage, -jobhelp) %>%  ", 
"  model.matrix(~., .) ", "X2 <- dataset2 %>%  select(-wage, -jobhelp) %>%  ", 
"  model.matrix(~., .) ", "X <- X[ , -1]", "X2 <- X2[ , -1]", 
"Y <- dataset$wage", "W <- dataset$jobhelp", "", "set.seed(234)", 
"cforest <- causal_forest(", "  X,", "  Y,", "  W,", "  num.trees = 4000,", 
"  sample.weights = NULL,", "  clusters = NULL,", "  equalize.cluster.weights = FALSE,", 
"  sample.fraction = 0.5,", "  mtry = min(ceiling(sqrt(ncol(X)) + 20), ncol(X)),", 
"  min.node.size = 10,", "  honesty = TRUE,", "  honesty.fraction = 0.5,", 
"  honesty.prune.leaves = TRUE,", "  alpha = 0.05,", "  imbalance.penalty = 0,", 
"  stabilize.splits = TRUE,", "  ci.group.size = 2,", "  tune.parameters = \"none\",", 
"  compute.oob.predictions = TRUE", ")", "", "", "npriors_val <- unique(dataset$Number_of_Priors) %>% sort()", 
"Xtest <- matrix(0, length(npriors_val), ncol(X))", "Xtest[,1] <- npriors_val", 
"", "set.seed(3456)", "cf_predict <- predict(object = cforest, ", 
"                      newdata = Xtest, ", "                      estimate.variance = TRUE) %>%", 
"  mutate(Number_of_Priors = Xtest[ ,1])", "", ""), chunk_opts = list(
    label = "setup", include = FALSE)), setup = NULL, chunks = list(
    list(label = "calibration", code = "test_calibration(_______)\n", 
        opts = list(label = "\"calibration\"", exercise = "TRUE", 
            exercise.eval = "FALSE"), engine = "r")), code_check = NULL, 
    error_check = NULL, check = NULL, solution = NULL, tests = NULL, 
    options = list(eval = FALSE, echo = TRUE, results = "markup", 
        tidy = FALSE, tidy.opts = NULL, collapse = FALSE, prompt = FALSE, 
        comment = NA, highlight = FALSE, size = "normalsize", 
        background = "#F7F7F7", strip.white = TRUE, cache = 0, 
        cache.path = "tutorial_grf_cache/html/", cache.vars = NULL, 
        cache.lazy = TRUE, dependson = NULL, autodep = FALSE, 
        cache.rebuild = FALSE, fig.keep = "high", fig.show = "asis", 
        fig.align = "default", fig.path = "tutorial_grf_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, label = "calibration", exercise = TRUE, 
        exercise.eval = FALSE, code = c("test_calibration(_______)", 
        ""), out.width.px = 624, out.height.px = 384, params.src = "calibration, exercise = TRUE, exercise.eval=FALSE", 
        fig.num = 0, exercise.df_print = "paged", exercise.checker = "NULL"), 
    engine = "r", version = "4"), class = c("r", "tutorial_exercise"
)))
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_checkbox", label = "quiz_calibration1-1", 
    question = structure("Based on the results of the test you can conclude that:", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_fb2efa1", 
        option = "The causal forest does not perform better than just a constant treatment effect model. We cannot reject the null of no heterogeneity in treatment effects.", 
        value = "The causal forest does not perform better than just a constant treatment effect model. We cannot reject the null of no heterogeneity in treatment effects.", 
        label = structure("The causal forest does not perform better than just a constant treatment effect model. We cannot reject the null of no heterogeneity in treatment effects.", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_fe3ab9d", 
        option = "The causal forest performs better than just a constant treatment effect model, i.e., it captures some heterogeneity in treatment effects", 
        value = "The causal forest performs better than just a constant treatment effect model, i.e., it captures some heterogeneity in treatment effects", 
        label = structure("The causal forest performs better than just a constant treatment effect model, i.e., it captures some heterogeneity in treatment effects", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_1eb2df7", 
        option = "We can reject the null of no heterogeneity", 
        value = "We can reject the null of no heterogeneity", 
        label = structure("We can reject the null of no heterogeneity", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_6615fa0", 
        option = "The mean forest prediction  is correct", value = "The mean forest prediction  is correct", 
        label = structure("The mean forest prediction  is correct", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_bb59328", 
        option = "The mean forest prediction  is incorrect", 
        value = "The mean forest prediction  is incorrect", label = structure("The mean forest prediction  is incorrect", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
    "character")), try_again = structure("Incorrect. Be sure to select every correct answer.", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Incorrect", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "quiz_calibration1-1-answer", question = "quiz_calibration1-1"), 
    loading = NULL, random_answer_order = FALSE, allow_retry = FALSE, 
    seed = 350115274.336965, options = list()), class = c("learnr_checkbox", 
"tutorial_question")), session = session)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-cate_ethnicity-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-cate_ethnicity-code-editor`)), session)
output$`tutorial-exercise-cate_ethnicity-output` <- renderUI({
  `tutorial-exercise-cate_ethnicity-result`()
})
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(label = "cate_ethnicity", global_setup = structure(c("library(learnr)", 
"library(DiagrammeR)", "library(grf)", "library(tidyverse)", 
"library(broom)", "", "", "", "# getting COMPAS data", "", "set.seed(111)", 
"dataset <- fairness::compas %>% ", "  filter(ethnicity == c(\"Caucasian\", \"African_American\")) %>%", 
"  mutate(ethnicity = as.factor(as.character(ethnicity))) %>%", 
"  mutate(Number_of_Priors = Number_of_Priors - min(Number_of_Priors)) %>% ", 
"  select(-probability,-predicted, -Two_yr_Recidivism) %>%", 
"  sample_n(1000)", "", "# Simulating data", "set.seed(112)", 
"dataset <- dataset %>% mutate(", "  jobhelp = sample(c(0,1), 1000, replace = TRUE, prob = c(0.5, 0.5)),", 
"  )", "", " ", "", "datamat <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% ", 
"  select(-`(Intercept)`) %>% ", "  mutate(", "    has_priors = if_else(Number_of_Priors > 0, 1, 0),", 
"    wage_nohelp = (-0.15)*has_priors + ", "            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +", 
"            0.1*ethnicityCaucasian + ", "            (-0.05)*has_priors*ethnicityCaucasian +", 
"            rlnorm(1000, meanlog = 0, sdlog = 0.1),", "    help_effect = 0.1*Number_of_Priors,", 
"    wage = wage_nohelp + help_effect*jobhelp", "    )", "", 
"# ggplot(aes(x = wage, color = as.factor(jobhelp)), data = datamat) + geom_density()", 
"# ggplot(aes(x = Number_of_Priors, y = help_effect), data = datamat) + geom_point()", 
"", "dataset <- dataset %>% ", "  mutate(wage = datamat$wage)", 
"", "# Simulating non-ranodm assignment of treatment", "set.seed(123)", 
"", "datamat2 <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% ", 
"  select(-`(Intercept)`) %>% ", "  mutate(", "    has_priors = if_else(Number_of_Priors > 0, 1, 0),", 
"    prob_treatment =  0.5 + 0.3*ethnicityCaucasian + (-0.05)*has_priors*ethnicityCaucasian + (-0.1)*Age_Above_FourtyFiveyes - 0.05*Number_of_Priors -  0.05*Number_of_Priors*ethnicityCaucasian + 0.1*Age_Above_FourtyFiveyes*Number_of_Priors,", 
"    wage_nohelp = (-0.15)*has_priors + ", "            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +", 
"            0.1*ethnicityCaucasian + ", "            (-0.05)*has_priors*ethnicityCaucasian +", 
"            rlnorm(1000, meanlog = 0, sdlog = 0.1),", "    help_effect = 0.1*Number_of_Priors", 
"    )", "", "jobhelp_new <- map_dbl(datamat2$prob_treatment, ~sample(c(0,1), 1, replace = TRUE, prob = c(1-.x, .x)))", 
"", "dataset2 <- dataset %>% mutate(", "  jobhelp = jobhelp_new,", 
"  wage = datamat2$wage_nohelp + jobhelp_new*datamat2$help_effect", 
"  )", "", "# Simulating non-ranodm assignment of treatment without CIA", 
"set.seed(456)", "", "datamat3 <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% ", 
"  select(-`(Intercept)`) %>% ", "  mutate(", "    has_priors = if_else(Number_of_Priors > 0, 1, 0),", 
"    wage_nohelp = (-0.15)*has_priors + ", "            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +", 
"            0.1*ethnicityCaucasian + ", "            (-0.05)*has_priors*ethnicityCaucasian +", 
"            rlnorm(1000, meanlog = 0, sdlog = 0.1),", "    help_effect = 0.1*Number_of_Priors", 
"    )", "prob_treatment3 <- (datamat3$wage_nohelp-min(datamat3$wage_nohelp))/max(datamat3$wage_nohelp)", 
"", "jobhelp_new3 <- map_dbl(prob_treatment3, ~sample(c(0,1), 1, replace = TRUE, prob = c(1-.x, .x)))", 
"", "dataset3 <- dataset %>% mutate(", "  jobhelp = jobhelp_new3,", 
"  wage = datamat3$wage_nohelp + jobhelp_new3*datamat3$help_effect", 
"  )", "", "", "X <- dataset %>%  select(-wage, -jobhelp) %>%  ", 
"  model.matrix(~., .) ", "X2 <- dataset2 %>%  select(-wage, -jobhelp) %>%  ", 
"  model.matrix(~., .) ", "X <- X[ , -1]", "X2 <- X2[ , -1]", 
"Y <- dataset$wage", "W <- dataset$jobhelp", "", "set.seed(234)", 
"cforest <- causal_forest(", "  X,", "  Y,", "  W,", "  num.trees = 4000,", 
"  sample.weights = NULL,", "  clusters = NULL,", "  equalize.cluster.weights = FALSE,", 
"  sample.fraction = 0.5,", "  mtry = min(ceiling(sqrt(ncol(X)) + 20), ncol(X)),", 
"  min.node.size = 10,", "  honesty = TRUE,", "  honesty.fraction = 0.5,", 
"  honesty.prune.leaves = TRUE,", "  alpha = 0.05,", "  imbalance.penalty = 0,", 
"  stabilize.splits = TRUE,", "  ci.group.size = 2,", "  tune.parameters = \"none\",", 
"  compute.oob.predictions = TRUE", ")", "", "", "npriors_val <- unique(dataset$Number_of_Priors) %>% sort()", 
"Xtest <- matrix(0, length(npriors_val), ncol(X))", "Xtest[,1] <- npriors_val", 
"", "set.seed(3456)", "cf_predict <- predict(object = cforest, ", 
"                      newdata = Xtest, ", "                      estimate.variance = TRUE) %>%", 
"  mutate(Number_of_Priors = Xtest[ ,1])", "", ""), chunk_opts = list(
    label = "setup", include = FALSE)), setup = NULL, chunks = list(
    list(label = "cate_ethnicity", code = "average_treatment_effect(cforest, target.sample = \"all\", subset = X[ , \"ethnicityCaucasian\"] == 1)", 
        opts = list(label = "\"cate_ethnicity\"", exercise = "TRUE", 
            exercise.eval = "TRUE"), engine = "r")), code_check = NULL, 
    error_check = NULL, check = NULL, solution = NULL, tests = NULL, 
    options = list(eval = TRUE, echo = TRUE, results = "markup", 
        tidy = FALSE, tidy.opts = NULL, collapse = FALSE, prompt = FALSE, 
        comment = NA, highlight = FALSE, size = "normalsize", 
        background = "#F7F7F7", strip.white = TRUE, cache = 0, 
        cache.path = "tutorial_grf_cache/html/", cache.vars = NULL, 
        cache.lazy = TRUE, dependson = NULL, autodep = FALSE, 
        cache.rebuild = FALSE, fig.keep = "high", fig.show = "asis", 
        fig.align = "default", fig.path = "tutorial_grf_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, label = "cate_ethnicity", exercise = TRUE, 
        exercise.eval = TRUE, code = "average_treatment_effect(cforest, target.sample = \"all\", subset = X[ , \"ethnicityCaucasian\"] == 1)", 
        out.width.px = 624, out.height.px = 384, params.src = "cate_ethnicity, exercise = TRUE, exercise.eval = TRUE", 
        fig.alt = NULL, fig.num = 0, exercise.df_print = "paged", 
        exercise.checker = "NULL"), engine = "r", version = "4"), class = c("r", 
"tutorial_exercise")))
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_radio", label = "quiz_ethnate-1", 
    question = structure("As you can see ATE for African-American ex-offenders is 50% higher than the ATE for Caucasian ex-offenders. Combining this result with  the results of the previous section which revealed the variables that are important for the heterogeneity in TE, we can surmise that:", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_b0b429c", 
        option = "The ethnicity is in fact one of the most important factors determining the heterogeneity in TE", 
        value = "The ethnicity is in fact one of the most important factors determining the heterogeneity in TE", 
        label = structure("The ethnicity is in fact one of the most important factors determining the heterogeneity in TE", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_82af7a3", 
        option = "Black and white ex-offenders probably on average differ in the number of priors -- the most important factor determining the heterogeneity in TE --  resulting that their ATE to be different too.", 
        value = "Black and white ex-offenders probably on average differ in the number of priors -- the most important factor determining the heterogeneity in TE --  resulting that their ATE to be different too.", 
        label = structure("Black and white ex-offenders probably on average differ in the number of priors – the most important factor determining the heterogeneity in TE –  resulting that their ATE to be different too.", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_f343c16", 
        option = "There is no clear hypothesis for such difference", 
        value = "There is no clear hypothesis for such difference", 
        label = structure("There is no clear hypothesis for such difference", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
    "character")), try_again = structure("Incorrect", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Incorrect", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "quiz_ethnate-1-answer", question = "quiz_ethnate-1"), 
    loading = NULL, random_answer_order = FALSE, allow_retry = FALSE, 
    seed = 1302468462.39349, options = list()), class = c("learnr_radio", 
"tutorial_question")), session = session)
</script>


<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-createXtest-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-createXtest-code-editor`)), session)
output$`tutorial-exercise-createXtest-output` <- renderUI({
  `tutorial-exercise-createXtest-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(label = "createXtest", global_setup = structure(c("library(learnr)", 
"library(DiagrammeR)", "library(grf)", "library(tidyverse)", 
"library(broom)", "", "", "", "# getting COMPAS data", "", "set.seed(111)", 
"dataset <- fairness::compas %>% ", "  filter(ethnicity == c(\"Caucasian\", \"African_American\")) %>%", 
"  mutate(ethnicity = as.factor(as.character(ethnicity))) %>%", 
"  mutate(Number_of_Priors = Number_of_Priors - min(Number_of_Priors)) %>% ", 
"  select(-probability,-predicted, -Two_yr_Recidivism) %>%", 
"  sample_n(1000)", "", "# Simulating data", "set.seed(112)", 
"dataset <- dataset %>% mutate(", "  jobhelp = sample(c(0,1), 1000, replace = TRUE, prob = c(0.5, 0.5)),", 
"  )", "", " ", "", "datamat <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% ", 
"  select(-`(Intercept)`) %>% ", "  mutate(", "    has_priors = if_else(Number_of_Priors > 0, 1, 0),", 
"    wage_nohelp = (-0.15)*has_priors + ", "            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +", 
"            0.1*ethnicityCaucasian + ", "            (-0.05)*has_priors*ethnicityCaucasian +", 
"            rlnorm(1000, meanlog = 0, sdlog = 0.1),", "    help_effect = 0.1*Number_of_Priors,", 
"    wage = wage_nohelp + help_effect*jobhelp", "    )", "", 
"# ggplot(aes(x = wage, color = as.factor(jobhelp)), data = datamat) + geom_density()", 
"# ggplot(aes(x = Number_of_Priors, y = help_effect), data = datamat) + geom_point()", 
"", "dataset <- dataset %>% ", "  mutate(wage = datamat$wage)", 
"", "# Simulating non-ranodm assignment of treatment", "set.seed(123)", 
"", "datamat2 <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% ", 
"  select(-`(Intercept)`) %>% ", "  mutate(", "    has_priors = if_else(Number_of_Priors > 0, 1, 0),", 
"    prob_treatment =  0.5 + 0.3*ethnicityCaucasian + (-0.05)*has_priors*ethnicityCaucasian + (-0.1)*Age_Above_FourtyFiveyes - 0.05*Number_of_Priors -  0.05*Number_of_Priors*ethnicityCaucasian + 0.1*Age_Above_FourtyFiveyes*Number_of_Priors,", 
"    wage_nohelp = (-0.15)*has_priors + ", "            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +", 
"            0.1*ethnicityCaucasian + ", "            (-0.05)*has_priors*ethnicityCaucasian +", 
"            rlnorm(1000, meanlog = 0, sdlog = 0.1),", "    help_effect = 0.1*Number_of_Priors", 
"    )", "", "jobhelp_new <- map_dbl(datamat2$prob_treatment, ~sample(c(0,1), 1, replace = TRUE, prob = c(1-.x, .x)))", 
"", "dataset2 <- dataset %>% mutate(", "  jobhelp = jobhelp_new,", 
"  wage = datamat2$wage_nohelp + jobhelp_new*datamat2$help_effect", 
"  )", "", "# Simulating non-ranodm assignment of treatment without CIA", 
"set.seed(456)", "", "datamat3 <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% ", 
"  select(-`(Intercept)`) %>% ", "  mutate(", "    has_priors = if_else(Number_of_Priors > 0, 1, 0),", 
"    wage_nohelp = (-0.15)*has_priors + ", "            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +", 
"            0.1*ethnicityCaucasian + ", "            (-0.05)*has_priors*ethnicityCaucasian +", 
"            rlnorm(1000, meanlog = 0, sdlog = 0.1),", "    help_effect = 0.1*Number_of_Priors", 
"    )", "prob_treatment3 <- (datamat3$wage_nohelp-min(datamat3$wage_nohelp))/max(datamat3$wage_nohelp)", 
"", "jobhelp_new3 <- map_dbl(prob_treatment3, ~sample(c(0,1), 1, replace = TRUE, prob = c(1-.x, .x)))", 
"", "dataset3 <- dataset %>% mutate(", "  jobhelp = jobhelp_new3,", 
"  wage = datamat3$wage_nohelp + jobhelp_new3*datamat3$help_effect", 
"  )", "", "", "X <- dataset %>%  select(-wage, -jobhelp) %>%  ", 
"  model.matrix(~., .) ", "X2 <- dataset2 %>%  select(-wage, -jobhelp) %>%  ", 
"  model.matrix(~., .) ", "X <- X[ , -1]", "X2 <- X2[ , -1]", 
"Y <- dataset$wage", "W <- dataset$jobhelp", "", "set.seed(234)", 
"cforest <- causal_forest(", "  X,", "  Y,", "  W,", "  num.trees = 4000,", 
"  sample.weights = NULL,", "  clusters = NULL,", "  equalize.cluster.weights = FALSE,", 
"  sample.fraction = 0.5,", "  mtry = min(ceiling(sqrt(ncol(X)) + 20), ncol(X)),", 
"  min.node.size = 10,", "  honesty = TRUE,", "  honesty.fraction = 0.5,", 
"  honesty.prune.leaves = TRUE,", "  alpha = 0.05,", "  imbalance.penalty = 0,", 
"  stabilize.splits = TRUE,", "  ci.group.size = 2,", "  tune.parameters = \"none\",", 
"  compute.oob.predictions = TRUE", ")", "", "", "npriors_val <- unique(dataset$Number_of_Priors) %>% sort()", 
"Xtest <- matrix(0, length(npriors_val), ncol(X))", "Xtest[,1] <- npriors_val", 
"", "set.seed(3456)", "cf_predict <- predict(object = cforest, ", 
"                      newdata = Xtest, ", "                      estimate.variance = TRUE) %>%", 
"  mutate(Number_of_Priors = Xtest[ ,1])", "", ""), chunk_opts = list(
    label = "setup", include = FALSE)), setup = NULL, chunks = list(
    list(label = "createXtest", code = "\nnpriors_val <- unique(dataset$Number_of_Priors) %>% sort()\nXtest <- matrix(0, length(npriors_val), ncol(X))\nXtest[,1] <- npriors_val\nhead(Xtest)", 
        opts = list(label = "\"createXtest\"", exercise = "TRUE"), 
        engine = "r")), code_check = NULL, error_check = NULL, 
    check = NULL, solution = NULL, tests = NULL, options = list(
        eval = FALSE, echo = TRUE, results = "markup", tidy = FALSE, 
        tidy.opts = NULL, collapse = FALSE, prompt = FALSE, comment = NA, 
        highlight = FALSE, size = "normalsize", background = "#F7F7F7", 
        strip.white = TRUE, cache = 0, cache.path = "tutorial_grf_cache/html/", 
        cache.vars = NULL, cache.lazy = TRUE, dependson = NULL, 
        autodep = FALSE, cache.rebuild = FALSE, fig.keep = "high", 
        fig.show = "asis", fig.align = "default", fig.path = "tutorial_grf_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, label = "createXtest", exercise = TRUE, 
        code = c("", "npriors_val <- unique(dataset$Number_of_Priors) %>% sort()", 
        "Xtest <- matrix(0, length(npriors_val), ncol(X))", "Xtest[,1] <- npriors_val", 
        "head(Xtest)"), out.width.px = 624, out.height.px = 384, 
        params.src = "createXtest, exercise = TRUE", fig.num = 0, 
        exercise.df_print = "paged", exercise.checker = "NULL"), 
    engine = "r", version = "4"), class = c("r", "tutorial_exercise"
)))
</script>


<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-predict-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-predict-code-editor`)), session)
output$`tutorial-exercise-predict-output` <- renderUI({
  `tutorial-exercise-predict-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(label = "predict", global_setup = structure(c("library(learnr)", 
"library(DiagrammeR)", "library(grf)", "library(tidyverse)", 
"library(broom)", "", "", "", "# getting COMPAS data", "", "set.seed(111)", 
"dataset <- fairness::compas %>% ", "  filter(ethnicity == c(\"Caucasian\", \"African_American\")) %>%", 
"  mutate(ethnicity = as.factor(as.character(ethnicity))) %>%", 
"  mutate(Number_of_Priors = Number_of_Priors - min(Number_of_Priors)) %>% ", 
"  select(-probability,-predicted, -Two_yr_Recidivism) %>%", 
"  sample_n(1000)", "", "# Simulating data", "set.seed(112)", 
"dataset <- dataset %>% mutate(", "  jobhelp = sample(c(0,1), 1000, replace = TRUE, prob = c(0.5, 0.5)),", 
"  )", "", " ", "", "datamat <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% ", 
"  select(-`(Intercept)`) %>% ", "  mutate(", "    has_priors = if_else(Number_of_Priors > 0, 1, 0),", 
"    wage_nohelp = (-0.15)*has_priors + ", "            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +", 
"            0.1*ethnicityCaucasian + ", "            (-0.05)*has_priors*ethnicityCaucasian +", 
"            rlnorm(1000, meanlog = 0, sdlog = 0.1),", "    help_effect = 0.1*Number_of_Priors,", 
"    wage = wage_nohelp + help_effect*jobhelp", "    )", "", 
"# ggplot(aes(x = wage, color = as.factor(jobhelp)), data = datamat) + geom_density()", 
"# ggplot(aes(x = Number_of_Priors, y = help_effect), data = datamat) + geom_point()", 
"", "dataset <- dataset %>% ", "  mutate(wage = datamat$wage)", 
"", "# Simulating non-ranodm assignment of treatment", "set.seed(123)", 
"", "datamat2 <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% ", 
"  select(-`(Intercept)`) %>% ", "  mutate(", "    has_priors = if_else(Number_of_Priors > 0, 1, 0),", 
"    prob_treatment =  0.5 + 0.3*ethnicityCaucasian + (-0.05)*has_priors*ethnicityCaucasian + (-0.1)*Age_Above_FourtyFiveyes - 0.05*Number_of_Priors -  0.05*Number_of_Priors*ethnicityCaucasian + 0.1*Age_Above_FourtyFiveyes*Number_of_Priors,", 
"    wage_nohelp = (-0.15)*has_priors + ", "            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +", 
"            0.1*ethnicityCaucasian + ", "            (-0.05)*has_priors*ethnicityCaucasian +", 
"            rlnorm(1000, meanlog = 0, sdlog = 0.1),", "    help_effect = 0.1*Number_of_Priors", 
"    )", "", "jobhelp_new <- map_dbl(datamat2$prob_treatment, ~sample(c(0,1), 1, replace = TRUE, prob = c(1-.x, .x)))", 
"", "dataset2 <- dataset %>% mutate(", "  jobhelp = jobhelp_new,", 
"  wage = datamat2$wage_nohelp + jobhelp_new*datamat2$help_effect", 
"  )", "", "# Simulating non-ranodm assignment of treatment without CIA", 
"set.seed(456)", "", "datamat3 <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% ", 
"  select(-`(Intercept)`) %>% ", "  mutate(", "    has_priors = if_else(Number_of_Priors > 0, 1, 0),", 
"    wage_nohelp = (-0.15)*has_priors + ", "            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +", 
"            0.1*ethnicityCaucasian + ", "            (-0.05)*has_priors*ethnicityCaucasian +", 
"            rlnorm(1000, meanlog = 0, sdlog = 0.1),", "    help_effect = 0.1*Number_of_Priors", 
"    )", "prob_treatment3 <- (datamat3$wage_nohelp-min(datamat3$wage_nohelp))/max(datamat3$wage_nohelp)", 
"", "jobhelp_new3 <- map_dbl(prob_treatment3, ~sample(c(0,1), 1, replace = TRUE, prob = c(1-.x, .x)))", 
"", "dataset3 <- dataset %>% mutate(", "  jobhelp = jobhelp_new3,", 
"  wage = datamat3$wage_nohelp + jobhelp_new3*datamat3$help_effect", 
"  )", "", "", "X <- dataset %>%  select(-wage, -jobhelp) %>%  ", 
"  model.matrix(~., .) ", "X2 <- dataset2 %>%  select(-wage, -jobhelp) %>%  ", 
"  model.matrix(~., .) ", "X <- X[ , -1]", "X2 <- X2[ , -1]", 
"Y <- dataset$wage", "W <- dataset$jobhelp", "", "set.seed(234)", 
"cforest <- causal_forest(", "  X,", "  Y,", "  W,", "  num.trees = 4000,", 
"  sample.weights = NULL,", "  clusters = NULL,", "  equalize.cluster.weights = FALSE,", 
"  sample.fraction = 0.5,", "  mtry = min(ceiling(sqrt(ncol(X)) + 20), ncol(X)),", 
"  min.node.size = 10,", "  honesty = TRUE,", "  honesty.fraction = 0.5,", 
"  honesty.prune.leaves = TRUE,", "  alpha = 0.05,", "  imbalance.penalty = 0,", 
"  stabilize.splits = TRUE,", "  ci.group.size = 2,", "  tune.parameters = \"none\",", 
"  compute.oob.predictions = TRUE", ")", "", "", "npriors_val <- unique(dataset$Number_of_Priors) %>% sort()", 
"Xtest <- matrix(0, length(npriors_val), ncol(X))", "Xtest[,1] <- npriors_val", 
"", "set.seed(3456)", "cf_predict <- predict(object = cforest, ", 
"                      newdata = Xtest, ", "                      estimate.variance = TRUE) %>%", 
"  mutate(Number_of_Priors = Xtest[ ,1])", "", ""), chunk_opts = list(
    label = "setup", include = FALSE)), setup = NULL, chunks = list(
    list(label = "predict", code = "set.seed(3456)\ncf_predict <- predict(object = _______, \n                      newdata = ____, \n                      estimate.variance = TRUE) %>%\n  mutate(Number_of_Priors = Xtest[ ,1])\n\nhead(cf_predict)", 
        opts = list(label = "\"predict\"", exercise = "TRUE", 
            exercise.eval = "FALSE"), engine = "r")), code_check = NULL, 
    error_check = NULL, check = NULL, solution = NULL, tests = NULL, 
    options = list(eval = FALSE, echo = TRUE, results = "markup", 
        tidy = FALSE, tidy.opts = NULL, collapse = FALSE, prompt = FALSE, 
        comment = NA, highlight = FALSE, size = "normalsize", 
        background = "#F7F7F7", strip.white = TRUE, cache = 0, 
        cache.path = "tutorial_grf_cache/html/", cache.vars = NULL, 
        cache.lazy = TRUE, dependson = NULL, autodep = FALSE, 
        cache.rebuild = FALSE, fig.keep = "high", fig.show = "asis", 
        fig.align = "default", fig.path = "tutorial_grf_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, label = "predict", exercise = TRUE, 
        exercise.eval = FALSE, code = c("set.seed(3456)", "cf_predict <- predict(object = _______, ", 
        "                      newdata = ____, ", "                      estimate.variance = TRUE) %>%", 
        "  mutate(Number_of_Priors = Xtest[ ,1])", "", "head(cf_predict)"
        ), out.width.px = 624, out.height.px = 384, params.src = "predict, exercise = TRUE, exercise.eval = FALSE", 
        fig.num = 0, exercise.df_print = "paged", exercise.checker = "NULL"), 
    engine = "r", version = "4"), class = c("r", "tutorial_exercise"
)))
</script>


<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-predictgraph-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-predictgraph-code-editor`)), session)
output$`tutorial-exercise-predictgraph-output` <- renderUI({
  `tutorial-exercise-predictgraph-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(label = "predictgraph", global_setup = structure(c("library(learnr)", 
"library(DiagrammeR)", "library(grf)", "library(tidyverse)", 
"library(broom)", "", "", "", "# getting COMPAS data", "", "set.seed(111)", 
"dataset <- fairness::compas %>% ", "  filter(ethnicity == c(\"Caucasian\", \"African_American\")) %>%", 
"  mutate(ethnicity = as.factor(as.character(ethnicity))) %>%", 
"  mutate(Number_of_Priors = Number_of_Priors - min(Number_of_Priors)) %>% ", 
"  select(-probability,-predicted, -Two_yr_Recidivism) %>%", 
"  sample_n(1000)", "", "# Simulating data", "set.seed(112)", 
"dataset <- dataset %>% mutate(", "  jobhelp = sample(c(0,1), 1000, replace = TRUE, prob = c(0.5, 0.5)),", 
"  )", "", " ", "", "datamat <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% ", 
"  select(-`(Intercept)`) %>% ", "  mutate(", "    has_priors = if_else(Number_of_Priors > 0, 1, 0),", 
"    wage_nohelp = (-0.15)*has_priors + ", "            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +", 
"            0.1*ethnicityCaucasian + ", "            (-0.05)*has_priors*ethnicityCaucasian +", 
"            rlnorm(1000, meanlog = 0, sdlog = 0.1),", "    help_effect = 0.1*Number_of_Priors,", 
"    wage = wage_nohelp + help_effect*jobhelp", "    )", "", 
"# ggplot(aes(x = wage, color = as.factor(jobhelp)), data = datamat) + geom_density()", 
"# ggplot(aes(x = Number_of_Priors, y = help_effect), data = datamat) + geom_point()", 
"", "dataset <- dataset %>% ", "  mutate(wage = datamat$wage)", 
"", "# Simulating non-ranodm assignment of treatment", "set.seed(123)", 
"", "datamat2 <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% ", 
"  select(-`(Intercept)`) %>% ", "  mutate(", "    has_priors = if_else(Number_of_Priors > 0, 1, 0),", 
"    prob_treatment =  0.5 + 0.3*ethnicityCaucasian + (-0.05)*has_priors*ethnicityCaucasian + (-0.1)*Age_Above_FourtyFiveyes - 0.05*Number_of_Priors -  0.05*Number_of_Priors*ethnicityCaucasian + 0.1*Age_Above_FourtyFiveyes*Number_of_Priors,", 
"    wage_nohelp = (-0.15)*has_priors + ", "            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +", 
"            0.1*ethnicityCaucasian + ", "            (-0.05)*has_priors*ethnicityCaucasian +", 
"            rlnorm(1000, meanlog = 0, sdlog = 0.1),", "    help_effect = 0.1*Number_of_Priors", 
"    )", "", "jobhelp_new <- map_dbl(datamat2$prob_treatment, ~sample(c(0,1), 1, replace = TRUE, prob = c(1-.x, .x)))", 
"", "dataset2 <- dataset %>% mutate(", "  jobhelp = jobhelp_new,", 
"  wage = datamat2$wage_nohelp + jobhelp_new*datamat2$help_effect", 
"  )", "", "# Simulating non-ranodm assignment of treatment without CIA", 
"set.seed(456)", "", "datamat3 <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% ", 
"  select(-`(Intercept)`) %>% ", "  mutate(", "    has_priors = if_else(Number_of_Priors > 0, 1, 0),", 
"    wage_nohelp = (-0.15)*has_priors + ", "            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +", 
"            0.1*ethnicityCaucasian + ", "            (-0.05)*has_priors*ethnicityCaucasian +", 
"            rlnorm(1000, meanlog = 0, sdlog = 0.1),", "    help_effect = 0.1*Number_of_Priors", 
"    )", "prob_treatment3 <- (datamat3$wage_nohelp-min(datamat3$wage_nohelp))/max(datamat3$wage_nohelp)", 
"", "jobhelp_new3 <- map_dbl(prob_treatment3, ~sample(c(0,1), 1, replace = TRUE, prob = c(1-.x, .x)))", 
"", "dataset3 <- dataset %>% mutate(", "  jobhelp = jobhelp_new3,", 
"  wage = datamat3$wage_nohelp + jobhelp_new3*datamat3$help_effect", 
"  )", "", "", "X <- dataset %>%  select(-wage, -jobhelp) %>%  ", 
"  model.matrix(~., .) ", "X2 <- dataset2 %>%  select(-wage, -jobhelp) %>%  ", 
"  model.matrix(~., .) ", "X <- X[ , -1]", "X2 <- X2[ , -1]", 
"Y <- dataset$wage", "W <- dataset$jobhelp", "", "set.seed(234)", 
"cforest <- causal_forest(", "  X,", "  Y,", "  W,", "  num.trees = 4000,", 
"  sample.weights = NULL,", "  clusters = NULL,", "  equalize.cluster.weights = FALSE,", 
"  sample.fraction = 0.5,", "  mtry = min(ceiling(sqrt(ncol(X)) + 20), ncol(X)),", 
"  min.node.size = 10,", "  honesty = TRUE,", "  honesty.fraction = 0.5,", 
"  honesty.prune.leaves = TRUE,", "  alpha = 0.05,", "  imbalance.penalty = 0,", 
"  stabilize.splits = TRUE,", "  ci.group.size = 2,", "  tune.parameters = \"none\",", 
"  compute.oob.predictions = TRUE", ")", "", "", "npriors_val <- unique(dataset$Number_of_Priors) %>% sort()", 
"Xtest <- matrix(0, length(npriors_val), ncol(X))", "Xtest[,1] <- npriors_val", 
"", "set.seed(3456)", "cf_predict <- predict(object = cforest, ", 
"                      newdata = Xtest, ", "                      estimate.variance = TRUE) %>%", 
"  mutate(Number_of_Priors = Xtest[ ,1])", "", ""), chunk_opts = list(
    label = "setup", include = FALSE)), setup = NULL, chunks = list(
    list(label = "predictgraph", code = "ggplot(aes(x = ________, y = ______), data = ______) +\n  geom_errorbar(aes(ymin=predictions - 1.96*sqrt(________),\n                    ymax=predictions + 1.96*sqrt(________)), colour = \"black\", width=.1) +\n    geom_line() +\n    geom_point(size=3)", 
        opts = list(label = "\"predictgraph\"", exercise = "TRUE", 
            exercise.eval = "FALSE"), engine = "r")), code_check = NULL, 
    error_check = NULL, check = NULL, solution = NULL, tests = NULL, 
    options = list(eval = FALSE, echo = TRUE, results = "markup", 
        tidy = FALSE, tidy.opts = NULL, collapse = FALSE, prompt = FALSE, 
        comment = NA, highlight = FALSE, size = "normalsize", 
        background = "#F7F7F7", strip.white = TRUE, cache = 0, 
        cache.path = "tutorial_grf_cache/html/", cache.vars = NULL, 
        cache.lazy = TRUE, dependson = NULL, autodep = FALSE, 
        cache.rebuild = FALSE, fig.keep = "high", fig.show = "asis", 
        fig.align = "default", fig.path = "tutorial_grf_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, label = "predictgraph", exercise = TRUE, 
        exercise.eval = FALSE, code = c("ggplot(aes(x = ________, y = ______), data = ______) +", 
        "  geom_errorbar(aes(ymin=predictions - 1.96*sqrt(________),", 
        "                    ymax=predictions + 1.96*sqrt(________)), colour = \"black\", width=.1) +", 
        "    geom_line() +", "    geom_point(size=3)"), out.width.px = 624, 
        out.height.px = 384, params.src = "predictgraph, exercise = TRUE, exercise.eval = FALSE", 
        fig.num = 0, exercise.df_print = "paged", exercise.checker = "NULL"), 
    engine = "r", version = "4"), class = c("r", "tutorial_exercise"
)))
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_radio", label = "quiz_graph-1", 
    question = structure("What does the graph say?", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_efbc4d4", 
        option = "The program is more beneficial for people with fewer priors", 
        value = "The program is more beneficial for people with fewer priors", 
        label = structure("The program is more beneficial for people with fewer priors", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_fc7800a", 
        option = "The program is more beneficial for people with more priors", 
        value = "The program is more beneficial for people with more priors", 
        label = structure("The program is more beneficial for people with more priors", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
    "character")), try_again = structure("Incorrect", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Incorrect", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "quiz_graph-1-answer", question = "quiz_graph-1"), 
    loading = NULL, random_answer_order = FALSE, allow_retry = FALSE, 
    seed = 682947762.681978, options = list()), class = c("learnr_radio", 
"tutorial_question")), session = session)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_checkbox", label = "quiz_graph2-1", 
    question = structure("Why do you think the estimated TE increase with the number of priors in sort of linear fashion but then become flat for higher number of priors?", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_dc6ccf9", 
        option = "It could be because the positive effect of the treatment indeed stops growing after a certain number of priors", 
        value = "It could be because the positive effect of the treatment indeed stops growing after a certain number of priors", 
        label = structure("It could be because the positive effect of the treatment indeed stops growing after a certain number of priors", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_cbb7113", 
        option = "It could be that the positive effect of the treatment keeps growing but we are unable to capture the heterogeneity there due to a limited sample size", 
        value = "It could be that the positive effect of the treatment keeps growing but we are unable to capture the heterogeneity there due to a limited sample size", 
        label = structure("It could be that the positive effect of the treatment keeps growing but we are unable to capture the heterogeneity there due to a limited sample size", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
    "character")), try_again = structure("Incorrect. Be sure to select every correct answer.", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Incorrect", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "quiz_graph2-1-answer", question = "quiz_graph2-1"), 
    loading = NULL, random_answer_order = FALSE, allow_retry = FALSE, 
    seed = 1734787087.19218, options = list()), class = c("learnr_checkbox", 
"tutorial_question")), session = session)
</script>


<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-distr_priors-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-distr_priors-code-editor`)), session)
output$`tutorial-exercise-distr_priors-output` <- renderUI({
  `tutorial-exercise-distr_priors-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(label = "distr_priors", global_setup = structure(c("library(learnr)", 
"library(DiagrammeR)", "library(grf)", "library(tidyverse)", 
"library(broom)", "", "", "", "# getting COMPAS data", "", "set.seed(111)", 
"dataset <- fairness::compas %>% ", "  filter(ethnicity == c(\"Caucasian\", \"African_American\")) %>%", 
"  mutate(ethnicity = as.factor(as.character(ethnicity))) %>%", 
"  mutate(Number_of_Priors = Number_of_Priors - min(Number_of_Priors)) %>% ", 
"  select(-probability,-predicted, -Two_yr_Recidivism) %>%", 
"  sample_n(1000)", "", "# Simulating data", "set.seed(112)", 
"dataset <- dataset %>% mutate(", "  jobhelp = sample(c(0,1), 1000, replace = TRUE, prob = c(0.5, 0.5)),", 
"  )", "", " ", "", "datamat <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% ", 
"  select(-`(Intercept)`) %>% ", "  mutate(", "    has_priors = if_else(Number_of_Priors > 0, 1, 0),", 
"    wage_nohelp = (-0.15)*has_priors + ", "            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +", 
"            0.1*ethnicityCaucasian + ", "            (-0.05)*has_priors*ethnicityCaucasian +", 
"            rlnorm(1000, meanlog = 0, sdlog = 0.1),", "    help_effect = 0.1*Number_of_Priors,", 
"    wage = wage_nohelp + help_effect*jobhelp", "    )", "", 
"# ggplot(aes(x = wage, color = as.factor(jobhelp)), data = datamat) + geom_density()", 
"# ggplot(aes(x = Number_of_Priors, y = help_effect), data = datamat) + geom_point()", 
"", "dataset <- dataset %>% ", "  mutate(wage = datamat$wage)", 
"", "# Simulating non-ranodm assignment of treatment", "set.seed(123)", 
"", "datamat2 <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% ", 
"  select(-`(Intercept)`) %>% ", "  mutate(", "    has_priors = if_else(Number_of_Priors > 0, 1, 0),", 
"    prob_treatment =  0.5 + 0.3*ethnicityCaucasian + (-0.05)*has_priors*ethnicityCaucasian + (-0.1)*Age_Above_FourtyFiveyes - 0.05*Number_of_Priors -  0.05*Number_of_Priors*ethnicityCaucasian + 0.1*Age_Above_FourtyFiveyes*Number_of_Priors,", 
"    wage_nohelp = (-0.15)*has_priors + ", "            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +", 
"            0.1*ethnicityCaucasian + ", "            (-0.05)*has_priors*ethnicityCaucasian +", 
"            rlnorm(1000, meanlog = 0, sdlog = 0.1),", "    help_effect = 0.1*Number_of_Priors", 
"    )", "", "jobhelp_new <- map_dbl(datamat2$prob_treatment, ~sample(c(0,1), 1, replace = TRUE, prob = c(1-.x, .x)))", 
"", "dataset2 <- dataset %>% mutate(", "  jobhelp = jobhelp_new,", 
"  wage = datamat2$wage_nohelp + jobhelp_new*datamat2$help_effect", 
"  )", "", "# Simulating non-ranodm assignment of treatment without CIA", 
"set.seed(456)", "", "datamat3 <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% ", 
"  select(-`(Intercept)`) %>% ", "  mutate(", "    has_priors = if_else(Number_of_Priors > 0, 1, 0),", 
"    wage_nohelp = (-0.15)*has_priors + ", "            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +", 
"            0.1*ethnicityCaucasian + ", "            (-0.05)*has_priors*ethnicityCaucasian +", 
"            rlnorm(1000, meanlog = 0, sdlog = 0.1),", "    help_effect = 0.1*Number_of_Priors", 
"    )", "prob_treatment3 <- (datamat3$wage_nohelp-min(datamat3$wage_nohelp))/max(datamat3$wage_nohelp)", 
"", "jobhelp_new3 <- map_dbl(prob_treatment3, ~sample(c(0,1), 1, replace = TRUE, prob = c(1-.x, .x)))", 
"", "dataset3 <- dataset %>% mutate(", "  jobhelp = jobhelp_new3,", 
"  wage = datamat3$wage_nohelp + jobhelp_new3*datamat3$help_effect", 
"  )", "", "", "X <- dataset %>%  select(-wage, -jobhelp) %>%  ", 
"  model.matrix(~., .) ", "X2 <- dataset2 %>%  select(-wage, -jobhelp) %>%  ", 
"  model.matrix(~., .) ", "X <- X[ , -1]", "X2 <- X2[ , -1]", 
"Y <- dataset$wage", "W <- dataset$jobhelp", "", "set.seed(234)", 
"cforest <- causal_forest(", "  X,", "  Y,", "  W,", "  num.trees = 4000,", 
"  sample.weights = NULL,", "  clusters = NULL,", "  equalize.cluster.weights = FALSE,", 
"  sample.fraction = 0.5,", "  mtry = min(ceiling(sqrt(ncol(X)) + 20), ncol(X)),", 
"  min.node.size = 10,", "  honesty = TRUE,", "  honesty.fraction = 0.5,", 
"  honesty.prune.leaves = TRUE,", "  alpha = 0.05,", "  imbalance.penalty = 0,", 
"  stabilize.splits = TRUE,", "  ci.group.size = 2,", "  tune.parameters = \"none\",", 
"  compute.oob.predictions = TRUE", ")", "", "", "npriors_val <- unique(dataset$Number_of_Priors) %>% sort()", 
"Xtest <- matrix(0, length(npriors_val), ncol(X))", "Xtest[,1] <- npriors_val", 
"", "set.seed(3456)", "cf_predict <- predict(object = cforest, ", 
"                      newdata = Xtest, ", "                      estimate.variance = TRUE) %>%", 
"  mutate(Number_of_Priors = Xtest[ ,1])", "", ""), chunk_opts = list(
    label = "setup", include = FALSE)), setup = NULL, chunks = list(
    list(label = "distr_priors", code = "dataset %>% ggplot(aes(x = Number_of_Priors)) + geom_density()", 
        opts = list(label = "\"distr_priors\"", exercise = "TRUE", 
            exercise.eval = "TRUE"), engine = "r")), code_check = NULL, 
    error_check = NULL, check = NULL, solution = NULL, tests = NULL, 
    options = list(eval = TRUE, echo = TRUE, results = "markup", 
        tidy = FALSE, tidy.opts = NULL, collapse = FALSE, prompt = FALSE, 
        comment = NA, highlight = FALSE, size = "normalsize", 
        background = "#F7F7F7", strip.white = TRUE, cache = 0, 
        cache.path = "tutorial_grf_cache/html/", cache.vars = NULL, 
        cache.lazy = TRUE, dependson = NULL, autodep = FALSE, 
        cache.rebuild = FALSE, fig.keep = "high", fig.show = "asis", 
        fig.align = "default", fig.path = "tutorial_grf_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, label = "distr_priors", exercise = TRUE, 
        exercise.eval = TRUE, code = "dataset %>% ggplot(aes(x = Number_of_Priors)) + geom_density()", 
        out.width.px = 624, out.height.px = 384, params.src = "distr_priors, exercise=TRUE, exercise.eval=TRUE", 
        fig.alt = NULL, fig.num = 1, exercise.df_print = "paged", 
        exercise.checker = "NULL"), engine = "r", version = "4"), class = c("r", 
"tutorial_exercise")))
</script>


<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-correlates-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-correlates-code-editor`)), session)
output$`tutorial-exercise-correlates-output` <- renderUI({
  `tutorial-exercise-correlates-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(label = "correlates", global_setup = structure(c("library(learnr)", 
"library(DiagrammeR)", "library(grf)", "library(tidyverse)", 
"library(broom)", "", "", "", "# getting COMPAS data", "", "set.seed(111)", 
"dataset <- fairness::compas %>% ", "  filter(ethnicity == c(\"Caucasian\", \"African_American\")) %>%", 
"  mutate(ethnicity = as.factor(as.character(ethnicity))) %>%", 
"  mutate(Number_of_Priors = Number_of_Priors - min(Number_of_Priors)) %>% ", 
"  select(-probability,-predicted, -Two_yr_Recidivism) %>%", 
"  sample_n(1000)", "", "# Simulating data", "set.seed(112)", 
"dataset <- dataset %>% mutate(", "  jobhelp = sample(c(0,1), 1000, replace = TRUE, prob = c(0.5, 0.5)),", 
"  )", "", " ", "", "datamat <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% ", 
"  select(-`(Intercept)`) %>% ", "  mutate(", "    has_priors = if_else(Number_of_Priors > 0, 1, 0),", 
"    wage_nohelp = (-0.15)*has_priors + ", "            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +", 
"            0.1*ethnicityCaucasian + ", "            (-0.05)*has_priors*ethnicityCaucasian +", 
"            rlnorm(1000, meanlog = 0, sdlog = 0.1),", "    help_effect = 0.1*Number_of_Priors,", 
"    wage = wage_nohelp + help_effect*jobhelp", "    )", "", 
"# ggplot(aes(x = wage, color = as.factor(jobhelp)), data = datamat) + geom_density()", 
"# ggplot(aes(x = Number_of_Priors, y = help_effect), data = datamat) + geom_point()", 
"", "dataset <- dataset %>% ", "  mutate(wage = datamat$wage)", 
"", "# Simulating non-ranodm assignment of treatment", "set.seed(123)", 
"", "datamat2 <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% ", 
"  select(-`(Intercept)`) %>% ", "  mutate(", "    has_priors = if_else(Number_of_Priors > 0, 1, 0),", 
"    prob_treatment =  0.5 + 0.3*ethnicityCaucasian + (-0.05)*has_priors*ethnicityCaucasian + (-0.1)*Age_Above_FourtyFiveyes - 0.05*Number_of_Priors -  0.05*Number_of_Priors*ethnicityCaucasian + 0.1*Age_Above_FourtyFiveyes*Number_of_Priors,", 
"    wage_nohelp = (-0.15)*has_priors + ", "            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +", 
"            0.1*ethnicityCaucasian + ", "            (-0.05)*has_priors*ethnicityCaucasian +", 
"            rlnorm(1000, meanlog = 0, sdlog = 0.1),", "    help_effect = 0.1*Number_of_Priors", 
"    )", "", "jobhelp_new <- map_dbl(datamat2$prob_treatment, ~sample(c(0,1), 1, replace = TRUE, prob = c(1-.x, .x)))", 
"", "dataset2 <- dataset %>% mutate(", "  jobhelp = jobhelp_new,", 
"  wage = datamat2$wage_nohelp + jobhelp_new*datamat2$help_effect", 
"  )", "", "# Simulating non-ranodm assignment of treatment without CIA", 
"set.seed(456)", "", "datamat3 <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% ", 
"  select(-`(Intercept)`) %>% ", "  mutate(", "    has_priors = if_else(Number_of_Priors > 0, 1, 0),", 
"    wage_nohelp = (-0.15)*has_priors + ", "            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +", 
"            0.1*ethnicityCaucasian + ", "            (-0.05)*has_priors*ethnicityCaucasian +", 
"            rlnorm(1000, meanlog = 0, sdlog = 0.1),", "    help_effect = 0.1*Number_of_Priors", 
"    )", "prob_treatment3 <- (datamat3$wage_nohelp-min(datamat3$wage_nohelp))/max(datamat3$wage_nohelp)", 
"", "jobhelp_new3 <- map_dbl(prob_treatment3, ~sample(c(0,1), 1, replace = TRUE, prob = c(1-.x, .x)))", 
"", "dataset3 <- dataset %>% mutate(", "  jobhelp = jobhelp_new3,", 
"  wage = datamat3$wage_nohelp + jobhelp_new3*datamat3$help_effect", 
"  )", "", "", "X <- dataset %>%  select(-wage, -jobhelp) %>%  ", 
"  model.matrix(~., .) ", "X2 <- dataset2 %>%  select(-wage, -jobhelp) %>%  ", 
"  model.matrix(~., .) ", "X <- X[ , -1]", "X2 <- X2[ , -1]", 
"Y <- dataset$wage", "W <- dataset$jobhelp", "", "set.seed(234)", 
"cforest <- causal_forest(", "  X,", "  Y,", "  W,", "  num.trees = 4000,", 
"  sample.weights = NULL,", "  clusters = NULL,", "  equalize.cluster.weights = FALSE,", 
"  sample.fraction = 0.5,", "  mtry = min(ceiling(sqrt(ncol(X)) + 20), ncol(X)),", 
"  min.node.size = 10,", "  honesty = TRUE,", "  honesty.fraction = 0.5,", 
"  honesty.prune.leaves = TRUE,", "  alpha = 0.05,", "  imbalance.penalty = 0,", 
"  stabilize.splits = TRUE,", "  ci.group.size = 2,", "  tune.parameters = \"none\",", 
"  compute.oob.predictions = TRUE", ")", "", "", "npriors_val <- unique(dataset$Number_of_Priors) %>% sort()", 
"Xtest <- matrix(0, length(npriors_val), ncol(X))", "Xtest[,1] <- npriors_val", 
"", "set.seed(3456)", "cf_predict <- predict(object = cforest, ", 
"                      newdata = Xtest, ", "                      estimate.variance = TRUE) %>%", 
"  mutate(Number_of_Priors = Xtest[ ,1])", "", ""), chunk_opts = list(
    label = "setup", include = FALSE)), setup = NULL, chunks = list(
    list(label = "correlates", code = "lm(jobhelp ~ .-wage, data =dataset2) %>%  summary()", 
        opts = list(label = "\"correlates\"", exercise = "TRUE", 
            exercise.eval = "TRUE"), engine = "r")), code_check = NULL, 
    error_check = NULL, check = NULL, solution = NULL, tests = NULL, 
    options = list(eval = TRUE, echo = TRUE, results = "markup", 
        tidy = FALSE, tidy.opts = NULL, collapse = FALSE, prompt = FALSE, 
        comment = NA, highlight = FALSE, size = "normalsize", 
        background = "#F7F7F7", strip.white = TRUE, cache = 0, 
        cache.path = "tutorial_grf_cache/html/", cache.vars = NULL, 
        cache.lazy = TRUE, dependson = NULL, autodep = FALSE, 
        cache.rebuild = FALSE, fig.keep = "high", fig.show = "asis", 
        fig.align = "default", fig.path = "tutorial_grf_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, label = "correlates", exercise = TRUE, 
        exercise.eval = TRUE, code = "lm(jobhelp ~ .-wage, data =dataset2) %>%  summary()", 
        out.width.px = 624, out.height.px = 384, params.src = "correlates, exercise=TRUE, exercise.eval=TRUE", 
        fig.alt = NULL, fig.num = 0, exercise.df_print = "paged", 
        exercise.checker = "NULL"), engine = "r", version = "4"), class = c("r", 
"tutorial_exercise")))
</script>


<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-notrandom-grf-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-notrandom-grf-code-editor`)), session)
output$`tutorial-exercise-notrandom-grf-output` <- renderUI({
  `tutorial-exercise-notrandom-grf-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(label = "notrandom-grf", global_setup = structure(c("library(learnr)", 
"library(DiagrammeR)", "library(grf)", "library(tidyverse)", 
"library(broom)", "", "", "", "# getting COMPAS data", "", "set.seed(111)", 
"dataset <- fairness::compas %>% ", "  filter(ethnicity == c(\"Caucasian\", \"African_American\")) %>%", 
"  mutate(ethnicity = as.factor(as.character(ethnicity))) %>%", 
"  mutate(Number_of_Priors = Number_of_Priors - min(Number_of_Priors)) %>% ", 
"  select(-probability,-predicted, -Two_yr_Recidivism) %>%", 
"  sample_n(1000)", "", "# Simulating data", "set.seed(112)", 
"dataset <- dataset %>% mutate(", "  jobhelp = sample(c(0,1), 1000, replace = TRUE, prob = c(0.5, 0.5)),", 
"  )", "", " ", "", "datamat <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% ", 
"  select(-`(Intercept)`) %>% ", "  mutate(", "    has_priors = if_else(Number_of_Priors > 0, 1, 0),", 
"    wage_nohelp = (-0.15)*has_priors + ", "            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +", 
"            0.1*ethnicityCaucasian + ", "            (-0.05)*has_priors*ethnicityCaucasian +", 
"            rlnorm(1000, meanlog = 0, sdlog = 0.1),", "    help_effect = 0.1*Number_of_Priors,", 
"    wage = wage_nohelp + help_effect*jobhelp", "    )", "", 
"# ggplot(aes(x = wage, color = as.factor(jobhelp)), data = datamat) + geom_density()", 
"# ggplot(aes(x = Number_of_Priors, y = help_effect), data = datamat) + geom_point()", 
"", "dataset <- dataset %>% ", "  mutate(wage = datamat$wage)", 
"", "# Simulating non-ranodm assignment of treatment", "set.seed(123)", 
"", "datamat2 <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% ", 
"  select(-`(Intercept)`) %>% ", "  mutate(", "    has_priors = if_else(Number_of_Priors > 0, 1, 0),", 
"    prob_treatment =  0.5 + 0.3*ethnicityCaucasian + (-0.05)*has_priors*ethnicityCaucasian + (-0.1)*Age_Above_FourtyFiveyes - 0.05*Number_of_Priors -  0.05*Number_of_Priors*ethnicityCaucasian + 0.1*Age_Above_FourtyFiveyes*Number_of_Priors,", 
"    wage_nohelp = (-0.15)*has_priors + ", "            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +", 
"            0.1*ethnicityCaucasian + ", "            (-0.05)*has_priors*ethnicityCaucasian +", 
"            rlnorm(1000, meanlog = 0, sdlog = 0.1),", "    help_effect = 0.1*Number_of_Priors", 
"    )", "", "jobhelp_new <- map_dbl(datamat2$prob_treatment, ~sample(c(0,1), 1, replace = TRUE, prob = c(1-.x, .x)))", 
"", "dataset2 <- dataset %>% mutate(", "  jobhelp = jobhelp_new,", 
"  wage = datamat2$wage_nohelp + jobhelp_new*datamat2$help_effect", 
"  )", "", "# Simulating non-ranodm assignment of treatment without CIA", 
"set.seed(456)", "", "datamat3 <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% ", 
"  select(-`(Intercept)`) %>% ", "  mutate(", "    has_priors = if_else(Number_of_Priors > 0, 1, 0),", 
"    wage_nohelp = (-0.15)*has_priors + ", "            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +", 
"            0.1*ethnicityCaucasian + ", "            (-0.05)*has_priors*ethnicityCaucasian +", 
"            rlnorm(1000, meanlog = 0, sdlog = 0.1),", "    help_effect = 0.1*Number_of_Priors", 
"    )", "prob_treatment3 <- (datamat3$wage_nohelp-min(datamat3$wage_nohelp))/max(datamat3$wage_nohelp)", 
"", "jobhelp_new3 <- map_dbl(prob_treatment3, ~sample(c(0,1), 1, replace = TRUE, prob = c(1-.x, .x)))", 
"", "dataset3 <- dataset %>% mutate(", "  jobhelp = jobhelp_new3,", 
"  wage = datamat3$wage_nohelp + jobhelp_new3*datamat3$help_effect", 
"  )", "", "", "X <- dataset %>%  select(-wage, -jobhelp) %>%  ", 
"  model.matrix(~., .) ", "X2 <- dataset2 %>%  select(-wage, -jobhelp) %>%  ", 
"  model.matrix(~., .) ", "X <- X[ , -1]", "X2 <- X2[ , -1]", 
"Y <- dataset$wage", "W <- dataset$jobhelp", "", "set.seed(234)", 
"cforest <- causal_forest(", "  X,", "  Y,", "  W,", "  num.trees = 4000,", 
"  sample.weights = NULL,", "  clusters = NULL,", "  equalize.cluster.weights = FALSE,", 
"  sample.fraction = 0.5,", "  mtry = min(ceiling(sqrt(ncol(X)) + 20), ncol(X)),", 
"  min.node.size = 10,", "  honesty = TRUE,", "  honesty.fraction = 0.5,", 
"  honesty.prune.leaves = TRUE,", "  alpha = 0.05,", "  imbalance.penalty = 0,", 
"  stabilize.splits = TRUE,", "  ci.group.size = 2,", "  tune.parameters = \"none\",", 
"  compute.oob.predictions = TRUE", ")", "", "", "npriors_val <- unique(dataset$Number_of_Priors) %>% sort()", 
"Xtest <- matrix(0, length(npriors_val), ncol(X))", "Xtest[,1] <- npriors_val", 
"", "set.seed(3456)", "cf_predict <- predict(object = cforest, ", 
"                      newdata = Xtest, ", "                      estimate.variance = TRUE) %>%", 
"  mutate(Number_of_Priors = Xtest[ ,1])", "", ""), chunk_opts = list(
    label = "setup", include = FALSE)), setup = NULL, chunks = list(
    list(label = "notrandom-grf", code = "\nX2 <- dataset2 %>% \n\nX2 <- X2[ , -1] # remove the intercept\n\nset.seed(234)\ncforest2 <- causal_forest(\n  X = X2,\n  Y = ____________,\n  W = ____________,\n  num.trees = ____,\n  clusters = ____,\n  sample.fraction = __,\n  honesty = _____,\n  tune.parameters = \n)\ncforest2\n\naverage_treatment_effect(cforest2, target.sample = \"all\")\n", 
        opts = list(label = "\"notrandom-grf\"", exercise = "TRUE", 
            exercise.eval = "FALSE"), engine = "r")), code_check = NULL, 
    error_check = NULL, check = NULL, solution = NULL, tests = NULL, 
    options = list(eval = FALSE, echo = TRUE, results = "markup", 
        tidy = FALSE, tidy.opts = NULL, collapse = FALSE, prompt = FALSE, 
        comment = NA, highlight = FALSE, size = "normalsize", 
        background = "#F7F7F7", strip.white = TRUE, cache = 0, 
        cache.path = "tutorial_grf_cache/html/", cache.vars = NULL, 
        cache.lazy = TRUE, dependson = NULL, autodep = FALSE, 
        cache.rebuild = FALSE, fig.keep = "high", fig.show = "asis", 
        fig.align = "default", fig.path = "tutorial_grf_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, label = "notrandom-grf", exercise = TRUE, 
        exercise.eval = FALSE, code = c("", "X2 <- dataset2 %>% ", 
        "", "X2 <- X2[ , -1] # remove the intercept", "", "set.seed(234)", 
        "cforest2 <- causal_forest(", "  X = X2,", "  Y = ____________,", 
        "  W = ____________,", "  num.trees = ____,", "  clusters = ____,", 
        "  sample.fraction = __,", "  honesty = _____,", "  tune.parameters = ", 
        ")", "cforest2", "", "average_treatment_effect(cforest2, target.sample = \"all\")", 
        ""), out.width.px = 624, out.height.px = 384, params.src = "notrandom-grf, exercise = TRUE, exercise.eval=FALSE", 
        fig.num = 0, exercise.df_print = "paged", exercise.checker = "NULL"), 
    engine = "r", version = "4"), class = c("r", "tutorial_exercise"
)))
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::question_prerendered_chunk(structure(list(type = "learnr_radio", label = "quiz_grf_vs_ols-1", 
    question = structure("The GRF algorithm calculates ATE which is", html = TRUE, class = c("html", 
    "character")), answers = list(structure(list(id = "lnr_ans_108cd8a", 
        option = "Completely wrong", value = "Completely wrong", 
        label = structure("Completely wrong", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_8707f0a", 
        option = "Same as the OLS result", value = "Same as the OLS result", 
        label = structure("Same as the OLS result", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_de34cfa", 
        option = "Same as the true ATE", value = "Same as the true ATE", 
        label = structure("Same as the true ATE", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_c63ad26", 
        option = "Slightly below than the true ATE", value = "Slightly below than the true ATE", 
        label = structure("Slightly below than the true ATE", html = TRUE, class = c("html", 
        "character")), correct = FALSE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer")), structure(list(id = "lnr_ans_5b0bcee", 
        option = "Slightly above than the true ATE, but still better than the OLS estimate", 
        value = "Slightly above than the true ATE, but still better than the OLS estimate", 
        label = structure("Slightly above than the true ATE, but still better than the OLS estimate", html = TRUE, class = c("html", 
        "character")), correct = TRUE, message = NULL, type = "literal"), class = c("tutorial_question_answer", 
    "tutorial_quiz_answer"))), button_labels = list(submit = structure("<span data-i18n=\"button.questionsubmit\">Submit Answer<\u002fspan>", html = TRUE, class = c("html", 
    "character")), try_again = structure("<span data-i18n=\"button.questiontryagain\">Try Again<\u002fspan>", html = TRUE, class = c("html", 
    "character"))), messages = list(correct = structure("Correct!", html = TRUE, class = c("html", 
    "character")), try_again = structure("Incorrect", html = TRUE, class = c("html", 
    "character")), incorrect = structure("Incorrect", html = TRUE, class = c("html", 
    "character")), message = NULL, post_message = NULL), ids = list(
        answer = "quiz_grf_vs_ols-1-answer", question = "quiz_grf_vs_ols-1"), 
    loading = NULL, random_answer_order = FALSE, allow_retry = FALSE, 
    seed = 744855351.65315, options = list()), class = c("learnr_radio", 
"tutorial_question")), session = session)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-grf-manual-prediction-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-grf-manual-prediction-code-editor`)), session)
output$`tutorial-exercise-grf-manual-prediction-output` <- renderUI({
  `tutorial-exercise-grf-manual-prediction-result`()
})
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(label = "grf-manual-prediction", global_setup = structure(c("library(learnr)", 
"library(DiagrammeR)", "library(grf)", "library(tidyverse)", 
"library(broom)", "", "", "", "# getting COMPAS data", "", "set.seed(111)", 
"dataset <- fairness::compas %>% ", "  filter(ethnicity == c(\"Caucasian\", \"African_American\")) %>%", 
"  mutate(ethnicity = as.factor(as.character(ethnicity))) %>%", 
"  mutate(Number_of_Priors = Number_of_Priors - min(Number_of_Priors)) %>% ", 
"  select(-probability,-predicted, -Two_yr_Recidivism) %>%", 
"  sample_n(1000)", "", "# Simulating data", "set.seed(112)", 
"dataset <- dataset %>% mutate(", "  jobhelp = sample(c(0,1), 1000, replace = TRUE, prob = c(0.5, 0.5)),", 
"  )", "", " ", "", "datamat <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% ", 
"  select(-`(Intercept)`) %>% ", "  mutate(", "    has_priors = if_else(Number_of_Priors > 0, 1, 0),", 
"    wage_nohelp = (-0.15)*has_priors + ", "            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +", 
"            0.1*ethnicityCaucasian + ", "            (-0.05)*has_priors*ethnicityCaucasian +", 
"            rlnorm(1000, meanlog = 0, sdlog = 0.1),", "    help_effect = 0.1*Number_of_Priors,", 
"    wage = wage_nohelp + help_effect*jobhelp", "    )", "", 
"# ggplot(aes(x = wage, color = as.factor(jobhelp)), data = datamat) + geom_density()", 
"# ggplot(aes(x = Number_of_Priors, y = help_effect), data = datamat) + geom_point()", 
"", "dataset <- dataset %>% ", "  mutate(wage = datamat$wage)", 
"", "# Simulating non-ranodm assignment of treatment", "set.seed(123)", 
"", "datamat2 <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% ", 
"  select(-`(Intercept)`) %>% ", "  mutate(", "    has_priors = if_else(Number_of_Priors > 0, 1, 0),", 
"    prob_treatment =  0.5 + 0.3*ethnicityCaucasian + (-0.05)*has_priors*ethnicityCaucasian + (-0.1)*Age_Above_FourtyFiveyes - 0.05*Number_of_Priors -  0.05*Number_of_Priors*ethnicityCaucasian + 0.1*Age_Above_FourtyFiveyes*Number_of_Priors,", 
"    wage_nohelp = (-0.15)*has_priors + ", "            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +", 
"            0.1*ethnicityCaucasian + ", "            (-0.05)*has_priors*ethnicityCaucasian +", 
"            rlnorm(1000, meanlog = 0, sdlog = 0.1),", "    help_effect = 0.1*Number_of_Priors", 
"    )", "", "jobhelp_new <- map_dbl(datamat2$prob_treatment, ~sample(c(0,1), 1, replace = TRUE, prob = c(1-.x, .x)))", 
"", "dataset2 <- dataset %>% mutate(", "  jobhelp = jobhelp_new,", 
"  wage = datamat2$wage_nohelp + jobhelp_new*datamat2$help_effect", 
"  )", "", "# Simulating non-ranodm assignment of treatment without CIA", 
"set.seed(456)", "", "datamat3 <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% ", 
"  select(-`(Intercept)`) %>% ", "  mutate(", "    has_priors = if_else(Number_of_Priors > 0, 1, 0),", 
"    wage_nohelp = (-0.15)*has_priors + ", "            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +", 
"            0.1*ethnicityCaucasian + ", "            (-0.05)*has_priors*ethnicityCaucasian +", 
"            rlnorm(1000, meanlog = 0, sdlog = 0.1),", "    help_effect = 0.1*Number_of_Priors", 
"    )", "prob_treatment3 <- (datamat3$wage_nohelp-min(datamat3$wage_nohelp))/max(datamat3$wage_nohelp)", 
"", "jobhelp_new3 <- map_dbl(prob_treatment3, ~sample(c(0,1), 1, replace = TRUE, prob = c(1-.x, .x)))", 
"", "dataset3 <- dataset %>% mutate(", "  jobhelp = jobhelp_new3,", 
"  wage = datamat3$wage_nohelp + jobhelp_new3*datamat3$help_effect", 
"  )", "", "", "X <- dataset %>%  select(-wage, -jobhelp) %>%  ", 
"  model.matrix(~., .) ", "X2 <- dataset2 %>%  select(-wage, -jobhelp) %>%  ", 
"  model.matrix(~., .) ", "X <- X[ , -1]", "X2 <- X2[ , -1]", 
"Y <- dataset$wage", "W <- dataset$jobhelp", "", "set.seed(234)", 
"cforest <- causal_forest(", "  X,", "  Y,", "  W,", "  num.trees = 4000,", 
"  sample.weights = NULL,", "  clusters = NULL,", "  equalize.cluster.weights = FALSE,", 
"  sample.fraction = 0.5,", "  mtry = min(ceiling(sqrt(ncol(X)) + 20), ncol(X)),", 
"  min.node.size = 10,", "  honesty = TRUE,", "  honesty.fraction = 0.5,", 
"  honesty.prune.leaves = TRUE,", "  alpha = 0.05,", "  imbalance.penalty = 0,", 
"  stabilize.splits = TRUE,", "  ci.group.size = 2,", "  tune.parameters = \"none\",", 
"  compute.oob.predictions = TRUE", ")", "", "", "npriors_val <- unique(dataset$Number_of_Priors) %>% sort()", 
"Xtest <- matrix(0, length(npriors_val), ncol(X))", "Xtest[,1] <- npriors_val", 
"", "set.seed(3456)", "cf_predict <- predict(object = cforest, ", 
"                      newdata = Xtest, ", "                      estimate.variance = TRUE) %>%", 
"  mutate(Number_of_Priors = Xtest[ ,1])", "", ""), chunk_opts = list(
    label = "setup", include = FALSE)), setup = NULL, chunks = list(
    list(label = "grf-manual-prediction", code = "set.seed(456)\n# Fit a regression model to predict treatment variable 'jobhelp'\nforest.W <- regression_forest(X = __, Y = _____________, tune.parameters = \"___\")\n# Get out-of-bag predictions for 'jobhelp'\nW_hat <- predict(_________)$predictions\n\n# Fit a regression model to predict outcome variable 'wage'\nforest.Y <- regression_forest(X = __, Y = _____________, tune.parameters = \"___\")\n# Get out-of-bag predictions for 'wage'\nY_hat <- \n\n# Fit a causal forest, but supply the predictions for Y and W which you have found earlier: Y.hat and W.hat\ncforest3 <- causal_forest(\n  X = __,\n  Y = _______________,\n  W = _______________,\n  Y.hat = ___,\n  W.hat = ___,\n  num.trees = 4000,\n  clusters = NULL,\n  sample.fraction = 0.5,\n  honesty = TRUE,\n  tune.parameters = \"___\"\n)\n\n# Estimate the average treatment effect\naverage_treatment_effect(___________, target.sample = \"___\")\n", 
        opts = list(label = "\"grf-manual-prediction\"", exercise = "TRUE", 
            exercise.eval = "FALSE"), engine = "r")), code_check = NULL, 
    error_check = NULL, check = NULL, solution = NULL, tests = NULL, 
    options = list(eval = FALSE, echo = TRUE, results = "markup", 
        tidy = FALSE, tidy.opts = NULL, collapse = FALSE, prompt = FALSE, 
        comment = NA, highlight = FALSE, size = "normalsize", 
        background = "#F7F7F7", strip.white = TRUE, cache = 0, 
        cache.path = "tutorial_grf_cache/html/", cache.vars = NULL, 
        cache.lazy = TRUE, dependson = NULL, autodep = FALSE, 
        cache.rebuild = FALSE, fig.keep = "high", fig.show = "asis", 
        fig.align = "default", fig.path = "tutorial_grf_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, label = "grf-manual-prediction", exercise = TRUE, 
        exercise.eval = FALSE, code = c("set.seed(456)", "# Fit a regression model to predict treatment variable 'jobhelp'", 
        "forest.W <- regression_forest(X = __, Y = _____________, tune.parameters = \"___\")", 
        "# Get out-of-bag predictions for 'jobhelp'", "W_hat <- predict(_________)$predictions", 
        "", "# Fit a regression model to predict outcome variable 'wage'", 
        "forest.Y <- regression_forest(X = __, Y = _____________, tune.parameters = \"___\")", 
        "# Get out-of-bag predictions for 'wage'", "Y_hat <- ", 
        "", "# Fit a causal forest, but supply the predictions for Y and W which you have found earlier: Y.hat and W.hat", 
        "cforest3 <- causal_forest(", "  X = __,", "  Y = _______________,", 
        "  W = _______________,", "  Y.hat = ___,", "  W.hat = ___,", 
        "  num.trees = 4000,", "  clusters = NULL,", "  sample.fraction = 0.5,", 
        "  honesty = TRUE,", "  tune.parameters = \"___\"", ")", 
        "", "# Estimate the average treatment effect", "average_treatment_effect(___________, target.sample = \"___\")", 
        ""), out.width.px = 624, out.height.px = 384, params.src = "grf-manual-prediction, exercise =TRUE, exercise.eval=FALSE", 
        fig.num = 0, exercise.df_print = "paged", exercise.checker = "NULL"), 
    engine = "r", version = "4"), class = c("r", "tutorial_exercise"
)))
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-grf-unobservable-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-grf-unobservable-code-editor`)), session)
output$`tutorial-exercise-grf-unobservable-output` <- renderUI({
  `tutorial-exercise-grf-unobservable-result`()
})
</script>


<script type="application/shiny-prerendered" data-context="server">
learnr:::store_exercise_cache(structure(list(label = "grf-unobservable", global_setup = structure(c("library(learnr)", 
"library(DiagrammeR)", "library(grf)", "library(tidyverse)", 
"library(broom)", "", "", "", "# getting COMPAS data", "", "set.seed(111)", 
"dataset <- fairness::compas %>% ", "  filter(ethnicity == c(\"Caucasian\", \"African_American\")) %>%", 
"  mutate(ethnicity = as.factor(as.character(ethnicity))) %>%", 
"  mutate(Number_of_Priors = Number_of_Priors - min(Number_of_Priors)) %>% ", 
"  select(-probability,-predicted, -Two_yr_Recidivism) %>%", 
"  sample_n(1000)", "", "# Simulating data", "set.seed(112)", 
"dataset <- dataset %>% mutate(", "  jobhelp = sample(c(0,1), 1000, replace = TRUE, prob = c(0.5, 0.5)),", 
"  )", "", " ", "", "datamat <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% ", 
"  select(-`(Intercept)`) %>% ", "  mutate(", "    has_priors = if_else(Number_of_Priors > 0, 1, 0),", 
"    wage_nohelp = (-0.15)*has_priors + ", "            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +", 
"            0.1*ethnicityCaucasian + ", "            (-0.05)*has_priors*ethnicityCaucasian +", 
"            rlnorm(1000, meanlog = 0, sdlog = 0.1),", "    help_effect = 0.1*Number_of_Priors,", 
"    wage = wage_nohelp + help_effect*jobhelp", "    )", "", 
"# ggplot(aes(x = wage, color = as.factor(jobhelp)), data = datamat) + geom_density()", 
"# ggplot(aes(x = Number_of_Priors, y = help_effect), data = datamat) + geom_point()", 
"", "dataset <- dataset %>% ", "  mutate(wage = datamat$wage)", 
"", "# Simulating non-ranodm assignment of treatment", "set.seed(123)", 
"", "datamat2 <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% ", 
"  select(-`(Intercept)`) %>% ", "  mutate(", "    has_priors = if_else(Number_of_Priors > 0, 1, 0),", 
"    prob_treatment =  0.5 + 0.3*ethnicityCaucasian + (-0.05)*has_priors*ethnicityCaucasian + (-0.1)*Age_Above_FourtyFiveyes - 0.05*Number_of_Priors -  0.05*Number_of_Priors*ethnicityCaucasian + 0.1*Age_Above_FourtyFiveyes*Number_of_Priors,", 
"    wage_nohelp = (-0.15)*has_priors + ", "            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +", 
"            0.1*ethnicityCaucasian + ", "            (-0.05)*has_priors*ethnicityCaucasian +", 
"            rlnorm(1000, meanlog = 0, sdlog = 0.1),", "    help_effect = 0.1*Number_of_Priors", 
"    )", "", "jobhelp_new <- map_dbl(datamat2$prob_treatment, ~sample(c(0,1), 1, replace = TRUE, prob = c(1-.x, .x)))", 
"", "dataset2 <- dataset %>% mutate(", "  jobhelp = jobhelp_new,", 
"  wage = datamat2$wage_nohelp + jobhelp_new*datamat2$help_effect", 
"  )", "", "# Simulating non-ranodm assignment of treatment without CIA", 
"set.seed(456)", "", "datamat3 <- dataset %>%  model.matrix(~., .) %>% as.data.frame() %>% ", 
"  select(-`(Intercept)`) %>% ", "  mutate(", "    has_priors = if_else(Number_of_Priors > 0, 1, 0),", 
"    wage_nohelp = (-0.15)*has_priors + ", "            (-0.1)*Age_Above_FourtyFiveyes + (-0.1)*Age_Below_TwentyFiveyes  +", 
"            0.1*ethnicityCaucasian + ", "            (-0.05)*has_priors*ethnicityCaucasian +", 
"            rlnorm(1000, meanlog = 0, sdlog = 0.1),", "    help_effect = 0.1*Number_of_Priors", 
"    )", "prob_treatment3 <- (datamat3$wage_nohelp-min(datamat3$wage_nohelp))/max(datamat3$wage_nohelp)", 
"", "jobhelp_new3 <- map_dbl(prob_treatment3, ~sample(c(0,1), 1, replace = TRUE, prob = c(1-.x, .x)))", 
"", "dataset3 <- dataset %>% mutate(", "  jobhelp = jobhelp_new3,", 
"  wage = datamat3$wage_nohelp + jobhelp_new3*datamat3$help_effect", 
"  )", "", "", "X <- dataset %>%  select(-wage, -jobhelp) %>%  ", 
"  model.matrix(~., .) ", "X2 <- dataset2 %>%  select(-wage, -jobhelp) %>%  ", 
"  model.matrix(~., .) ", "X <- X[ , -1]", "X2 <- X2[ , -1]", 
"Y <- dataset$wage", "W <- dataset$jobhelp", "", "set.seed(234)", 
"cforest <- causal_forest(", "  X,", "  Y,", "  W,", "  num.trees = 4000,", 
"  sample.weights = NULL,", "  clusters = NULL,", "  equalize.cluster.weights = FALSE,", 
"  sample.fraction = 0.5,", "  mtry = min(ceiling(sqrt(ncol(X)) + 20), ncol(X)),", 
"  min.node.size = 10,", "  honesty = TRUE,", "  honesty.fraction = 0.5,", 
"  honesty.prune.leaves = TRUE,", "  alpha = 0.05,", "  imbalance.penalty = 0,", 
"  stabilize.splits = TRUE,", "  ci.group.size = 2,", "  tune.parameters = \"none\",", 
"  compute.oob.predictions = TRUE", ")", "", "", "npriors_val <- unique(dataset$Number_of_Priors) %>% sort()", 
"Xtest <- matrix(0, length(npriors_val), ncol(X))", "Xtest[,1] <- npriors_val", 
"", "set.seed(3456)", "cf_predict <- predict(object = cforest, ", 
"                      newdata = Xtest, ", "                      estimate.variance = TRUE) %>%", 
"  mutate(Number_of_Priors = Xtest[ ,1])", "", ""), chunk_opts = list(
    label = "setup", include = FALSE)), setup = NULL, chunks = list(
    list(label = "grf-unobservable", code = "set.seed(456)\nX3 <- dataset3 %>%  select(-wage, -jobhelp) %>%  model.matrix( ~., data =.)\nX3 <- X3[ , -1]\n\n\n# Fit a causal forest, but supply the predictions for Y and W which you have found earlier: Y.hat and W.hat\ncforest_nonobservable <- causal_forest(\n  X = X3,\n  Y = dataset3$wage,\n  W = dataset3$jobhelp,\n  num.trees = 4000,\n  tune.parameters = \"all\"\n)\n\n# Estimate the average treatment effect\naverage_treatment_effect(cforest_nonobservable, target.sample = \"all\")\n", 
        opts = list(label = "\"grf-unobservable\"", exercise = "TRUE", 
            exercise.eval = "TRUE"), engine = "r")), code_check = NULL, 
    error_check = NULL, check = NULL, solution = NULL, tests = NULL, 
    options = list(eval = TRUE, echo = TRUE, results = "markup", 
        tidy = FALSE, tidy.opts = NULL, collapse = FALSE, prompt = FALSE, 
        comment = NA, highlight = FALSE, size = "normalsize", 
        background = "#F7F7F7", strip.white = TRUE, cache = 0, 
        cache.path = "tutorial_grf_cache/html/", cache.vars = NULL, 
        cache.lazy = TRUE, dependson = NULL, autodep = FALSE, 
        cache.rebuild = FALSE, fig.keep = "high", fig.show = "asis", 
        fig.align = "default", fig.path = "tutorial_grf_files/figure-html/", 
        dev = "png", dev.args = NULL, dpi = 192, fig.ext = "png", 
        fig.width = 6.5, fig.height = 4, fig.env = "figure", 
        fig.cap = NULL, fig.scap = NULL, fig.lp = "fig:", fig.subcap = NULL, 
        fig.pos = "", out.width = 624, out.height = NULL, out.extra = NULL, 
        fig.retina = 2, external = TRUE, sanitize = FALSE, interval = 1, 
        aniopts = "controls,loop", warning = TRUE, error = FALSE, 
        message = TRUE, render = NULL, ref.label = NULL, child = NULL, 
        engine = "r", split = FALSE, include = TRUE, purl = TRUE, 
        max.print = 1000, label = "grf-unobservable", exercise = TRUE, 
        exercise.eval = TRUE, code = c("set.seed(456)", "X3 <- dataset3 %>%  select(-wage, -jobhelp) %>%  model.matrix( ~., data =.)", 
        "X3 <- X3[ , -1]", "", "", "# Fit a causal forest, but supply the predictions for Y and W which you have found earlier: Y.hat and W.hat", 
        "cforest_nonobservable <- causal_forest(", "  X = X3,", 
        "  Y = dataset3$wage,", "  W = dataset3$jobhelp,", "  num.trees = 4000,", 
        "  tune.parameters = \"all\"", ")", "", "# Estimate the average treatment effect", 
        "average_treatment_effect(cforest_nonobservable, target.sample = \"all\")", 
        ""), out.width.px = 624, out.height.px = 384, params.src = "grf-unobservable, exercise = TRUE, exercise.eval=TRUE", 
        fig.alt = NULL, fig.num = 0, exercise.df_print = "paged", 
        exercise.checker = "NULL"), engine = "r", version = "4"), class = c("r", 
"tutorial_exercise")))
</script>
</p>
<!--html_preserve-->
<script type="application/shiny-prerendered" data-context="dependencies">
{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["header-attrs"]},{"type":"character","attributes":{},"value":["2.26"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/pandoc"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["header-attrs.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.26"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["3.6.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/3.6.0"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery-3.6.0.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquerylib"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.1.4"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["bootstrap"]},{"type":"character","attributes":{},"value":["3.3.5"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/bootstrap"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["viewport"]}},"value":[{"type":"character","attributes":{},"value":["width=device-width, initial-scale=1"]}]},{"type":"character","attributes":{},"value":["js/bootstrap.min.js","shim/html5shiv.min.js","shim/respond.min.js"]},{"type":"character","attributes":{},"value":["css/cerulean.min.css"]},{"type":"character","attributes":{},"value":["<style>h1 {font-size: 34px;}\n       h1.title {font-size: 38px;}\n       h2 {font-size: 30px;}\n       h3 {font-size: 24px;}\n       h4 {font-size: 18px;}\n       h5 {font-size: 16px;}\n       h6 {font-size: 12px;}\n       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}\n       pre:not([class]) { background-color: white }<\/style>"]},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.26"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["pagedtable"]},{"type":"character","attributes":{},"value":["1.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/pagedtable-1.1"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["js/pagedtable.js"]},{"type":"character","attributes":{},"value":["css/pagedtable.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.26"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["highlightjs"]},{"type":"character","attributes":{},"value":["9.12.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/highlightjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["highlight.js"]},{"type":"character","attributes":{},"value":["textmate.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.26"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial"]},{"type":"character","attributes":{},"value":["0.11.5"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial.js"]},{"type":"character","attributes":{},"value":["tutorial.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["i18n"]},{"type":"character","attributes":{},"value":["21.6.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/i18n"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["i18next.min.js","tutorial-i18n-init.js"]},{"type":"NULL"},{"type":"character","attributes":{},"value":["<script id=\"i18n-cstm-trns\" type=\"application/json\">{\"language\":\"en\",\"resources\":{\"en\":{\"translation\":{\"button\":{\"runcode\":\"Run Code\",\"runcodetitle\":\"$t(button.runcode) ({{kbd}})\",\"hint\":\"Hint\",\"hint_plural\":\"Hints\",\"hinttitle\":\"$t(button.hint)\",\"hintnext\":\"Next Hint\",\"hintprev\":\"Previous Hint\",\"solution\":\"Solution\",\"solutiontitle\":\"$t(button.solution)\",\"copyclipboard\":\"Copy to Clipboard\",\"startover\":\"Start Over\",\"startovertitle\":\"$t(button.startover)\",\"continue\":\"Continue\",\"submitanswer\":\"Submit Answer\",\"submitanswertitle\":\"$t(button.submitanswer)\",\"previoustopic\":\"Previous Topic\",\"nexttopic\":\"Next Topic\",\"questionsubmit\":\"$t(button.submitanswer)\",\"questiontryagain\":\"Try Again\"},\"text\":{\"startover\":\"Start Over\",\"areyousure\":\"Are you sure you want to start over? (all exercise progress will be reset)\",\"youmustcomplete\":\"You must complete the\",\"exercise\":\"exercise\",\"exercise_plural\":\"exercises\",\"inthissection\":\"in this section before continuing.\",\"code\":\"Code\",\"enginecap\":\"{{engine}} $t(text.code)\",\"quiz\":\"Quiz\",\"blank\":\"blank\",\"blank_plural\":\"blanks\",\"exercisecontainsblank\":\"This exercise contains {{count}} $t(text.blank).\",\"pleasereplaceblank\":\"Please replace {{blank}} with valid code.\",\"unparsable\":\"It looks like this might not be valid R code. R cannot determine how to turn your text into a complete command. You may have forgotten to fill in a blank, to remove an underscore, to include a comma between arguments, or to close an opening <code>&quot;<\\/code>, <code>'<\\/code>, <code>(<\\/code> or <code>{<\\/code> with a matching <code>&quot;<\\/code>, <code>'<\\/code>, <code>)<\\/code> or <code>}<\\/code>.\\n\",\"unparsablequotes\":\"<p>It looks like your R code contains specially formatted quotation marks or &quot;curly&quot; quotes (<code>{{character}}<\\/code>) around character strings, making your code invalid. R requires character values to be contained in straight quotation marks (<code>&quot;<\\/code> or <code>'<\\/code>).<\\/p> {{code}} <p>Don't worry, this is a common source of errors when you copy code from another app that applies its own formatting to text. You can try replacing the code on that line with the following. There may be other places that need to be fixed, too.<\\/p> {{suggestion}}\\n\",\"unparsableunicode\":\"<p>It looks like your R code contains an unexpected special character (<code>{{character}}<\\/code>) that makes your code invalid.<\\/p> {{code}} <p>Sometimes your code may contain a special character that looks like a regular character, especially if you copy and paste the code from another app. Try deleting the special character from your code and retyping it manually.<\\/p>\\n\",\"unparsableunicodesuggestion\":\"<p>It looks like your R code contains an unexpected special character (<code>{{character}}<\\/code>) that makes your code invalid.<\\/p> {{code}} <p>Sometimes your code may contain a special character that looks like a regular character, especially if you copy and paste the code from another app. You can try replacing the code on that line with the following. There may be other places that need to be fixed, too.<\\/p> {{suggestion}}\\n\",\"and\":\"and\",\"or\":\"or\",\"listcomma\":\", \",\"oxfordcomma\":\",\"}}},\"fr\":{\"translation\":{\"button\":{\"runcode\":\"Lancer le Code\",\"runcodetitle\":\"$t(button.runcode) ({{kbd}})\",\"hint\":\"Indication\",\"hint_plural\":\"Indications\",\"hinttitle\":\"$t(button.hint)\",\"hintnext\":\"Indication Suivante\",\"hintprev\":\"Indication Précédente\",\"solution\":\"Solution\",\"solutiontitle\":\"$t(button.solution)\",\"copyclipboard\":\"Copier dans le Presse-papier\",\"startover\":\"Recommencer\",\"startovertitle\":\"$t(button.startover)\",\"continue\":\"Continuer\",\"submitanswer\":\"Soumettre\",\"submitanswertitle\":\"$t(button.submitanswer)\",\"previoustopic\":\"Chapitre Précédent\",\"nexttopic\":\"Chapitre Suivant\",\"questionsubmit\":\"$t(button.submitanswer)\",\"questiontryagain\":\"Réessayer\"},\"text\":{\"startover\":\"Recommencer\",\"areyousure\":\"Êtes-vous certains de vouloir recommencer? (La progression sera remise à zéro)\",\"youmustcomplete\":\"Vous devez d'abord compléter\",\"exercise\":\"l'exercice\",\"exercise_plural\":\"des exercices\",\"inthissection\":\"de cette section avec de continuer.\",\"code\":\"Code\",\"enginecap\":\"$t(text.code) {{engine}}\",\"quiz\":\"Quiz\",\"and\":\"et\",\"or\":\"ou\",\"oxfordcomma\":\"\"}}},\"es\":{\"translation\":{\"button\":{\"runcode\":\"Ejecutar código\",\"runcodetitle\":\"$t(button.runcode) ({{kbd}})\",\"hint\":\"Pista\",\"hint_plural\":\"Pistas\",\"hinttitle\":\"$t(button.hint)\",\"hintnext\":\"Siguiente pista\",\"hintprev\":\"Pista anterior\",\"solution\":\"Solución\",\"solutiontitle\":\"$t(button.solution)\",\"copyclipboard\":\"Copiar al portapapeles\",\"startover\":\"Reiniciar\",\"startovertitle\":\"$t(button.startover)\",\"continue\":\"Continuar\",\"submitanswer\":\"Enviar respuesta\",\"submitanswertitle\":\"$t(button.submitanswer)\",\"previoustopic\":\"Tema anterior\",\"nexttopic\":\"Tema siguiente\",\"questionsubmit\":\"$t(button.submitanswer)\",\"questiontryagain\":\"Volver a intentar\"},\"text\":{\"startover\":\"Reiniciar\",\"areyousure\":\"¿De verdad quieres empezar de nuevo? (todo el progreso del ejercicio se perderá)\",\"youmustcomplete\":\"Debes completar\",\"exercise\":\"el ejercicio\",\"exercise_plural\":\"los ejercicios\",\"inthissection\":\"en esta sección antes de continuar.\",\"code\":\"Código\",\"enginecap\":\"$t(text.code) {{engine}}\",\"quiz\":\"Cuestionario\",\"and\":\"y\",\"or\":\"o\",\"oxfordcomma\":\"\"}}},\"pt\":{\"translation\":{\"button\":{\"runcode\":\"Executar código\",\"runcodetitle\":\"$t(button.runcode) ({{kbd}})\",\"hint\":\"Dica\",\"hint_plural\":\"Dicas\",\"hinttitle\":\"$t(button.hint)\",\"hintnext\":\"Próxima dica\",\"hintprev\":\"Dica anterior\",\"solution\":\"Solução\",\"solutiontitle\":\"$t(button.solution)\",\"copyclipboard\":\"Copiar para a área de transferência\",\"startover\":\"Reiniciar\",\"startovertitle\":\"$t(button.startover)\",\"continue\":\"Continuar\",\"submitanswer\":\"Enviar resposta\",\"submitanswertitle\":\"$t(button.submitanswer)\",\"previoustopic\":\"Tópico anterior\",\"nexttopic\":\"Próximo tópico\",\"questionsubmit\":\"$t(button.submitanswer)\",\"questiontryagain\":\"Tentar novamente\"},\"text\":{\"startover\":\"Reiniciar\",\"areyousure\":\"Tem certeza que deseja começar novamente? (todo o progresso feito será perdido)\",\"youmustcomplete\":\"Você deve completar\",\"exercise\":\"o exercício\",\"exercise_plural\":\"os exercícios\",\"inthissection\":\"nesta seção antes de continuar.\",\"code\":\"Código\",\"enginecap\":\"$t(text.code) {{engine}}\",\"quiz\":\"Quiz\",\"and\":\"e\",\"or\":\"ou\",\"oxfordcomma\":\"\"}}},\"tr\":{\"translation\":{\"button\":{\"runcode\":\"Çalıştırma Kodu\",\"runcodetitle\":\"$t(button.runcode) ({{kbd}})\",\"hint\":\"Ipucu\",\"hint_plural\":\"İpuçları\",\"hinttitle\":\"$t(button.hint)\",\"hintnext\":\"Sonraki İpucu\",\"hintprev\":\"Önceki İpucu\",\"solution\":\"Çözüm\",\"solutiontitle\":\"$t(button.solution)\",\"copyclipboard\":\"Pano'ya Kopyala\",\"startover\":\"Baştan Başlamak\",\"startovertitle\":\"$t(button.startover)\",\"continue\":\"Devam et\",\"submitanswer\":\"Cevabı onayla\",\"submitanswertitle\":\"$t(button.submitanswer)\",\"previoustopic\":\"Önceki Konu\",\"nexttopic\":\"Sonraki Konu\",\"questionsubmit\":\"$t(button.submitanswer)\",\"questiontryagain\":\"Tekrar Deneyin\"},\"text\":{\"startover\":\"Baştan Başlamak\",\"areyousure\":\"Baştan başlamak istediğinizden emin misiniz? (tüm egzersiz ilerlemesi kaybolacak)\",\"youmustcomplete\":\"Tamamlamalısın\",\"exercise\":\"egzersiz\",\"exercise_plural\":\"egzersizler\",\"inthissection\":\"devam etmeden önce bu bölümde\",\"code\":\"Kod\",\"enginecap\":\"$t(text.code) {{engine}}\",\"quiz\":\"Sınav\",\"oxfordcomma\":\"\"}}},\"emo\":{\"translation\":{\"button\":{\"runcode\":\"🏃\",\"runcodetitle\":\"$t(button.runcode) ({{kbd}})\",\"hint\":\"💡\",\"hint_plural\":\"$t(button.hint)\",\"hinttitle\":\"$t(button.hint)\",\"solution\":\"🎯\",\"solutiontitle\":\"$t(button.solution)\",\"copyclipboard\":\"📋\",\"startover\":\"⏮\",\"startovertitle\":\"Start Over\",\"continue\":\"✅\",\"submitanswer\":\"🆗\",\"submitanswertitle\":\"Submit Answer\",\"previoustopic\":\"⬅\",\"nexttopic\":\"➡\",\"questionsubmit\":\"$t(button.submitanswer)\",\"questiontryagain\":\"🔁\"},\"text\":{\"startover\":\"⏮\",\"areyousure\":\"🤔\",\"youmustcomplete\":\"⚠️ 👉 🧑‍💻\",\"exercise\":\"\",\"exercise_plural\":\"\",\"inthissection\":\"\",\"code\":\"💻\",\"enginecap\":\"$t(text.code) {{engine}}\",\"oxfordcomma\":\"\"}}},\"eu\":{\"translation\":{\"button\":{\"runcode\":\"Kodea egikaritu\",\"runcodetitle\":\"$t(button.runcode) ({{kbd}})\",\"hint\":\"Laguntza\",\"hint_plural\":\"Laguntza\",\"hinttitle\":\"$t(button.hint)\",\"hintnext\":\"Aurreko laguntza\",\"hintprev\":\"Hurrengo laguntza\",\"solution\":\"Ebazpena\",\"solutiontitle\":\"$t(button.solution)\",\"copyclipboard\":\"Arbelean kopiatu\",\"startover\":\"Berrabiarazi\",\"startovertitle\":\"$t(button.startover)\",\"continue\":\"Jarraitu\",\"submitanswer\":\"Erantzuna bidali\",\"submitanswertitle\":\"$t(button.submitanswer)\",\"previoustopic\":\"Aurreko atala\",\"nexttopic\":\"Hurrengo atala\",\"questionsubmit\":\"$t(button.submitanswer)\",\"questiontryagain\":\"Berriro saiatu\"},\"text\":{\"startover\":\"Berrabiarazi\",\"areyousure\":\"Berriro hasi nahi duzu? (egindako lana galdu egingo da)\",\"youmustcomplete\":\"Aurrera egin baino lehen atal honetako\",\"exercise\":\"ariketa egin behar duzu.\",\"exercise_plural\":\"ariketak egin behar dituzu.\",\"inthissection\":\"\",\"code\":\"Kodea\",\"enginecap\":\"$t(text.code) {{engine}}\",\"quiz\":\"Galdetegia\",\"oxfordcomma\":\"\"}}},\"de\":{\"translation\":{\"button\":{\"runcode\":\"Code ausführen\",\"runcodetitle\":\"$t(button.runcode) ({{kbd}})\",\"hint\":\"Tipp\",\"hint_plural\":\"Tipps\",\"hinttitle\":\"$t(button.hint)\",\"hintnext\":\"Nächster Tipp\",\"hintprev\":\"Vorheriger Tipp\",\"solution\":\"Lösung\",\"solutiontitle\":\"$t(button.solution)\",\"copyclipboard\":\"In die Zwischenablage kopieren\",\"startover\":\"Neustart\",\"startovertitle\":\"$t(button.startover)\",\"continue\":\"Weiter\",\"submitanswer\":\"Antwort einreichen\",\"submitanswertitle\":\"$t(button.submitanswer)\",\"previoustopic\":\"Vorheriges Kapitel\",\"nexttopic\":\"Nächstes Kapitel\",\"questionsubmit\":\"$t(button.submitanswer)\",\"questiontryagain\":\"Nochmal versuchen\"},\"text\":{\"startover\":\"Neustart\",\"areyousure\":\"Bist du sicher, dass du neustarten willst? (der gesamte Lernfortschritt wird gelöscht)\",\"youmustcomplete\":\"Vervollstädinge\",\"exercise\":\"die Übung\",\"exercise_plural\":\"die Übungen\",\"inthissection\":\"in diesem Kapitel, bevor du fortfährst.\",\"code\":\"Code\",\"enginecap\":\"$t(text.code) {{engine}}\",\"quiz\":\"Quiz\",\"blank\":\"Lücke\",\"blank_plural\":\"Lücken\",\"pleasereplaceblank\":\"Bitte ersetze {{blank}} mit gültigem Code.\",\"unparsable\":\"Dies scheint kein gültiger R Code zu sein. R kann deinen Text nicht in einen gültigen Befehl übersetzen. Du hast vielleicht vergessen, die Lücke zu füllen, einen Unterstrich zu entfernen, ein Komma zwischen Argumente zu setzen oder ein eröffnendes <code>&quot;<\\/code>, <code>'<\\/code>, <code>(<\\/code> oder <code>{<\\/code> mit einem zugehörigen <code>&quot;<\\/code>, <code>'<\\/code>, <code>)<\\/code> oder <code>}<\\/code> zu schließen.\\n\",\"and\":\"und\",\"or\":\"oder\",\"listcomma\":\", \",\"oxfordcomma\":\",\"}}},\"ko\":{\"translation\":{\"button\":{\"runcode\":\"코드 실행\",\"runcodetitle\":\"$t(button.runcode) ({{kbd}})\",\"hint\":\"힌트\",\"hint_plural\":\"힌트들\",\"hinttitle\":\"$t(button.hint)\",\"hintnext\":\"다음 힌트\",\"hintprev\":\"이전 힌트\",\"solution\":\"솔루션\",\"solutiontitle\":\"$t(button.solution)\",\"copyclipboard\":\"클립보드에 복사\",\"startover\":\"재학습\",\"startovertitle\":\"$t(button.startover)\",\"continue\":\"다음 학습으로\",\"submitanswer\":\"정답 제출\",\"submitanswertitle\":\"$t(button.submitanswer)\",\"previoustopic\":\"이전 토픽\",\"nexttopic\":\"다음 토픽\",\"questionsubmit\":\"$t(button.submitanswer)\",\"questiontryagain\":\"재시도\"},\"text\":{\"startover\":\"재학습\",\"areyousure\":\"다시 시작 하시겠습니까? (모든 예제의 진행 정보가 재설정됩니다)\",\"youmustcomplete\":\"당신은 완료해야 합니다\",\"exercise\":\"연습문제\",\"exercise_plural\":\"연습문제들\",\"inthissection\":\"이 섹션을 실행하기 전에\",\"code\":\"코드\",\"enginecap\":\"$t(text.code) {{engine}}\",\"quiz\":\"퀴즈\",\"blank\":\"공백\",\"blank_plural\":\"공백들\",\"exercisecontainsblank\":\"이 연습문제에는 {{count}}개의 $t(text.blank)이 포함되어 있습니다.\",\"pleasereplaceblank\":\"{{blank}}를 유효한 코드로 바꾸십시오.\",\"unparsable\":\"이것은 유효한 R 코드가 아닐 수 있습니다. R은 텍스트를 완전한 명령으로 변환하는 방법을 결정할 수 없습니다. 당신은 공백이나 밑줄을 대체하여 채우기, 인수를 컴마로 구분하기, 또는 <code>&quot;<\\/code>, <code>'<\\/code>, <code>(<\\/code> , <code>{<\\/code>로 시작하는 구문을 닫는 <code>&quot;<\\/code>, <code>'<\\/code>, <code>)<\\/code>, <code>}<\\/code>을 잊었을 수도 있습니다.\\n\",\"and\":\"그리고\",\"or\":\"혹은\",\"listcomma\":\", \",\"oxfordcomma\":\"\"}}},\"zh\":{\"translation\":{\"button\":{\"runcode\":\"运行代码\",\"runcodetitle\":\"$t(button.runcode) ({{kbd}})\",\"hint\":\"提示\",\"hint_plural\":\"提示\",\"hinttitle\":\"$t(button.hint)\",\"hintnext\":\"下一个提示\",\"hintprev\":\"上一个提示\",\"solution\":\"答案\",\"solutiontitle\":\"$t(button.solution)\",\"copyclipboard\":\"复制到剪切板\",\"startover\":\"重新开始\",\"startovertitle\":\"$t(button.startover)\",\"continue\":\"继续\",\"submitanswer\":\"提交答案\",\"submitanswertitle\":\"$t(button.submitanswer)\",\"previoustopic\":\"上一专题\",\"nexttopic\":\"下一专题\",\"questionsubmit\":\"$t(button.submitanswer)\",\"questiontryagain\":\"再试一次\"},\"text\":{\"startover\":\"重置\",\"areyousure\":\"你确定要重新开始吗? (所有当前进度将被重置)\",\"youmustcomplete\":\"你必须完成\",\"exercise\":\"练习\",\"exercise_plural\":\"练习\",\"inthissection\":\"在进行本节之前\",\"code\":\"代码\",\"enginecap\":\"$t(text.code) {{engine}}\",\"quiz\":\"测试\",\"blank\":\"空\",\"blank_plural\":\"空\",\"exercisecontainsblank\":\"本练习包含{{count}}个$t(text.blank)\",\"pleasereplaceblank\":\"请在{{blank}}内填写恰当的代码\",\"unparsable\":\"这似乎不是有效的R代码。 R不知道如何将您的文本转换为完整的命令。 您是否忘了填空，忘了删除下划线，忘了在参数之间包含逗号，或者是忘了用<code>&quot;<\\/code>, <code>'<\\/code>, <code>)<\\/code>,<code>}<\\/code>来封闭<code>&quot;<\\/code>, <code>'<\\/code>, <code>(<\\/code>。 or <code>{<\\/code>。\\n\",\"unparsablequotes\":\"<p>您的R代码中似乎含有特殊格式的引号，或者弯引号(<code>{{character}}<\\/code>) 在字符串前后，在R中字符串应该被直引号(<code>&quot;<\\/code> 或者 <code>'<\\/code>)包裹。<\\/p> {{code}} <p>别担心，该错误经常在复制粘贴包含格式的代码时遇到， 您可以尝试将该行中的代码替换为以下代码，也许还有其他地方需要修改。<\\/p> {{suggestion}}\\n\",\"unparsableunicode\":\"<p>您的代码中似乎包含有异常字符(<code>{{character}}<\\/code>),导致代码无效。<\\/p> {{code}} <p>有时候你的代码可能含有看似正常字符的特殊字符，特别是当你复制粘贴其他来源代码的时候。 请试着删除这些特殊字符,重新输入<\\/p>\\n\",\"unparsableunicodesuggestion\":\"<p>您的代码中似乎包含有异常字符(<code>{{character}}<\\/code>),导致代码无效。<\\/p> {{code}} <p>有时候你的代码可能含有看似正常字符的特殊字符，特别是当你复制粘贴其他来源代码的时候。 请试着删除这些特殊字符,重新输入<\\/p>\\n\",\"and\":\"且\",\"or\":\"或\",\"listcomma\":\",\",\"oxfordcomma\":\",\"}}},\"pl\":{\"translation\":{\"button\":{\"runcode\":\"Uruchom kod\",\"runcodetitle\":\"$t(button.runcode) ({{kbd}})\",\"hint\":\"Podpowiedź\",\"hint_plural\":\"Podpowiedzi\",\"hinttitle\":\"$t(button.hint)\",\"hintnext\":\"Następna podpowiedź\",\"hintprev\":\"Poprzednia podpowiedź\",\"solution\":\"Rozwiązanie\",\"solutiontitle\":\"$t(button.solution)\",\"copyclipboard\":\"Kopiuj do schowka\",\"startover\":\"Zacznij od początku\",\"startovertitle\":\"$t(button.startover)\",\"continue\":\"Kontynuuj\",\"submitanswer\":\"Wyślij\",\"submitanswertitle\":\"$t(button.submitanswer)\",\"previoustopic\":\"Poprzednia sekcja\",\"nexttopic\":\"Następna sekcja\",\"questionsubmit\":\"$t(button.submitanswer)\",\"questiontryagain\":\"Spróbuj ponownie\"},\"text\":{\"startover\":\"Zacznij od początku\",\"areyousure\":\"Czy na pewno chcesz zacząć od początku? (cały postęp w zadaniu zostanie utracony)\",\"youmustcomplete\":\"Musisz ukończyć\",\"exercise\":\"ćwiczenie\",\"exercise_plural\":\"ćwiczenia\",\"inthissection\":\"w tej sekcji przed kontynuowaniem\",\"code\":\"Kod\",\"enginecap\":\"$t(text.code) {{engine}}\",\"quiz\":\"Quiz\",\"blank\":\"luka\",\"blank_plural\":\"luk(i)\",\"exercisecontainsblank\":\"To ćwiczenie zawiera {{count}} $t(text.blank).\",\"pleasereplaceblank\":\"Proszę uzupełnić {{blank}} prawidłowym kodem.\",\"unparsable\":\"Wygląda na to, że może to nie być prawidłowy kod R. R nie jest w stanie przetworzyć Twojego tekstu na polecenie. Mogłeś(-aś) zapomnieć wypełnić luki, usunąć podkreślnik, umieścić przecinka między argumentami, lub zamknąć znak <code>&quot;<\\/code>, <code>'<\\/code>, <code>(<\\/code> lub <code>{<\\/code> odpowiadającym <code>&quot;<\\/code>, <code>'<\\/code>, <code>)<\\/code> lub <code>}<\\/code>.\\n\",\"unparsablequotes\":\"<p>Wygląda na to, że Twój kod zawiera szczególnie sformatowane cudzysłowy lub cudzysłowy typograficzne (<code>{{character}}<\\/code>) przy ciągach znaków, co sprawia, że kod jest niepoprawny. R wymaga cudzysłowów prostych (<code>&quot;<\\/code> albo <code>'<\\/code>).<\\/p> {{code}} <p>Nie martw się, to powszechne źródło błędów, gdy kopiuje się kod z innego programu, który sam formatuje teskt. Możesz spróbować zastąpić swój kod następującym kodem. Mogą być też inne miejsca, które wymagają poprawienia.<\\/p> {{suggestion}}\\n\",\"unparsableunicode\":\"<p>Wygląda na to, że Twój kod zawiera niespodziewany znak specjalny (<code>{{character}}<\\/code>), co sprawia, że kod jest niepoprawny.<\\/p> {{code}} <p>Czasami Twój kod może zawierać znak specjalny, który wygląda jak zwykły znak, zwłaszcza jeśli kopiujesz kod z innego programu. Spróbuj usunąć znak specjalny i wpisać do ponownie ręcznie.<\\/p>\\n\",\"unparsableunicodesuggestion\":\"<p>Wygląda na to, że Twój kod zawiera niespodziewany znak specjalny (<code>{{character}}<\\/code>), co sprawia, że kod jest niepoprawny.<\\/p> {{code}} <p>Czasami Twój kod może zawierać znak specjalny, który wygląda jak zwykły znak, zwłaszcza jeśli kopiujesz kod z innego programu. Możesz spróbować zastąpić swój kod następującym kodem. Mogą być też inne miejsca, które wymagają poprawienia.<\\/p> {{suggestion}}\\n\",\"and\":\"i\",\"or\":\"lub\",\"listcomma\":\", \",\"oxfordcomma\":\"\"}}}}}<\/script>"]},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial-format"]},{"type":"character","attributes":{},"value":["0.11.5"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmarkdown/templates/tutorial/resources"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial-format.js"]},{"type":"character","attributes":{},"value":["tutorial-format.css","rstudio-theme.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["3.6.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/3.6.0"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery-3.6.0.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquerylib"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.1.4"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["navigation"]},{"type":"character","attributes":{},"value":["1.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/navigation-1.1"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tabsets.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.26"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["highlightjs"]},{"type":"character","attributes":{},"value":["9.12.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/highlightjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["highlight.js"]},{"type":"character","attributes":{},"value":["default.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.26"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["3.6.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/3.6.0"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery-3.6.0.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquerylib"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.1.4"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["font-awesome"]},{"type":"character","attributes":{},"value":["6.4.2"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["fontawesome"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["css/all.min.css","css/v4-shims.min.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["fontawesome"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.5.2"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["bootbox"]},{"type":"character","attributes":{},"value":["5.5.2"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/bootbox"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["bootbox.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["idb-keyvalue"]},{"type":"character","attributes":{},"value":["3.2.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/idb-keyval"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["idb-keyval-iife-compat.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[false]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial"]},{"type":"character","attributes":{},"value":["0.11.5"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial.js"]},{"type":"character","attributes":{},"value":["tutorial.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["2.0.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["2.0.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["2.0.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["2.0.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["htmltools-fill"]},{"type":"character","attributes":{},"value":["0.5.8.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["fill"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["fill.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["htmltools"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.5.8.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets"]},{"type":"character","attributes":{},"value":["1.6.4"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["www"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["htmlwidgets.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["htmlwidgets"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.6.4"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["viz"]},{"type":"character","attributes":{},"value":["1.8.2"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets/lib/viz"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["viz.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["DiagrammeR"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.0.11"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["DiagrammeR-styles"]},{"type":"character","attributes":{},"value":["0.2"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets/lib/styles"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["styles.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["DiagrammeR"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.0.11"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["grViz-binding"]},{"type":"character","attributes":{},"value":["1.0.11"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["htmlwidgets"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["grViz.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["DiagrammeR"]},{"type":"logical","attributes":{},"value":[false]},{"type":"character","attributes":{},"value":["1.0.11"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["2.0.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["2.0.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["2.0.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["2.0.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["2.0.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["2.0.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["2.0.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["2.0.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["2.0.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["2.0.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["2.0.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["2.0.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["2.0.10"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.11.5"]}]}]}
</script>
<!--/html_preserve-->
<!--html_preserve-->
<script type="application/shiny-prerendered" data-context="execution_dependencies">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["packages"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["packages","version"]},"class":{"type":"character","attributes":{},"value":["data.frame"]},"row.names":{"type":"integer","attributes":{},"value":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127]}},"value":[{"type":"character","attributes":{},"value":["backports","base","broom","bslib","cachem","caret","checkmate","class","cli","codetools","colorspace","commonmark","compiler","data.table","datasets","devtools","DiagrammeR","DiceKriging","digest","dplyr","e1071","ellipsis","evaluate","fairness","fansi","farver","fastmap","fontawesome","forcats","foreach","fs","future","future.apply","generics","ggplot2","globals","glue","gower","graphics","grDevices","grf","grid","gtable","hardhat","highr","hms","htmltools","htmlwidgets","httpuv","ipred","iterators","jquerylib","jsonlite","knitr","labeling","later","lattice","lava","learnr","lifecycle","listenv","lubridate","magrittr","markdown","MASS","Matrix","memoise","methods","mime","miniUI","ModelMetrics","munsell","nlme","nnet","parallel","parallelly","pillar","pkgbuild","pkgconfig","pkgload","plyr","pROC","prodlim","profvis","promises","proxy","purrr","R6","RColorBrewer","Rcpp","readr","recipes","remotes","reshape2","rlang","rmarkdown","rpart","rprojroot","rstudioapi","sass","scales","sessioninfo","shiny","splines","stats","stats4","stringi","stringr","survival","tibble","tidyr","tidyselect","tidyverse","timechange","timeDate","tools","tzdb","urlchecker","usethis","utf8","utils","vctrs","visNetwork","withr","xfun","xtable","yaml"]},{"type":"character","attributes":{},"value":["1.4.1","4.3.2","1.0.5","0.7.0","1.0.8","6.0-94","2.3.1","7.3-22","3.6.2","0.2-19","2.1-0","1.9.1","4.3.2","1.15.4","4.3.2","2.4.5","1.0.11","1.6.0","0.6.35","1.1.4","1.7-14","0.3.2","0.23","1.2.2","1.0.6","2.1.1","1.1.1","0.5.2","1.0.0","1.5.2","1.6.4","1.33.2","1.11.2","0.1.3","3.5.1","0.16.3","1.6.2","1.0.1","4.3.2","4.3.2","2.3.2","4.3.2","0.3.5","1.3.1","0.10","1.1.3","0.5.8.1","1.6.4","1.6.15","0.9-14","1.0.14","0.1.4","1.8.8","1.46","0.4.3","1.3.2","0.21-9","1.8.0","0.11.5","1.0.4","0.9.1","1.9.3","2.0.3","1.12","7.3-60","1.6-1.1","2.0.1","4.3.2","0.12","0.1.1.1","1.2.2.2","0.5.1","3.1-163","7.3-19","4.3.2","1.37.1","1.9.0","1.4.4","2.0.3","1.3.4","1.8.9","1.18.5","2023.08.28","0.3.8","1.3.0","0.4-27","1.0.2","2.5.1","1.1-3","1.0.11","2.1.5","1.0.10","2.5.0","1.4.4","1.1.2","2.26","4.1.21","2.0.4","0.16.0","0.4.9","1.3.0","1.2.2","1.8.1.1","4.3.2","4.3.2","4.3.2","1.8.3","1.5.1","3.5-7","3.2.1","1.3.1","1.2.1","2.0.0","0.2.0","4032.109","4.3.2","0.4.0","1.0.1","2.2.3","1.2.4","4.3.2","0.6.5","2.1.2","3.0.0","0.43","1.8-4","2.3.8"]}]}]}
</script>
<!--/html_preserve-->
</div>
</div>

</article> <!-- topics -->

<div class="topicsContainer">
<div class="topicsPositioner">
<div class="band">
<div class="bandContent topicsListContainer">

<!-- begin doc-metadata -->
<div id="doc-metadata">
<h1 class="title toc-ignore" style="display:none;">Tutorial Generalized
Random Forest DSE 2020 Tilburg</h1>
<h4 class="author"><em>Madina Kurmangaliyeva</em></h4>
</div>
<!-- end doc-metadata -->

</div> <!-- bandContent.topicsListContainer -->
</div> <!-- band -->
</div> <!-- topicsPositioner -->
</div> <!-- topicsContainer -->


</main> <!-- bandContent page -->
</div> <!-- pageContent band -->



<!-- Build Tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("section-TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<script>
// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});
</script>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>


</body>

</html>
